\input{preamble}

\begin{document}

\title{Algebraic Geometry}
\maketitle

\phantomsection
\label{section-phantom}
\hfill
\href{http://github.com/danimalabares/stack}{github.com/danimalabares/stack}

\tableofcontents

\section{Sheaves}
\label{section-sheaves}

Let $X$ be a topological space. Let $x \in X$ be a point.
Let $\mathcal{F}$ be a presheaf of sets on $X$.
The {\it stalk of $\mathcal{F}$ at $x$} is the set
$$
\mathcal{F}_x
=
\colim_{x\in U} \mathcal{F}(U)
$$
where the colimit is over the set of open neighbourhoods
$U$ of $x$ in $X$. The set of open neighbourhoods is
partially ordered by (reverse) inclusion:
We say $U \geq U' \Leftrightarrow U \subset U'$.
The transition maps in the system are
given by the restriction maps of $\mathcal{F}$.
See Categories, Section \ref{categories-section-posets-limits}
for notation and terminology regarding (co)limits over systems.
Note that the colimit is a directed colimit.
Thus it is easy to describe $\mathcal{F}_x$. Namely,
$$
\mathcal{F}_x
=
\{
(U, s)
\mid
x\in U, s\in \mathcal{F}(U)
\}/\sim
$$
with equivalence relation given by $(U, s) \sim (U', s')$ if and only if
there exists an open $U'' \subset U \cap U'$ with $x \in U''$ and
$s|_{U''} = s'|_{U''}$. Given a pair $(U, s)$ we sometimes denote
$s_x$ the element of $\mathcal{F}_x$ corresponding to the equivalence
class of $(U, x)$. We sometimes use the phrase
``image of $s$ in $\mathcal{F}_x$'' to denote $s_x$.
For example, given two pairs $(U, s)$ and $(U', s')$ we sometimes
say ``$s$ is equal to $s'$ in $\mathcal{F}_x$'' to indicate
that $s_x = s'_x$. Other authors use the terminology
``germ of $s$ at $x$''.

\section{Line bundles}
\label{section-line-bundles}

\section{Invertible modules}
\label{section-invertible}

\noindent
Similarly to the case of modules over rings
(More on Algebra, Section \ref{more-algebra-section-picard})
we have the following definition.

\begin{definition}
\label{definition-invertible}
Let $(X, \mathcal{O}_X)$ be a ringed space. An
{\it invertible $\mathcal{O}_X$-module} is a sheaf
of $\mathcal{O}_X$-modules $\mathcal{L}$ such that
the functor
$$
\textit{Mod}(\mathcal{O}_X) \longrightarrow \textit{Mod}(\mathcal{O}_X),\quad
\mathcal{F} \longmapsto \mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{F}
$$
is an equivalence of categories. We say that $\mathcal{L}$ is
{\it trivial} if it is isomorphic as an $\mathcal{O}_X$-module
to $\mathcal{O}_X$.
\end{definition}

\noindent
Lemma \ref{lemma-invertible-is-locally-free-rank-1}
below explains the relationship with locally free modules
of rank $1$.

\begin{lemma}
\label{lemma-invertible}
Let $(X, \mathcal{O}_X)$ be a ringed space. Let $\mathcal{L}$
be an $\mathcal{O}_X$-module. Equivalent are
\begin{enumerate}
\item $\mathcal{L}$ is invertible, and
\item there exists an $\mathcal{O}_X$-module $\mathcal{N}$
such that
$\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N} \cong \mathcal{O}_X$.
\end{enumerate}
In this case $\mathcal{L}$ is locally a direct summand of a finite free
$\mathcal{O}_X$-module and the module $\mathcal{N}$ in (2) is isomorphic to
$\SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X)$.
\end{lemma}

\begin{proof}
Assume (1). Then the functor $- \otimes_{\mathcal{O}_X} \mathcal{L}$
is essentially surjective, hence there exists an $\mathcal{O}_X$-module
$\mathcal{N}$ as in (2). If (2) holds, then the functor
$- \otimes_{\mathcal{O}_X} \mathcal{N}$ is a quasi-inverse
to the functor $- \otimes_{\mathcal{O}_X} \mathcal{L}$ and
we see that (1) holds.

\medskip\noindent
Assume (1) and (2) hold. Denote
$\psi : \mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N} \to \mathcal{O}_X$
the given isomorphism. Let $x \in X$. Choose an open neighbourhood
$U$ an integer $n \geq 1$ and sections $s_i \in \mathcal{L}(U)$,
$t_i \in \mathcal{N}(U)$ such that $\psi(\sum s_i \otimes t_i) = 1$.
Consider the isomorphisms
$$
\mathcal{L}|_U \to
\mathcal{L}|_U \otimes_{\mathcal{O}_U}
\mathcal{L}|_U \otimes_{\mathcal{O}_U} \mathcal{N}|_U \to \mathcal{L}|_U
$$
where the first arrow sends $s$ to $\sum s_i \otimes s \otimes t_i$
and the second arrow sends $s \otimes s' \otimes t$ to $\psi(s' \otimes t)s$.
We conclude that $s \mapsto \sum \psi(s \otimes t_i)s_i$ is
an automorphism of $\mathcal{L}|_U$. This automorphism factors as
$$
\mathcal{L}|_U \to \mathcal{O}_U^{\oplus n} \to \mathcal{L}|_U
$$
where the first arrow is given by
$s \mapsto (\psi(s \otimes t_1), \ldots, \psi(s \otimes t_n))$
and the second arrow by $(a_1, \ldots, a_n) \mapsto \sum a_i s_i$.
In this way we conclude that $\mathcal{L}|_U$ is a direct summand
of a finite free $\mathcal{O}_U$-module.

\medskip\noindent
Assume (1) and (2) hold. Consider the evaluation map
$$
\mathcal{L} \otimes_{\mathcal{O}_X}
\SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X)
\longrightarrow \mathcal{O}_X
$$
To finish the proof of the lemma
we will show this is an isomorphism by checking it induces
isomorphisms on stalks. Let $x \in X$.
Since we know (by the previous paragraph)
that $\mathcal{L}$ is a finitely presented
$\mathcal{O}_X$-module
we can use Lemma \ref{lemma-stalk-internal-hom}
to see that it suffices to show that
$$
\mathcal{L}_x \otimes_{\mathcal{O}_{X, x}}
\Hom_{\mathcal{O}_{X, x}}(\mathcal{L}_x, \mathcal{O}_{X, x})
\longrightarrow \mathcal{O}_{X, x}
$$
is an isomorphism. Since
$\mathcal{L}_x \otimes_{\mathcal{O}_{X, x}} \mathcal{N}_x =
(\mathcal{L} \otimes_{\mathcal{O}_X} \mathcal{N})_x =
\mathcal{O}_{X, x}$ (Lemma \ref{lemma-stalk-tensor-product})
the desired result follows from
More on Algebra, Lemma \ref{more-algebra-lemma-invertible}.
\end{proof}

\begin{lemma}
\label{lemma-pullback-invertible}
Let $f : (X, \mathcal{O}_X) \to (Y, \mathcal{O}_Y)$ be a
morphism of ringed spaces. The pullback $f^*\mathcal{L}$ of an
invertible $\mathcal{O}_Y$-module is invertible.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-invertible}
there exists an $\mathcal{O}_Y$-module $\mathcal{N}$ such that
$\mathcal{L} \otimes_{\mathcal{O}_Y} \mathcal{N} \cong \mathcal{O}_Y$.
Pulling back we get
$f^*\mathcal{L} \otimes_{\mathcal{O}_X} f^*\mathcal{N} \cong \mathcal{O}_X$
by Lemma \ref{lemma-tensor-product-pullback}.
Thus $f^*\mathcal{L}$ is invertible by Lemma \ref{lemma-invertible}.
\end{proof}

\begin{lemma}
\label{lemma-invertible-is-locally-free-rank-1}
Let $(X, \mathcal{O}_X)$ be a ringed space. Any locally free
$\mathcal{O}_X$-module of rank $1$ is invertible.
If all stalks $\mathcal{O}_{X, x}$ are local rings, then
the converse holds as well (but in general this is not the case).
\end{lemma}

\begin{proof}
The parenthetical statement follows by considering a one point
space $X$ with sheaf of rings $\mathcal{O}_X$ given by a ring $R$.
Then invertible $\mathcal{O}_X$-modules correspond to invertible
$R$-modules, hence as soon as $\Pic(R)$ is not the trivial group,
then we get an example.

\medskip\noindent
Assume $\mathcal{L}$ is locally free of rank $1$ and consider the
evaluation map
$$
\mathcal{L} \otimes_{\mathcal{O}_X}
\SheafHom_{\mathcal{O}_X}(\mathcal{L}, \mathcal{O}_X)
\longrightarrow \mathcal{O}_X
$$
Looking over an open covering trivialization $\mathcal{L}$, we see
that this map is an isomorphism. Hence $\mathcal{L}$ is invertible
by Lemma \ref{lemma-invertible}.

\medskip\noindent
Assume all stalks $\mathcal{O}_{X, x}$ are local rings and $\mathcal{L}$
invertible. In the proof of Lemma \ref{lemma-invertible}
we have seen that $\mathcal{L}_x$ is an invertible
$\mathcal{O}_{X, x}$-module for all $x \in X$. Since
$\mathcal{O}_{X, x}$ is local, we see that
$\mathcal{L}_x \cong \mathcal{O}_{X, x}$
(More on Algebra, Section \ref{more-algebra-section-picard}).
Since $\mathcal{L}$ is of finite presentation by
Lemma \ref{lemma-invertible} we conclude that $\mathcal{L}$
is locally free of rank $1$ by
Lemma \ref{lemma-finite-presentation-stalk-free}.
\end{proof}

\section{Ampleness}
\label{section-ampleness}

First is this lemma that comes from modules.tex. I think these sets $X_s$ are
the base points of the bundle.

\begin{lemma}
\label{lemma-s-open}
From modules.tex.
\begin{slogan}
A (local) trivialisation of a linebundle
is the same as a (local) nonvanishing section.
\end{slogan}
Let $X$ be a ringed space. Assume that each stalk $\mathcal{O}_{X, x}$
is a local ring with maximal ideal $\mathfrak m_x$.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
For any section $s \in \Gamma(X, \mathcal{L})$ the set
$$
X_s = \{x \in X \mid \text{image }s \not\in \mathfrak m_x\mathcal{L}_x\}
$$
is open in $X$. The map $s : \mathcal{O}_{X_s} \to \mathcal{L}|_{X_s}$
is an isomorphism, and there exists a section $s'$
of $\mathcal{L}^{\otimes -1}$ over $X_s$ such that $s' (s|_{X_s}) = 1$.
\end{lemma}

\begin{proof}
Suppose $x \in X_s$.
We have an isomorphism
$$
\mathcal{L}_x \otimes_{\mathcal{O}_{X, x}} (\mathcal{L}^{\otimes -1})_x
\longrightarrow
\mathcal{O}_{X, x}
$$
by Lemma \ref{lemma-constructions-invertible}.
Both $\mathcal{L}_x$ and $(\mathcal{L}^{\otimes -1})_x$
are free $\mathcal{O}_{X, x}$-modules of rank $1$. We conclude
from Algebra, Nakayama's Lemma \ref{algebra-lemma-NAK} that
$s_x$ is a basis for $\mathcal{L}_x$. Hence there exists
a basis element $t_x \in (\mathcal{L}^{\otimes -1})_x$
such that $s_x \otimes t_x$ maps to $1$.
Choose an open neighbourhood $U$ of
$x$ such that $t_x$ comes from a section $t$
of $\mathcal{L}^{\otimes -1}$ over $U$ and such that
$s \otimes t$ maps to $1 \in \mathcal{O}_X(U)$.
Clearly, for every $x' \in U$ we see that $s$ generates
the module $\mathcal{L}_{x'}$. Hence $U \subset X_s$.
This proves that $X_s$ is open. Moreover, the section
$t$ constructed over $U$ above is unique, and hence
these glue to give the section $s'$ of the lemma.
\end{proof}

Recall from Modules, Lemma \ref{modules-lemma-s-open}
that given an invertible sheaf $\mathcal{L}$ on a locally ringed
space $X$, and given a global section $s$ of $\mathcal{L}$
the set $X_s = \{x \in X \mid s \not \in \mathfrak m_x\mathcal{L}_x\}$
is open. A general remark is that
$X_s \cap X_{s'} = X_{ss'}$, where $ss'$ denote
the section $s \otimes s' \in \Gamma(X, \mathcal{L} \otimes \mathcal{L}')$.

\begin{definition}
\label{definition-ample}
\begin{reference}
\cite[II Definition 4.5.3]{EGA}
\end{reference}
Let $X$ be a scheme.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
We say $\mathcal{L}$ is {\it ample} if
\begin{enumerate}
\item $X$ is quasi-compact, and
\item for every $x \in X$ there exists an $n \geq 1$
and $s \in \Gamma(X, \mathcal{L}^{\otimes n})$ such
that $x \in X_s$ and $X_s$ is affine.
\end{enumerate}
\end{definition}



Now we pass to the part where ampleness gives you an embedding to some
projective space.

\begin{definition}
\label{definition-gamma-star}
From modules.tex. Let $(X, \mathcal{O}_X)$ be a ringed space.
Given an invertible sheaf $\mathcal{L}$ on $X$ we define
the {\it associated graded ring} to be
$$
\Gamma_*(X, \mathcal{L})
=
\bigoplus\nolimits_{n \geq 0} \Gamma(X, \mathcal{L}^{\otimes n})
$$
Given a sheaf of $\mathcal{O}_X$-modules $\mathcal{F}$ we set
$$
\Gamma_*(X, \mathcal{L}, \mathcal{F})
=
\bigoplus\nolimits_{n \in \mathbf{Z}} \Gamma(X,
\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n})
$$
which we think of as a graded $\Gamma_*(X, \mathcal{L})$-module.
\end{definition}

\begin{lemma}
\label{lemma-map-into-proj}
Let $X$ be a scheme.
Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Set $S = \Gamma_*(X, \mathcal{L})$ as a graded ring.
If every point of $X$ is contained in one of the
open subschemes $X_s$, for some $s \in S_{+}$ homogeneous, then
there is a canonical morphism of schemes
$$
f : X \longrightarrow Y = \text{Proj}(S),
$$
to the homogeneous spectrum of $S$ (see
Constructions, Section \ref{constructions-section-proj}).
This morphism has the following properties
\begin{enumerate}
\item $f^{-1}(D_{+}(s)) = X_s$ for any $s \in S_{+}$ homogeneous,
\item there are $\mathcal{O}_X$-module maps
$f^*\mathcal{O}_Y(n) \to \mathcal{L}^{\otimes n}$
compatible with multiplication maps, see
Constructions, Equation (\ref{constructions-equation-multiply}),
\item the composition
$S_n \to \Gamma(Y, \mathcal{O}_Y(n)) \to \Gamma(X, \mathcal{L}^{\otimes n})$
is the identity map, and
\item for every $x \in X$ there is an integer $d \geq 1$
and an open neighbourhood $U \subset X$ of $x$
such that $f^*\mathcal{O}_Y(dn)|_U \to \mathcal{L}^{\otimes dn}|_U$
is an isomorphism for all $n \in \mathbf{Z}$.
\end{enumerate}
\end{lemma}

\begin{proof}
Denote $\psi : S \to \Gamma_*(X, \mathcal{L})$ the identity map.
We are going to use the triple
$(U(\psi), r_{\mathcal{L}, \psi}, \theta)$ of
Constructions, Lemma \ref{constructions-lemma-invertible-map-into-proj}.
By assumption the open subscheme $U(\psi)$ of equals $X$. Hence
$r_{\mathcal{L}, \psi} : U(\psi) \to Y$ is defined on all of $X$.
We set $f = r_{\mathcal{L}, \psi}$.
The maps in part (2) are the components of $\theta$.
Part (3) follows from condition (2) in the lemma cited above.
Part (1) follows from (3) combined with condition (1) in the lemma
cited above. Part (4) follows from the last statement in
Constructions, Lemma \ref{constructions-lemma-invertible-map-into-proj}
since the map $\alpha$ mentioned there is an isomorphism.
\end{proof}

\begin{lemma}
\label{lemma-map-into-proj-quasi-compact}
Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Set $S = \Gamma_*(X, \mathcal{L})$.
Assume (a) every point of $X$ is contained in one of the
open subschemes $X_s$, for some $s \in S_{+}$ homogeneous,
and (b) $X$ is quasi-compact. Then the canonical morphism of schemes
$f : X \longrightarrow \text{Proj}(S)$ of Lemma \ref{lemma-map-into-proj}
above is quasi-compact with dense image.
\end{lemma}

\begin{proof}
To prove $f$ is quasi-compact it suffices to show that $f^{-1}(D_{+}(s))$
is quasi-compact for any $s \in S_{+}$ homogeneous. Write
$X = \bigcup_{i = 1, \ldots, n} X_i$ as a finite union of
affine opens. By Lemma \ref{lemma-affine-cap-s-open} each intersection
$X_s \cap X_i$ is affine. Hence $X_s = \bigcup_{i = 1, \ldots, n} X_s \cap X_i$
is quasi-compact. Assume that the image of $f$ is not dense to get
a contradiction. Then, since the opens $D_+(s)$ with $s \in S_+$ homogeneous
form a basis for the topology on $\text{Proj}(S)$, we can find such
an $s$ with $D_+(s) \not = \emptyset$ and $f(X) \cap D_+(s) = \emptyset$.
By Lemma \ref{lemma-map-into-proj}
this means $X_s = \emptyset$. By Lemma \ref{lemma-invert-s-sections}
this means that a power $s^n$ is the zero section of
$\mathcal{L}^{\otimes n\deg(s)}$.
This in turn means that $D_+(s) = \emptyset$ which is the
desired contradiction.
\end{proof}

\begin{lemma}
\label{lemma-ample-immersion-into-proj}
Let $X$ be a scheme. Let $\mathcal{L}$ be an invertible $\mathcal{O}_X$-module.
Set $S = \Gamma_*(X, \mathcal{L})$.
Assume $\mathcal{L}$ is ample. Then the canonical morphism of schemes
$f : X \longrightarrow \text{Proj}(S)$ of Lemma \ref{lemma-map-into-proj}
is an open immersion with dense image.
\end{lemma}

\begin{proof}
By Lemma \ref{lemma-affine-s-opens-cover-quasi-separated} we see
that $X$ is quasi-separated. Choose finitely many
$s_1, \ldots, s_n \in S_{+}$ homogeneous
such that $X_{s_i}$ are affine, and $X = \bigcup X_{s_i}$.
Say $s_i$ has degree $d_i$. The inverse image of
$D_{+}(s_i)$ under $f$ is $X_{s_i}$, see Lemma \ref{lemma-map-into-proj}.
By Lemma \ref{lemma-invert-s-sections} the ring map
$$
(S^{(d_i)})_{(s_i)} = \Gamma(D_{+}(s_i), \mathcal{O}_{\text{Proj}(S)})
\longrightarrow
\Gamma(X_{s_i}, \mathcal{O}_X)
$$
is an isomorphism. Hence $f$ induces an isomorphism
$X_{s_i} \to D_{+}(s_i)$. Thus $f$ is an isomorphism of $X$ onto the open
subscheme $\bigcup_{i = 1, \ldots, n} D_{+}(s_i)$ of $\text{Proj}(S)$.
The image is dense by Lemma \ref{lemma-map-into-proj-quasi-compact}.
\end{proof}

\begin{lemma}
\label{lemma-open-in-proj-ample}
Let $X$ be a scheme.
Let $S$ be a graded ring. Assume $X$ is quasi-compact,
and assume there exists an open immersion
$$
j : X \longrightarrow Y = \text{Proj}(S).
$$
Then $j^*\mathcal{O}_Y(d)$ is an invertible ample sheaf
for some $d > 0$.
\end{lemma}

\begin{proof}
This is Constructions, Lemma \ref{constructions-lemma-ample-on-proj}.
\end{proof}

\begin{proposition}
\label{proposition-characterize-ample}
Let $X$ be a quasi-compact scheme.
Let $\mathcal{L}$ be an invertible sheaf on $X$.
Set $S = \Gamma_*(X, \mathcal{L})$.
The following are equivalent:
\begin{enumerate}
\item
\label{item-ample}
$\mathcal{L}$ is ample,
\item
\label{item-immersion}
the open sets $X_s$, with $s \in S_{+}$ homogeneous,
cover $X$ and the associated morphism $X \to \text{Proj}(S)$
is an open immersion,
\item
\label{item-s-basis}
the open sets $X_s$, with $s \in S_{+}$ homogeneous,
form a basis for the topology of $X$,
\item
\label{item-s-affine-basis}
the open sets $X_s$, with $s \in S_{+}$ homogeneous,
which are affine form a basis for the topology of $X$,
\item
\label{item-qc-gg}
for every quasi-coherent sheaf $\mathcal{F}$ on $X$
the sum of the images of the canonical maps
$$
\Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n})
\otimes_{\mathbf{Z}} \mathcal{L}^{\otimes -n}
\longrightarrow
\mathcal{F}
$$
with $n \geq 1$ equals $\mathcal{F}$,
\item
\label{item-qc-i-gg}
same property as (\ref{item-qc-gg}) with $\mathcal{F}$
ranging over all quasi-coherent sheaves of ideals,
\item
\label{item-c-gg}
$X$ is quasi-separated and
for every quasi-coherent sheaf $\mathcal{F}$ of finite type on $X$
there exists an integer $n_0$ such that
$\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n}$
is globally generated for all $n \geq n_0$,
\item
\label{item-c-q}
$X$ is quasi-separated and
for every quasi-coherent sheaf $\mathcal{F}$ of finite type on $X$
there exist integers $n > 0$, $k \geq 0$ such that
$\mathcal{F}$ is a quotient of a direct sum of $k$ copies of
$\mathcal{L}^{\otimes - n}$, and
\item
\label{item-c-i-q}
same as in (\ref{item-c-q}) with $\mathcal{F}$ ranging over all
sheaves of ideals of finite type on $X$.
\end{enumerate}
\end{proposition}

\begin{proof}
Lemma \ref{lemma-ample-immersion-into-proj} is
(\ref{item-ample}) $\Rightarrow$ (\ref{item-immersion}).
Lemmas \ref{lemma-ample-power-ample} and \ref{lemma-open-in-proj-ample}
provide the implication
(\ref{item-ample}) $\Leftarrow$ (\ref{item-immersion}).
The implications (\ref{item-immersion}) $\Rightarrow$
(\ref{item-s-affine-basis}) $\Rightarrow$ (\ref{item-s-basis})
are clear from Constructions, Section \ref{constructions-section-proj}.
Lemma \ref{lemma-affine-s-opens} is
(\ref{item-s-basis}) $\Rightarrow$ (\ref{item-ample}).
Thus we see that the first 4 conditions are all equivalent.

\medskip\noindent
Assume the equivalent conditions (1) -- (4).
Note that in particular $X$ is separated (as an open
subscheme of the separated scheme $\text{Proj}(S)$).
Let $\mathcal{F}$ be a quasi-coherent sheaf on $X$.
Choose $s \in S_{+}$ homogeneous such that $X_s$ is affine.
We claim that any section $m \in \Gamma(X_s, \mathcal{F})$
is in the image of one of the maps displayed in
(\ref{item-qc-gg}) above. This will imply (\ref{item-qc-gg})
since these affines $X_s$ cover $X$.
Namely, by Lemma \ref{lemma-invert-s-sections} we may write
$m$ as the image of $m' \otimes s^{-n}$ for some
$n \geq 1$, some
$m' \in \Gamma(X, \mathcal{F} \otimes \mathcal{L}^{\otimes n})$.
This proves the claim.

\medskip\noindent
Clearly (\ref{item-qc-gg}) $\Rightarrow$ (\ref{item-qc-i-gg}).
Let us assume (\ref{item-qc-i-gg}) and prove $\mathcal{L}$ is
ample. Pick $x \in X$. Let $U \subset X$ be an affine open
which contains $x$. Set $Z = X \setminus U$. We may think of
$Z$ as a reduced closed subscheme, see
Schemes, Section \ref{schemes-section-reduced}.
Let $\mathcal{I} \subset \mathcal{O}_X$ be the quasi-coherent
sheaf of ideals corresponding to the closed subscheme $Z$.
By assumption (\ref{item-qc-i-gg}), there exists an $n \geq 1$ and a section
$s \in \Gamma(X, \mathcal{I} \otimes \mathcal{L}^{\otimes n})$
such that $s$ does not vanish at $x$ (more precisely such that
$s \not \in \mathfrak m_x \mathcal{I}_x \otimes \mathcal{L}_x^{\otimes n}$).
We may think of $s$ as a section of $\mathcal{L}^{\otimes n}$.
Since it clearly vanishes along $Z$ we see that
$X_s \subset U$. Hence $X_s$ is affine, see
Lemma \ref{lemma-affine-cap-s-open}.
This proves that $\mathcal{L}$ is ample.
At this point we have proved that (1) -- (6) are equivalent.

\medskip\noindent
Assume the equivalent conditions (1) -- (6). In the following
we will use the fact that the tensor product of two sheaves of
modules which are globally generated is globally generated without
further mention (see
Modules, Lemma \ref{modules-lemma-tensor-product-globally-generated}).
By (1) we can find elements $s_i \in S_{d_i}$ with $d_i \geq 1$
such that $X = \bigcup_{i = 1, \ldots, n} X_{s_i}$.
Set $d = d_1\ldots d_n$. It follows that $\mathcal{L}^{\otimes d}$
is globally generated by
$$
s_1^{d/d_1}, \ldots, s_n^{d/d_n}.
$$
This means that if $\mathcal{L}^{\otimes j}$ is globally generated
then so is $\mathcal{L}^{\otimes j + dn}$ for all $n \geq 0$.
Fix a $j \in \{0, \ldots, d - 1\}$. For any point $x \in X$ there
exists an $n \geq 1$ and a global section $s$ of $\mathcal{L}^{j + dn}$
which does not vanish at $x$, as follows from (\ref{item-qc-gg}) applied
to $\mathcal{F} = \mathcal{L}^{\otimes j}$ and ample invertible
sheaf $\mathcal{L}^{\otimes d}$. Since $X$ is quasi-compact there
we may find a finite list of integers $n_i$ and global sections
$s_i$ of $\mathcal{L}^{\otimes j + dn_i}$ which do not vanish at any point
of $X$. Since $\mathcal{L}^{\otimes d}$ is globally generated this means that
$\mathcal{L}^{\otimes j + dn}$ is globally generated where $n = \max\{n_i\}$.
Since we proved this for every congruence class mod $d$ we
conclude that there exists an $n_0 = n_0(\mathcal{L})$ such that
$\mathcal{L}^{\otimes n}$ is globally generated for all $n \geq n_0$.
At this point we see that if $\mathcal{F}$ is globally generated then
so is $\mathcal{F} \otimes \mathcal{L}^{\otimes n}$ for all
$n \geq n_0$.

\medskip\noindent
We continue to assume the equivalent conditions (1) -- (6).
Let $\mathcal{F}$ be a quasi-coherent
sheaf of $\mathcal{O}_X$-modules of finite type.
Denote $\mathcal{F}_n \subset \mathcal{F}$ the image of the canonical
map of (\ref{item-qc-gg}). By construction
$\mathcal{F}_n \otimes \mathcal{L}^{\otimes n}$ is
globally generated. By (\ref{item-qc-gg}) we see
$\mathcal{F}$ is the sum of the subsheaves $\mathcal{F}_n$,
$n \geq 1$. By
Modules, Lemma \ref{modules-lemma-finite-type-quasi-compact-colimit}
we see that $\mathcal{F} = \sum_{n = 1, \ldots, N} \mathcal{F}_n$
for some $N \geq 1$. It follows that
$\mathcal{F} \otimes \mathcal{L}^{\otimes n}$ is globally
generated whenever $n \geq N + n_0(\mathcal{L})$ with $n_0(\mathcal{L})$
as above. We conclude that (1) -- (6) implies (\ref{item-c-gg}).

\medskip\noindent
Assume (\ref{item-c-gg}). Let $\mathcal{F}$ be a quasi-coherent
sheaf of $\mathcal{O}_X$-modules of finite type.
By (\ref{item-c-gg}) there exists an integer $n \geq 1$ such that
the canonical map
$$
\Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n})
\otimes_{\mathbf{Z}} \mathcal{L}^{\otimes -n}
\longrightarrow
\mathcal{F}
$$
is surjective. Let $I$ be the set of finite subsets of
$\Gamma(X, \mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{L}^{\otimes n})$
partially ordered by inclusion. Then $I$ is a directed partially ordered set.
For $i = \{s_1, \ldots, s_{r(i)}\}$ let $\mathcal{F}_i \subset \mathcal{F}$
be the image of the map
$$
\bigoplus\nolimits_{j = 1, \ldots, r(i)} \mathcal{L}^{\otimes -n}
\longrightarrow
\mathcal{F}
$$
which is multiplication by $s_j$ on the $j$th factor. The surjectivity above
implies that $\mathcal{F} = \colim_{i \in I} \mathcal{F}_i$.
Hence Modules, Lemma \ref{modules-lemma-finite-type-quasi-compact-colimit}
applies and we conclude that
$\mathcal{F} = \mathcal{F}_i$ for some $i$.
Hence we have proved (\ref{item-c-q}). In other words,
(\ref{item-c-gg}) $\Rightarrow$ (\ref{item-c-q}).

\medskip\noindent
The implication (\ref{item-c-q}) $\Rightarrow$ (\ref{item-c-i-q}) is trivial.

\medskip\noindent
Finally, assume (\ref{item-c-i-q}).
Let $\mathcal{I} \subset \mathcal{O}_X$ be a quasi-coherent sheaf
of ideals. By Lemma \ref{lemma-quasi-coherent-colimit-finite-type}
(this is where we use the condition that $X$ be quasi-separated)
we see that $\mathcal{I} = \colim_\alpha I_\alpha$ with
each $I_\alpha$ quasi-coherent of finite type. Since by assumption each of
the $I_\alpha$ is a quotient of negative tensor powers of
$\mathcal{L}$ we conclude the same for $\mathcal{I}$ (but of course
without the finiteness or boundedness of the powers). Hence
we conclude that (\ref{item-c-i-q}) implies (\ref{item-qc-i-gg}).
This ends the proof of the proposition.
\end{proof}



\section{Dominant morphisms}
\label{section-dominant}

\noindent
The definition of a morphism of schemes being dominant is a little
different from what you might expect if you are used to the notion
of a dominant morphism of varieties.

\begin{definition}
\label{definition-dominant}
A morphism $f : X \to S$ of schemes is called {\it dominant} if the
image of $f$ is a dense subset of $S$.
\end{definition}

\section{Morphisms of finite type}
\label{section-finite-type}

\noindent
Recall that a ring map $R \to A$ is said to be of finite type if
$A$ is isomorphic to a quotient of $R[x_1, \ldots, x_n]$ as an $R$-algebra, see
Algebra, Definition \ref{algebra-definition-finite-type}.

\begin{definition}
\label{definition-finite-type}
Let $f : X \to S$ be a morphism of schemes.
\begin{enumerate}
\item We say that $f$ is of {\it finite type at $x \in X$} if
there exists an affine open neighbourhood $\Spec(A) = U \subset X$
of $x$ and an affine open $\Spec(R) = V \subset S$
with $f(U) \subset V$ such that the induced ring map
$R \to A$ is of finite type.
\item We say that $f$ is {\it locally of finite type} if it is
of finite type at every point of $X$.
\item We say that $f$ is of {\it finite type} if it is locally of
finite type and quasi-compact.
\end{enumerate}
\end{definition}

\section{Normalization}
\label{section-normalization}

\begin{definition}
\label{definition-normalization-X-in-Y}
Let $f : Y \to X$ be a quasi-compact and quasi-separated morphism of schemes.
Let $\mathcal{O}'$ be the integral closure of $\mathcal{O}_X$ in
$f_*\mathcal{O}_Y$. The {\it normalization of $X$ in $Y$} is the
scheme\footnote{The scheme $X'$ need not be normal, for example if
$Y = X$ and $f = \text{id}_X$, then $X' = X$.}
$$
\nu : X' = \underline{\Spec}_X(\mathcal{O}') \to X
$$
over $X$. It comes equipped with a natural factorization
$$
Y \xrightarrow{f'} X' \xrightarrow{\nu} X
$$
of the initial morphism $f$.
\end{definition}

\noindent
The factorization is the composition of the canonical morphism
$Y \to \underline{\Spec}_X(f_*\mathcal{O}_Y)$ (see
Constructions, Lemma
\ref{constructions-lemma-canonical-morphism})
and the morphism of relative spectra coming from the inclusion map
$\mathcal{O}' \to f_*\mathcal{O}_Y$. We can characterize the
normalization as follows.

\begin{lemma}
\label{lemma-characterize-normalization}
Let $f : Y \to X$ be a quasi-compact and quasi-separated morphism of schemes.
The factorization $f = \nu \circ f'$, where $\nu : X' \to X$ is the
normalization of $X$ in $Y$ is characterized by the following
two properties:
\begin{enumerate}
\item the morphism $\nu$ is integral, and
\item for any factorization $f = \pi \circ g$, with $\pi : Z \to X$
integral, there exists a commutative diagram
$$
\xymatrix{
Y \ar[d]_{f'} \ar[r]_g & Z \ar[d]^\pi \\
X' \ar[ru]^h \ar[r]^\nu & X
}
$$
for some unique morphism $h : X' \to Z$.
\end{enumerate}
Moreover, the morphism $f' : Y \to X'$ is dominant and in (2) the
morphism $h : X' \to Z$ is the normalization of $Z$ in $Y$.
\end{lemma}



\section{Reflexive sheaves}
\label{section-reflexive-sheaves}

\begin{slogan}
These are vector bundles except for a small locus.
\end{slogan}

\begin{definition}
\label{definition-reflexive}
Let $X$ be an integral locally Noetherian scheme. Let $\mathcal{F}$
be a coherent $\mathcal{O}_X$-module. The {\it reflexive hull}
of $\mathcal{F}$ is the $\mathcal{O}_X$-module
$$
\mathcal{F}^{**} = \SheafHom_{\mathcal{O}_X}(
\SheafHom_{\mathcal{O}_X}(\mathcal{F}, \mathcal{O}_X), \mathcal{O}_X)
$$
We say $\mathcal{F}$ is {\it reflexive} if the natural map
$j : \mathcal{F} \longrightarrow \mathcal{F}^{**}$
is an isomorphism.
\end{definition}

\begin{lemma}
\label{lemma-reflexive-torsion-free}
Let $X$ be an integral locally Noetherian scheme. Let $\mathcal{F}$
be a coherent $\mathcal{O}_X$-module.
\begin{enumerate}
\item If $\mathcal{F}$ is reflexive, then $\mathcal{F}$ is torsion free.
\item The map $j : \mathcal{F} \longrightarrow \mathcal{F}^{**}$
is injective if and only if $\mathcal{F}$ is torsion free.
\end{enumerate}
\end{lemma}

\begin{remark}[Talk at IMPA, 11 June]\leavevmode
\label{remark-reflexive-talk}
Torsion could also be defined so that the sheaf can inject onto its dual. In
this talk we discussed the moduli space of reflexive/torsion-free sheaves, which
turned out to be parametrized by $c_1, c_2$ and $c_3$. This was denoted by 
$R(c_1,c_2,c_3)$. Actually I think it may have been Manolache that proved the
existence of this moduli space.


Alan Muniz

Nesta palestra discutiremos a classificação de feixes reflexivos de posto dois e
seus espaços de módulos. Apresentaremos algumas ferramentas básicas usadas na
construção e determinação de tais feixes. Aplicaremos estas técnicas para o caso
de feixes com segunda classe de Chern igual a quatro, obtido recentemente em
colaboração com Marcos Jardim.
\end{remark}

\subsection{Distributions on manifolds}
\label{subsection-distributions-on-manifolds}

Here's the abstract from a talk by Marcos Jardim at Geometric Structures:

``I will revise the work done over the past 10 years with various collaborators
on distributions and foliations on 3-folds, especially on the projective space,
with a focus on properties of the tangent sheaf and singular scheme."

Here are two key ideas: if the distribution is codimension 1 we can write:
$$
\xymatrix{
0\ar[r]&F\ar[r]&TX\ar[r]^{\omega}&I_Z \otimes L\ar[r]&0
}
$$
where $L$ is a line bundle and $\omega \in H^{0}(\Omega_X \otimes L)$, and
$Z=\{p:\omega(p)=0\}$.

When codimension is 2 then $\mathcal{D}$ is given by a holomorphic vector field 
$\nu$: $T_p=\left<\nu(p)\right>$.

It can be encoded as an exact sequence
$$
\xymatrix{
	0\ar[r]&L\ar[r]^{\nu}&TX\ar[r]&N\ar[r]&0
}
$$
where $L$ is a line bundle and $\nu \in H^{0}(TX \otimes L^\vee)$;
  $Z=\{p | \nu(p) = 0\}$.

\begin{remark}
\label{remark-stauration}
Saturation means that $Z \subset X$ is a union of curves and points.
\end{remark}

And again, distributions are parametrized by Chern classes.

Two interesting open questions:
\begin{enumerate}
\item {\bf Conjeture.} if $\mathcal{D}$ is a codimension 1 foliation of degree
$d$ on $\mathbb{P}^3$, then $c_2(F)\leq d^2-d+1$ and bound is attained
by rational foliations of type $(1,d+1)$. (True for $d \leq 2$.)
\item {\bf Conjecture (with Pepe Seade).} $\mathcal{D}$ is a codimension 1 
foliation on a smooth projective 3-fold, then $\text{Sing}\mathcal{D}$ is connected.
\end{enumerate}

\begin{theorem}[Jardim-Muniz]
\label{theorem-jardim-muniz}
Conditions on Chern classes used to understand moduli space $R(c_1,c_2,c_3)$.
$c_2=4$ gives (?). For $c_3\leq 6$, possible ``spectrum" exists…
\end{theorem}

\section{Stability}
\label{section-stability}

{\bf Question.} What is stability?

\begin{enumerate}
\item Stable objects in an abelian category are the ``building blocks":
we can reconstruct the whole category from them.
\item  An abelian subcategory (hart) $\subset$ a triangulated
\item stability defined via stability function on $\mathcal{A}$.
\item Q. Can we reconstruct $\mathcal{T}$ from the semistable elements of
$\mathcal{A}$
\item {\bf Example.} $\mathcal{A}=\text{Coh}X$ is heart of $D^b(X)$
w/ funny function.
\item Stability condition is hart + stability function.
\item Bridgeland Stabl:= the stability conditions are a complex manifold
of complex codimension $\text{rk}\Lambda$:
$$
 \mathcal{Z}:\text{Stab}(\mathcal{T})
\longrightarrow \text{Hom}(\Lambda,\mathbb{C})
$$
\item There's a chamber structure; moduli space changes across chambers.
\item I think we typically think of vectors in $\text{Hom}(\Lambda,\mathbb{C})$ 
as Chern classes, to characterize the moduli spaces.
\item Existence: given a projective variety $X$, are there stability
conditions on $D^\text{b}(X)$? Yes for fano 3fold pic rk 1.
\item Moduli spaces: is $M_\sigma(v)$ a projective scheme? Cannot use
usual git techniques to study. A stack!
\item Picture: blue + black are walls. Q. What are $\beta$ and $\alpha$?
\item thm: bridgeland stable = gieseker stable ?
\item Q. slope stability = bridgeland stability? A. Not always.
\item DT/PT correspondance: only one wall between PT and G chambers
\medskip
\item Polynomial stability function. This is an asymptotic version of BS.
\item There are some $\rho$'s. Arrangements of $\rho_i$ are polynomial 
stability conditions on a threefold.
\item Pata-Thomas introduced stability for rank 1 objects.
Bayer compares the---wall. Q. Same for Bridge S---only one wall?
\item Recall Gieseker stability.
\medskip
\item Def. A {\it stable triple}: when
$\text{gcd}(\text{ch}_0,\text{ch}_2,\text{ch}_3)=1$, every PT stable object
comes from three conditions (missing).
\item What happens when you cross the blue wall? 
Both $\mathcal{G}$ and $\mathcal{T}$ are projective. What happens at the blue
wall?
\medskip
\item For $X$ smooth threefold with $\text{rk}\text{Pic}=1$, $\mathcal{G}(v)$,
$v=(r,0,0,-n)$, $\mathcal{G}(v)$ is a known sheaf object and
$\mathcal{T}=\emptyset$.
\item $X$ sm 3 rkpic1, Fake wall; $\mathcal{G}=\mathcal{T}$.
\item (Extra.) red circle is a wall for a weaker form of stability.
\end{enumerate}
\begin{definition}[Talk at impa]
\label{definition-slope-stability}
A rank-2 sheaf $\mathcal{F}$ is {\it semistable (stable)}if
$H^{0}(\mathcal{F}(t))=0$ for $-t \geq(>) \frac{c_1F}{2}$
\end{definition}

Compare with

\begin{definition}[moduli-curves.tex]
\label{definition-semistable}
Let $f : X \to S$ be a family of curves.
We say $f$ is a {\it semistable family of curves} if
\begin{enumerate}
\item $X \to S$ is a prestable family of curves, and
\item $X_s$ has genus $\geq 1$ and
does not have a rational tail for all $s \in S$.
\end{enumerate}
\end{definition}

\section{Coherent sheaves}
\label{section-coherent-sheaves}

\begin{lemma}
\label{lemma-quasi-coherent-affine-cohomology-zero}
\begin{slogan}
Serre vanishing: Higher cohomology vanishes on affine schemes
for quasi-coherent modules.
\end{slogan}
Let $X$ be a scheme.
Let $\mathcal{F}$ be a quasi-coherent $\mathcal{O}_X$-module.
For any affine open $U \subset X$ we have
$H^p(U, \mathcal{F}) = 0$ for all $p > 0$.
\end{lemma}

\begin{proof}
We are going to apply
Cohomology, Lemma \ref{cohomology-lemma-cech-vanish-basis}.
As our basis $\mathcal{B}$ for the topology of $X$ we are going to use
the affine opens of $X$.
As our set $\text{Cov}$ of open coverings we are going to use the standard
open coverings of affine opens of $X$.
Next we check that conditions (1), (2) and (3) of
Cohomology, Lemma \ref{cohomology-lemma-cech-vanish-basis}
hold. Note that the intersection of standard opens in an affine is
another standard open. Hence property (1) holds.
The coverings form a cofinal system of open coverings of any element
of $\mathcal{B}$, see
Schemes, Lemma \ref{schemes-lemma-standard-open}.
Hence (2) holds.
Finally, condition (3) of the lemma follows from
Lemma \ref{lemma-cech-cohomology-quasi-coherent-trivial}.
\end{proof}

\section{Fano varieties}
\label{section-Fano-varieties}

\begin{definition}
\label{definition-Fano-variety}
A {\it Fano variety} is a projective variety with $-K_X$ ample.
\end{definition}

\begin{definition}
\label{definition-Fano-index}
$$
r(X):=\text{min}\{r:\frac{c_1(X)}{r}\in H^{2}(X,\mathbb{Z})\}
$$
\end{definition}

\begin{exercise}
\label{exercise-Fano-vanishing-higher-cohomology}
By Kodaira vanishing theorem \ref{theorem-Kodaira-vanishing}, 
you can show that the cohomology $H^{i}(X,L)$ for
a Fano variety $X$ vanishes. You just have to put $L=\mathcal{O}(k)$ with $k\geq
-r$, where $r$ is the Fano index.
\end{exercise}

\begin{exercise}
\label{exercise-Pic-H2-Fano}
Show that  $\text{Pic}(X)\cong H^{2}(X,\mathbb{Z})$ holds for Fano varieties.
\end{exercise}


\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
