\input{preamble}

\begin{document}

\title{Infty-categories}
\maketitle

\phantomsection
\label{section-phantom}
\hfill
\href{http://github.com/danimalabares/infty-categories}
{github.com/danimalabares/infty-categories}

\tableofcontents

\section{Discrete fibrations}
\label{section-discrete-fibrations}

\begin{definition}
\label{definition-discrete-fibration}
\begin{reference}
\url{https://ncatlab.org/nlab/show/discrete+fibration} 
\end{reference}
A functor $F:C \to B$ is a {\it discrete fibration} if for every object
$c$ in $C$ and every morphism of the form $g: b \to F(c)$ in $B$ 
there is a unique morphism $h:d \to c$ in $C$ 
such that $F(h)=g$.
\end{definition}

\begin{exercise}
\label{exercise-discrete-fibrations-over-category-are-presheaves}
Prove that discrete fibrations over a category $C$ correspond to presheaves over
$C$.
\end{exercise}

\begin{proof}
First suppose that we are given a presheaf $X$ on $C$. Define a discrete
fibration $F:C/X \to C$ by $(a,s)\mapsto a$ on objects and
mapping a morphism $f:(a,s)\to (b,t)$ in $C/X$ to the
corresponding morphism $a \to b$ in $C$.
To show $F$ is a discrete fibration 
let $g:b\to a$ be a morphism in $C$. 
Consider $g^*=X(g):X_a\to X_b$,
and the section $g^*s$ of $X_b$.
Then the
morphism $h:(b,g^*s)\to (a,s)$ is the only one mapping to $g$ under $h$.

For the converse let $F:B \to C$ be a discrete fibration over $C$.
To define a presheaf $X:C^{\text{op}}\to \text{Sets}$ let $c \in \Ob C$.
We assign the set (for now I won't justify why this is a set)
of objects in $B$ mapped to $c$ under $F$.
To define the correspondence on morphisms, 
consider a map $f:c \to d$ in $C^{\text{op}}$.
In other words, we have a map in  $C$ of the form $f^{\text{op}}:d \to c$.
Then to any object in $b$ such that $F(b)=c$,
by definition of discrete fibration,
we have a unique morphism of $B$ of the form
$h:r \to b$ such that $F(h)=f^{\text{op}}$.
In particular this means that $F(r)=d$.
This gives a function from $X(c)$ to $X(d)$.
This situation is described in the following diagram:

$$
\xymatrix{
X(d)\ni&r \ar@{.>}[d]_{\exists!h}\ar@{|->}[r]& d=F(r)
\ar[d]^{f^{\text{op}}=F(h)}\\
X(c)\ni& b\ar@{|->}[r]_F&c=F(b)
}
$$




To check functoriality of $X$ defined in the previous paragraph
suppose that $f:c\to d$ and $g:d\to e$ are two morphisms in $C^{\text{op}}$.
Like before, we have maps $f^{\text{op}}:d\to c$ and $g^{\text{op}}:e \to d$.
$$
\xymatrix{
X(e)\ni& q\ar@{.>}[d]_{\exists !j}\ar@{|->}[r]& e=F(q)
\ar[d]^{g^{\text{op}}=F(j)}\\
X(d)\ni&r \ar@{.>}[d]_{\exists!h}\ar@{|->}[r]& d=F(r)
\ar[d]^{f^{\text{op}}=F(h)}\\
X(c)\ni& b\ar@{|->}[r]_F&c=F(b)
}
$$
on the other hand, $gf:c \to e$ gives by the
same construction a unique map $k:\hat{q}  \to b$
such that $F(k)=f^{\text{op}}g^{\text{op}}$.
To check that $\hat{q}=q$, observe that
by functoriality of $F$, we have
$F(hj)=F(h)F(j)=f^{\text{op}}g^{\text{op}}=F(k)$.
By uniqueness of $k$, we conclude that
$k=hj$ and thus $q=\hat{q}$.
\end{proof}

\section{Simplicial sets}
\label{section-simplicial-sets}

\begin{definition}
\label{definition-simplex}
The {\it simplex category} is the category of ordinals, i.e.
non-empty finite ordered sets
$$
[n]=\{0<1<\ldots<n\}, \quad n=0,1,\ldots
$$
with order preserving maps of sets.
\end{definition}

Objects of the simplicial category $\Delta$ are not called simplices.
Instead, simplices are type of simplicial set:

\begin{definition}
\label{definition-simplicial-set}
A {\it simplicial set} is a presheaf on $\Delta$, i.e.
an element of $\mathsf{Fun}(\Delta^{\text{op}},\text{Sets})$.
\end{definition}

\begin{definition}
\label{definition-simplex}
The {\it $n$-simplex} is the 
representable simplicial set $\Hom(-,[n]):=\Delta^n$.
\end{definition}

So far the upshot for me is that simplicial sets
are like a generalization of a triangulated
topological space. The following construction
shows how to associate to $S \in \mathsf{sSet}$
a topological space $|S|\in \mathsf{Top}$.
In fact, the weak equivalences in $\mathsf{sSet}$ 
can be defined using weak equivalences
in $\mathsf{Top}$ just like in Hatcher.

\medskip\noindent
Here's some copy-paste from \cite[Chapter 1]{rune}
transcribed by ChatGPT:

The category $\Delta$ is generated by
\begin{itemize}
\item the \emph{face maps} $d_i : [n-1] \hookrightarrow [n]$ that skip $i \in [n]$,
\item the \emph{degeneracy maps} $s_i : [n+1] \xrightarrow{\text{surj.}} [n]$ 
that repeat $i \in [n]$,
\end{itemize}
subject to certain relations.

\begin{definition}
\label{definition-topological-n-simplex}
\begin{reference}
\cite[Definition 1.4.2]{rune}
\end{reference}
The {\it topological $n$-simplex} $|\Delta^n|$ is the topological space
\[
|\Delta^n| := \{(x_0,\ldots,x_n) \in \mathbb{R}^{n+1} : \sum x_i = 1,\; 0 \leq x_i \leq 1\}
\]
(with the subspace topology from $\mathbb{R}^{n+1}$).
For $\varphi:[n]\to[m]$ we can define a continuous map 
$\varphi_* : |\Delta^n| \to |\Delta^m|$ by
$$
\varphi_*(x_0,\ldots,x_n)_i = \sum_{j:\varphi(j)=i} x_j.
$$
This gives a functor $|\Delta^\bullet| : \Delta \to \mathsf{Top}$.
\end{definition}

We can then define the \emph{singular simplicial set functor}
\[
\mathrm{Sing}: \mathbf{Top} \to \mathbf{Set}_\Delta
\]
as
\[
\mathrm{Sing}(X) = \mathrm{Hom}_{\mathbf{Top}}(|\Delta^\bullet|, X).
\]

This has a left adjoint $|-|: \mathbf{Set}_\Delta \to \mathbf{Top}$, called the 
\emph{geometric realization functor}, which is the unique colimit-preserving functor 
that extends $|\Delta^\bullet|$ via the Yoneda embedding. More concretely, 
we can define $|S|$ for a simplicial set $S$ as the quotient of 
$\coprod_n S_n \times |\Delta^n|$ where we identify $(\sigma,\varphi_*p)$ with 
$(\varphi^*\sigma,p)$ for $\varphi:[n]\to[m]$, $\sigma \in S_n$ and $p \in |\Delta^m|$. 
Informally, we build the topological space $|S|$ out of simplices according to 
the ``blueprint'' $S$.

If we say that a morphism $S \to T$ in $\mathbf{Set}_\Delta$ is a weak equivalence if 
$|S| \to |T|$ is a weak homotopy equivalence, then the relative category consisting 
of $\mathbf{Set}_\Delta$ with these weak equivalences describes the same homotopy 
theory as that of topological spaces; for example, the counit map $|\mathrm{Sing}\,X| \to X$ 
for a topological space $X$ is always a weak homotopy equivalence. 
We can also describe the weak equivalences of simplicial sets as homotopy equivalences 
(or describe them via homotopy groups) if we restrict to a class of nice objects, 
which we will introduce next.

\begin{exercise}
\label{exercise-simplicial-n-simplex-is-topological-n-simplex}
It should be possible to show that
the geometric realization of $\Delta^n$ is in fact
the topological $n$-simplex in $\mathbb{R}^n$, right?
\end{exercise}

\noindent
I wonder what is the relationship between
$\mathsf{sSet}$ and $\mathsf{Top}$.
How much information do simplicial sets give
us about topological spaces?
Most likely we will be able to see any tringulated
space, say, a CW complex as a simplicial set.
And also most likely, there are pathological
topological spaces that cannot be retrieved by 
the geometric realization functor.
But probably we just don't care, and forget $\mathsf{Top}$ 
(again).

\medskip\noindent
Now I put some exercises.

\begin{exercise}[Observation 1.4.7]
\label{exercise-simplicial-sets-category-has-internal-Hom}
Show that the simplicial sets category  $\mathsf{Set}_\Delta$ has internal 
Hom $S^T$ for simplicial sets $S$ and $T$, given by
$$
(S^T)_n:=\Hom_{\mathsf{Set}_\Delta}(T\times\Delta^n,S)
$$
\end{exercise}

\begin{proof}
We need to show, that $S^T$ is the internal Hom in the category
$\mathsf{Set}_\Delta$. Different notations for the internal Hom
are $\text{Map}(-,-)$, $\underline{\Hom}(-,-)$.
It must be right adjoint to 
the functor $U \times -$.
That is,
$$
\Hom_{\text{Set}_\Delta}(U \times S,T)\cong\Hom_{\mathsf{Set}_\Delta}(U,S^T)
$$
(I think) I understand the statement correctly
but I don't understand how to apply
\cite[Theorem 1.1.10 (Kan)]{Cisinsky} nor \cite[Remark 1.1.11]{Cisinsky}
to prove it.


\end{proof}

\begin{exercise}[1.1]
\label{exercise-relation-is-equivalence-relation}
If $S$ is a Kan complex, then the relation defining
$\pi_0S$ is an equivalence relation.
\end{exercise}

\begin{proof}
\begin{enumerate}
\item (Reflexivity.) Let $a \in S_0$. Consider the composition
$$
\xymatrixrowsep{0.5em}\xymatrix{
[0]\ar[r]^{d_0}& [1]\ar[r]^{f_0}& [0]\\
0\ar@{|->}[r]& 1\ar@{|->}[r]&0
}
$$
since this gives the identity we must have
$$
\xymatrixrowsep{0.5em}
\xymatrix{
S_0\ar[r]^{S(f_0)}& S_1\ar[r]^{S(d_0)}& [0]\\
a\ar@{|->}[r]& S(f_0)(a)\ar@{|->}[r]&a
}
$$
but we can replace $d_0$ by $d_1$ and we'd still get the identity,
so that $S(d_1)$ also maps $S(f_0)(a)$ to $a$. In other words, 
for any  $a \in S_0$ the 1-simplex $S(f_0)(a)$ is the desired one.
\item (Symmetry.) Let $a,b \in S_0$…
\end{enumerate}
\end{proof}

Rather informally, I understand a category $C$ to be
an {\it enriched category over $D$} if for any objects
$c,d$ in $C$, $\Hom(c,d)$ is an object of $D$.
Compositions of morphisms exist and are associative,
and there is an identity morphism for every object $c$ in $C$.
(See \url{https://ncatlab.org/nlab/show/enriched+category} 
for a formal definition.)

\begin{exercise}[1.2]
\label{exercise-enriched-simplicial-set-categories-are-subcategory-of-Fun}
Show that $\mathsf{Cat}_\Delta$ can be described as the full
subcategory of $\text{Fun}(\Delta^{\text{op}},\mathsf{Cat})$
containing the functors whose simplicial sets of objects
are constant.
\end{exercise}

\begin{remark}
\label{remark-induced-functor-on-objects}
The phrase ``simplicial sets of objects are constants''
means the following. Consider the functor
$\mathsf{Cat} \to \mathsf{Set}$ that maps a category to its set
of objects (I suppose we may take $\mathsf{Set}$ to be a universe),
which induces for every functor in
$\mathsf{Fun}(\Delta^{\text{op}},\mathsf{Cat})$ 
a functor in $\mathsf{Fun}(\Delta^{\text{op}},\mathsf{Set})$.
We mean to say the latter map is constant.
\end{remark}

\begin{proof}
We need to construct a fully faithful functor
$$
F:\mathsf{Cat}_\Delta \to \mathsf{Fun}(\Delta^{\text{op}},\mathsf{Cat})
$$
whose image is the subcategory of functors 
whose simplicial sets of objects are constant.

To a $\mathsf{Set}_\Delta$-enriched category $C$ 
associate the functor $F(C)$ which maps $[n]$ 
to the category $C_n$, which is defined as follows.
The objects of $C_n$ are the objects of $C$ for all $n$.
(Notice that once we define the functor completely,
this property will make it indeed a functor whose simplicial
sets of objects are constant.) 
For $a,b$ in $C$, the morphisms of $C_n$ 
are $\Hom(a,b)_n$. To a map $f:[n] \to [m]$ in $\Delta^{\text{op}}$,
define $F(C)$ to give the functor of $C_m$ to $C_n$ that fixes
all objects and maps a map in $\Hom(a,b)_m$ 
to the induced map $\Hom(a,b)_n$ by the presheaf
$\Hom(a,b)$.

Now let's define how $F$ acts on morphisms. 
(This definition is just what it should be, but let's go over it.)
Choose two
$\mathsf{Set}_\Delta$-enriched categories $C,D$ 
and consider their corresponding functors $F(C),F(D)$.
Fix a morphism $\varphi \in \Hom_{\mathsf{Cat}_\Delta}(C,D)$.
Define a morphism (of presheaves of categories) 
$F(\varphi):F(C) \to F(D)$
defined as a collection of maps $F(C)_n \to F(D)_n$
given on objects by $\varphi$ and on morphisms
also given by $\varphi$, using that $\varphi$ is a morphism
of $\mathsf{Cat}_\Delta$ to ensure naturality.

Functoriality of $F$ follows from functoriality of each $\varphi$ as in the
previous paragraph.

Now let's confirm that $F$ is faithful, that is, it induces injections
on the Hom sets. Suppose $\varphi,\psi \in \Hom_{\mathsf{Cat}_\Delta}(C,D)$ 
are such that $F(\varphi)=F(\psi)$. By definition of $F(\varphi)$ and
 $F(\psi)$, it is immediate that $\varphi$ and $\psi$ coincide on objects.
In fact, it is also immediate that they coincide on morphism and as
simplicial sets by definition.

To prove $F$ is fully faithful we only need to check surjectivity of
the induced maps in Hom sets. Pick a morphism of presheaves
of categories, denote it
$F(\varphi)$, between two presheaves of categories $F(C)$ and  $F(D)$,
both of whose simplicial sets of objects are constant, namely
two sets $C$ and $D$.
Then we can define two $\mathsf{Set}_\Delta$-enriched categories,
which we also denote by $C$ and $D$,
by defining their objects to be the sets $C$ and $D$, and their morphisms to be
the collections of all the induced morphisms by $F(C)$ and $F(D)$ coming from
morphisms of $\Delta^{\text{op}}$.
Then it is immediate that the set $\Hom(C,D)$ is indeed a simplicial set.
Thus $C,D \in \mathsf{Cat}_{\mathsf{Set}_\Delta}$. Further, we
can define a morphism $\varphi \in \Hom_{\mathsf{Cat}_\Delta}(C,D)$ 
which maps on objects as any of the induced maps by the morphism of presheaves
of categories we started with (since both of the simplicial sets of objects
of the corresponding categories are constant!)
and on morphisms as well (any morphism of $C$ was defined as the
induced map by $F(C)$ coming from a map of $\Delta^{\text{op}}$).
It is clear that this morphism is mapped to $F(\varphi)$ under $F$.
\end{proof}

\begin{exercise}[1.3]
\label{exercise-N-is-fully-faithful}
Show that $N:\mathsf{Cat}\to\mathsf{Set}_\Delta$ is fully faithful.
\end{exercise}

\begin{proof}
We need to show that for any categories $A,B$,
$\Hom(A,B)=\text{Fun}(A,B)$ is in ``bijection'' with
$\Hom_{\mathsf{Set}_\Delta}(NA,NB)$.
Recall that
$NA$ is the presheaf that maps $[n]$ to
the set of composible sequence of $n$ morphisms in $A$.
Then to a functor $F:A \to B$ we associate the
map that sends a sequence of $n$ morphisms in $A$ 
to the respective sequence of $n$ morphisms in $B$ 
after applying $F$ to each object and map.

Conversely, given a morphism in $\mathsf{Set}_\Delta$
from $NA$ to $NB$
we can reconstruct a functor from $A$ to $B$
 by interpreting objects of $A$ as $NA_0$ and 
maps as $NA_1$.
\end{proof}

\section{$\infty$-groupoids}
\label{section-infty-groupoids}

Apparently the philosophy is that
we will not formally construct $\infty$-categories
(nor $\infty$-groupoids) but
barely start using them.
So we admit ``facts'' such as
``there are objects called {\it$\infty$-groupoids}''.
We shall admit that although there are points (and paths),
we cannot distinguish between points if there is
a path joining two points. Thus we don't really have points
but a set $\pi_0X$ of path components.

There are also homotopies between
paths, and homotopies between homotopies, and so on.

Also, there are {\it maps} or {\it morphisms} between groupoids,
homotopies between morphisms, homotopies between homotopies,
and so on. In fact, all those things form an $\infty$-groupoid
we denote by $\mathsf{Map}(X,Y)$.

We can {\it compose} maps, and there is
an {\it identity morphism} for every $\infty$-groupoid $X$.
Composition is unital and associative in the only
way that makes sense (?), which is up to homotopy.

\begin{definition}
\label{definition-equivalence}
An {\it equivalence} of groupoids is a pair of maps
that may be composed not be the identities,
but homotopical to the identities.
\end{definition}

Dani: it looks like the main idea
is to care about anything only up to homotopy.

\medskip\noindent
Sets are groupoids and for any set
$$
\Hom_{\mathsf{Set}}(\pi_0X,S)\xrightarrow{\simeq }\mathsf{Map}(X,S)
$$
is an equivalence.

Then the 1-point set ends up being
the terminal $\infty$-groupoid. The empty set
is also an $\infty$-groupoid, and it is
the initial one.

\medskip\noindent
Given morphisms $X \to Z$ and $Y \to Z$,
there exists a pullback square
$$
\xymatrix{
X\times_Z Y\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&X\ar[d]\\
Y\ar[r]&Z
}
$$
where ``square'' means not that it is commutative,
but that there exists an homotopy between
the compositions (commutative up to homotopy).
Looks like it basically a fibre product
(see Definition \ref{definition-fibre-product})
up to homotopy.

The {\it fibre} $f^{-1}(b)$ at $b$ of a map
$f:E\to B$ is defined as the pullback
$$
\xymatrix{
f^{-1}(b)\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&E\ar[d]\\
\{b\}\ar[r]&B.
}
$$

The {\it product} $X\times Y$ of two $\infty$-groupoids
$X$ and  $Y$ is defined as the pullback
$$
\xymatrix{
X\times Y\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&X\ar[d]\\
Y\ar[r]& \ *.
}
$$

\medskip\noindent
Composition of squares is another square,
and the composition of two pullback squares
is another pullback square.

\begin{definition}
\label{definition-path-space}
For points $x,y \in X$, the {\it path space} $X(x,y)$ 
is the pullback
$$
\xymatrix{
X(x,y)\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&\{x\}\ar[d]\\
\{y\}\ar[r]&X.
}
$$
\end{definition}

\begin{exercise}[2.1.1]
\label{exercise-2.1.1}
Assuming that pushouts exist and have the expected
universal property,
show that $\Omega^n_xX \simeq \mathsf{Map}_*(S^n,X)$,
where the $n$-th sphere is the pushout
$$
S^n:=* \amalg_{S^{n-1}}*,
$$
and the space of pointed maps is the pullback
$$
\xymatrix{
\mathsf{Map}_*(S^n,X)\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}
&\mathsf{Map}(S^n,X)\ar[d]\\
\{x\}\ar[r]&\mathsf{Map}(*,X).
}
$$
\end{exercise}

\begin{proof}
Since both
$\Omega^1_xX$ and $\mathsf{Map}_*(S^1,X)$
are pullbacks (and pullbacks
are unique up to homotopy),
it's enough to show that they are
the pullback of the same diagram
(up to homotopy).

First notice that $\mathsf{Map}(*,X)\simeq X$ 
in an obvious way:
we identify a map $* \to X$ 
with the image of $*$.
To identify $\mathsf{Map}(S^n,X)$ 
with $\{x\} \simeq \mathsf{Map}(*,X)$
pick a map $* \to X$.
Now consider the universal 
property of pushouts:
$$
\xymatrix{
S^{n-1} \ar[r] \ar[d] & \ * \ar[d] \ar[rrdd] & & \\
\ * \ar[r] \ar[rrrd] & \ S^n=* \amalg_{S^{n-1}} \, * \ar@{-->}[rrd]^{\exists !}& & \\
& & & X
}
$$
\end{proof}

\begin{definition}
\label{definition-homotopy-groups}
The {\it $n$-th homotopy group} of a groupoid is
$\pi_0\Omega^n_x$.
\end{definition}

\noindent
$\pi_1(X,x)$ is a group, and $\pi_n(X,x)$ is
an abelian group for $n>1$.

Homotopy group detect equivalences:
a map between groupoids is an equivalence
if and only if all homotopy groups
are isomorphic (as groups for $n>1$ or
as sets for $n=0$).

\begin{lemma}
\label{lemma-equivalences-satisfy-2-for-3}
Equivalences of $\infty$-groupoids
satisfy the 3-for-2 property:
if  $f$ and $g$ are composable and two
out of $f,g,f \circ g$ are equivalences,
so is the third.
\end{lemma}

\begin{lemma}
\label{lemma-equivalence-iff-equivalence-on-path-spaces}
A morphism $f:X\to Y$ is an equivalence if and only if
$\pi_0 X \to \pi_0Y$ is surjective
and $X(x,x') \to Y(fx,fx')$ is an equivalence
for all $x,x' \in X$.
\end{lemma}

\begin{lemma}
\label{lemma-equivalence-iff-path-spaces-are-contractible}
For an  $\infty$-groupoid $X$,
the map $X \to \pi_0X$ is an equivalence if and only if
$X(x,x')$ is either empty of contractible for all $x,x' \in X$.
\end{lemma}

\begin{lemma}
\label{lemma-groupoid-is-contractible-iff-path-spaces-are-contractible}
A groupoid $X$ is contracible iff $X(x,x')$ is either empty or
contractible for all $x,x' \in X$.
\end{lemma}

\medskip\noindent
We also state as a fact that
for a map $f:E \to B$, a point $b \in B$ and a point $e \in f^{-1}(b)$,
there is a long exact sequence of homotopy groups
$$
\xymatrix{
\cdots\ar[r]&\pi_n(f^{-1}(b),e)\ar[r]&
\pi_n(E,e)\ar[r]&\pi_n(B,b)\ar[r]&
\pi_{n-1}(f^{-1}(b),e)\ar[r]&\cdots
\ar[r]&\pi_0(E)\ar[r]&\pi_0(B),
}
$$
with appropriate interpretation near the end since
$\pi_0$ is only a set while $\pi_1$ is a group.

\begin{proposition}
\label{proposition-map-is-equivalence-iff-fibers-contractible}
A map $f:E \to B$ is an equivalence if and only if
all the fibers $f^{-1}(b)$ for $b \in B$ are contractible.
\end{proposition}

\begin{proof}
This is immediate from homotopy long exact sequence
and the fact that homotopy groups detect equivalences.
\end{proof}

\begin{exercise}[2.2]
\label{exercise-2.2}
Use the 5-lemma to show that given a commutative triangle
$$
\xymatrix{
X \ar[rd]_{p} \ar[rr]_{f} && Y \ar[dl]^{q} \\
& B
}
$$
the morphism $f$ is an equivalence if and only if
the induced maps on the fibres
$p^{-1}(b)\to q^{-1}(b)$ are equivalences for all $b \in B$.
\end{exercise}

\begin{proof}
For the converse implication,
$$
\xymatrixcolsep{.7em}
\xymatrix{
\cdots \ar[r]&\pi_{n+1}(B,b)\ar[r]\ar[d]^{\simeq}
&\pi_n(p^{-1}(b),x)\ar[r]\ar[d]^{\simeq}
&\pi_n(X,x)\ar[r]\ar@{.>}[d]^{\simeq }
&\pi_n(B,b)\ar[r]\ar[d]^{\simeq}
&\pi_{n-1}(p^{-1}(b),x)\ar[d]^{\simeq}\ar[r]&\cdots\\
\cdots\ar[r]&\pi_{n+1}(B,b)\ar[r]&\pi_n(q^{-1}(b),f(x))\ar[r]&\pi_n(Y,f(x))\ar[r]&
\pi_n(B,b)\ar[r]&\pi_{n-1}(q^{-1}(b),f(x))\ar[r]&\cdots
}
$$
and for the forward implication just do the same with
the map $\pi_n(p^{-1}(b),x)\to \pi_n(q^{-1},f(x))$ in the center.
\end{proof}

\begin{lemma}
\label{lemma-pullback-iff-fiber-maps-are-equivalences}
A commutative square
$$
\xymatrix{
X'\ar[r]\ar[d]_{f'}&Y'\ar[d]^{f}\\
X\ar[r]_{g}&Y
}
$$
is a pullback if and only if for every $x \in X$,
the induced map on fibres is an equivalence.
\end{lemma}

\begin{exercise}[2.3]
\label{exercise-2.3}
Consider a commutative square…

\end{exercise}

\begin{exercise}[2.4]
\label{exercise-2.4}
Suppose we have a commutative diagram
$$
\xymatrix{
X\ar[r]\ar[d]&X'\ar[d]\ar[r]& X''\ar[d]\\
Y\ar[r]&Y'\ar[r]&Y''.
}
$$
\begin{enumerate}
\item If the right and composite squares are both pullbacks,
then so is the left-hand square.
\item If $\pi_0Y \to \pi_0Y'$ is surjective
and the left and composite squares
are both pullbacks,
then so is the right-hand square.
\end{enumerate}
\end{exercise}

\begin{proof}
\begin{enumerate}
\item To use Corollary 2.1.23 we look at the fibers and apply
 Corollary 2.1.17: the 3-for-2 property.
\item I'm not sure why is that condition on
$\pi_0Y \to \pi_0Y'$… looks like the same argument should work.
\end{enumerate}
\end{proof}

\section{Monomorphisms of $\infty$-groupoids}
\label{section-monomorphisms}

\noindent
``A monomorphism of groupoids is the inclusion of
some of the path components''. That is, all information
about a monomorphism is in $\pi_0$. Namely:
monomorphism if and only if injective on  $\pi_0$ 
and isomorphism in higher homotopy groups
(after fixing a base point).

Monomorphisms of $\infty$-groupoids are…

\begin{exercise}[2.6]
\label{exercise-2.6}
Show that monomorphisms are closed
under base change.
\end{exercise}

This means that in a pullback square,
if the vertical arrow
is a monomorphism, then so is the
other vertical arrow.

\begin{remark}
\label{remark-monomorphism-equivalence}
Using Exercise \ref{exercise-2.2}, it follows that $f$ is a monomorphism
if and only if for all $x,x' \in X$, the induced
morphism on path spaces $X(x,x') \to Y(fx,fx')$ is
an equivalence.
\end{remark}


\noindent
The following lemma is very similar to
Proposition \ref{proposition-map-is-equivalence-iff-fibers-contractible}.
The difference is that in that proposition we
require all the fibers to be contractible,
and in the following we allow some of them to be empty.

\begin{lemma}
\label{lemma-monomorphism-iff-fibres-are-empty-or-contractible}
A morphism of $\infty$-groupoids $f:X \to Y$ is
a monomorphism if and only if the fibres are all
either empty of contractible.
\end{lemma}

\begin{proof}
Using Lemma \ref{lemma-pullback-iff-fiber-maps-are-equivalences},
which says a map is a pullback iff induced maps on fibers are equivalences.
\end{proof}

\begin{remark}
\label{remark-lemma-2.2.3}
There is a caveat in Lemma 2.2.3 on the claim
that the vertical map on the left in the following
diagram is ``diagonal map''
$$
\xymatrix{
\bullet\ar[r]\ar[d]&X\ar[d]&Y\ar[d]\\
\bullet\ar[r]&X \times X\ar[r]Y \times Y&
}
$$
This should be proved.
\end{remark}

\begin{proposition}
\label{proposition-monomorphism-then-monomorophism-of-sets-and-pullback-square}
If $X \to Y$ is a monomorphism, then $\pi_0X \to \pi_0Y$ 
is a monomorphism of sets, and the commutative square
$$
\xymatrix{
X\ar[r]\ar[d]&Y\ar[d]\\
\pi_0\ar[r]&\pi_0Y
}
$$
is a pullback.
\end{proposition}

\begin{exercise}
\label{exercise-2.7}
Let $X$ be an $\infty$-groupoid and consider a subset $S\subseteq \pi_0X$.
Show that if we form the pullback
$$
\xymatrix{
Y\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&X\ar[d]\\
S\ar@{^{(}->}[r]&\pi_0X
}
$$
then the induced map $\pi_0Y\to S$ is an isomorphism.
\end{exercise}

\begin{proof}
Might be kind of nonsense but I thought this:
think of $\pi_0$ as a functor from  $\infty$-groupoids
to $\mathsf{Sets}$. Note that this functor
preserves pullbacks almost tautologically:
in fact, morphisms of groupoids are defined
to be morphisms of the $\pi_0$'s along
with some homotopies and so on. Then
$\pi_0Y$ is the pullback of the square above
after applying the functor $\pi_0$.
But so is $S$ by trivial reasons.
Then by universal property of the pullback
in $\mathsf{Sets}$ there is a unique morphism
$S \to \pi_0Y$ which inverts $\pi_0Y \to S$,
i.e.
$$
\xymatrix{
S \ar[rrrd] \ar@{-->}[rrd] \ar[rrdd] & & \\
& & \pi_0Y \ar[d] \ar[r] & \pi_0X \ar[d] \\
& & S \ar[r] & \pi_0X
}
$$
\end{proof}

\noindent
See remark 2.2.8. Looks like there
is a factorization structure involved.

\begin{exercise}[2.8]
\label{exercise-2.8}
Given a commutative triangle
$$
\xymatrix{
X \ar[rd]_{p} \ar[rr]_{f} && Y \ar[dl]^{q} \\
& B
}
$$
of $\infty$-groupoids, the morphism $f$ is a monomorphism
if and only if for all $b \in B$, the
induced map on fibres $X_b \to Y_b$ is a monomorphism.
\end{exercise}

\begin{proof}
By Lemma 2.2.3 it's enough to show that all the fibres of
$f$ are either empty or contractible.
Let $y \in Y$. The map $X_{q(y)}\to Y_{q(y)}$ induced from $f$ 
is a monomorphism by hypothesis, so that its fibers
are empty or contractible. Since $f(q(y))=p^{-1}(q)$,
the fibers of the fiber map coincide with the fiber of the 
original map $f$.
\end{proof}

\begin{exercise}[2.9]
\label{exercise-2.9}
Show that if $X$ is an $\infty$-groupoid,
then so is $\mathsf{Fun}(\mathcal{C},X)$ 
for any $\infty$-category $\mathcal{C}$.
\end{exercise}

\begin{proof}
We should use that
$\infty$-categories are Cartesian closed.
\end{proof}

\section{$\infty$-categories}
\label{section-infty-categories}

\noindent
There are objects called {\it $\infty$-categories}. …

\medskip\noindent
Given an $\infty$-category $\mathcal{C}$, there exists
a {\it localization} $\|\mathcal{C}\|$ to an
$\infty$-groupoid, with a canonical map
$\mathcal{C} \to \|\mathcal{C}\|$,
(which is not equivalent to $\mathcal{C}$, but)
such that for any $\infty$-groupoid $X$ 
the induced map
$$
\mathsf{Map}(\|\mathcal{C}\|,X) \to \mathsf{Map}(\mathcal{C},X)
$$
is an equivalence.
Moreover  $\|[1]\|\simeq *$.

It turns out that this concept of localization
generalizes the notion of geometric realization
for simplices.

\medskip\noindent
We say that $[0]$ and $[1]$ ``detect equivalences''
in the following sense:
a functor $F: \mathcal{C} \to \mathcal{D}$ is
an equivalence if and only if the maps
$$
\mathcal{C}^{\simeq} \to \mathcal{D}^{\simeq},\qquad 
\mathsf{Map}([1],\mathcal{C})\to\mathsf{Map}([1],\mathcal{D})
$$
are equivalences of $\infty$-groupoids.
(Because $\mathcal{C}^\simeq \simeq \mathsf{Map}([0], \mathcal{C})$.)
To understand this you can think that
$\mathsf{Map}([1],\mathcal{C})$ is like
the space of all $\Hom$s, which is a groupoid,
whose arrows are natural equivalences.

\begin{lemma}
\label{lemma-equivalences-for-infty-groupoids}
The following are equivalent for an $\infty$-category $\mathcal{C}$:
\begin{enumerate}
\item $\mathcal{C}$ is an $\infty$-groupoid.

\item $\mathcal{C}^\simeq \to \mathcal{C}$ is an equivalence.

\item The map
$$
\mathcal{C}^\simeq \simeq \mathsf{Map}([0],\mathcal{C})
\to \mathsf{Map}([1],\mathcal{C})
$$
induced by $[1] \to [0]$ is an equivalence
of $\infty$-groupoids.

\item The functor
$$
\mathcal{C}\to \mathsf{Fun}([1],\mathcal{C})
$$
induced by $[1]\to [0]$ is an equivalence
of $\infty$-categories.
\end{enumerate}
\end{lemma}

\begin{proof}
The first two conditions are equivalent by definition
of $\mathcal{C}^{\simeq}$. The third condition is implied
by the second one using the object $\|\cdot\|$ postulated above
(which applies when $\mathcal{C}$ is a groupoid).
{\bf Caveat:} I think the fiber of this map is always a point!

$(3\implies 2)$ actually makes sense:
we can construct a commutative diagram with left and top arrows
equivalences (why the left one is an equivalence?).
By hypothesis, the one on the right is also an equivalence.
Then the one on the bottom is too, and since $[0]$ and $[1]$ 
detect equivalences, we are done.

($3 \implies 4$) We need to apply $(-)^\simeq$ and
$\mathsf{Map}([1],-)=\mathsf{Fun}([1],-)^\simeq$…
\end{proof}

\section{Segal spaces}
\label{section-segal}


\begin{remark}
\label{remark-Segal-spaces}
Think of a Segal space as satisfying
$$
\mathsf{Map}(\text{Spine}^n,X) \simeq \mathsf{Map}(\Delta^n,X)
$$
where $\text{Spine}^n$ is a simplicial construction. 
In the case of a tetrahedon, $\text{Spine}$ is defined as the
chain of edges joining the four vertices 0,1,2,3.
\end{remark}


The {\it Kan condition} is
$$
\xymatrix{
\Lambda^n_i\ar@{^{(}->}[d]^i \ar[r]&  X\\
\Delta^n\ar@{.>}[ur]_{\exists }
}
$$
for all $i$, 
and is called strict/weak whether the existence
is unique or not. The {\it inner Kan condition} 
is if we require for $i \neq 0$ and $i\neq n$.

Why is this so important?

\begin{definition}
\label{definition-nerve}
The {\it nerve} functor $N:\mathsf{Cat} \to \mathsf{Set}_\Delta$ 
is defined by
$$
\mathcal{C} \mapsto  \mathsf{Hom}_{\mathsf{Cat}}([\bullet],\mathcal{C}),
$$
so that $N\mathcal{C}_n$ is the set
of all composable sequences of $n$ morphisms.
\end{definition}

Notice that $N\mathcal{C}_0$ is the set of all objects of $\mathcal{C}$ 
and $N\mathcal{C}_1$ is the set of all morphisms.
This is crucial for the following exercise:

\begin{exercise}
\label{exercise-}
$N:\mathsf{Cat}\to\mathsf{Set}_\Delta$ is fully faithful.
\end{exercise}

\begin{proof}
To a functor $F \in \mathsf{Hom}(\mathcal{C},\mathcal{D})$ 
we assign a simplicial set $N(F)_n:N(\mathcal{C})_n \to N(\mathcal{D})_n$ 
defined in the obvious way: we map a sequence
$$
\bullet \xrightarrow{f_1}\bullet\to \cdots \bullet \xrightarrow{f_n}\bullet
$$
to
$$
\bullet \xrightarrow{F(f_1)}\bullet \to \cdots
\bullet\xrightarrow{F(f_n)}\bullet
$$
This functor is well defined as a functor
of simplicial sets by functoriality of $F$.
To check fully faithfullness we use the fact
that we can reconstruct a category from 
$N(F)_0$ and $N(F)_1$.
\end{proof}

Thus, the Kan condition allows to see categories
as simplicial sets. Here are possible generalizations
of this:

\begin{center}
\begin{tabular}{c | c | c}
& strict &weak\\
\hline
all $i$ & groupoids & $\infty$-groupoids\\
inner & categories & $\infty$-categories.
\end{tabular}
\end{center}

\section{Segal condition}
\label{section-segal-condition}

The {\it Segal condition} is

$$
\mathsf{Map}([n],X) \xrightarrow{\simeq}
\mathsf{Map}([1],X) \times_{\mathsf{Map}([0],X)}\ldots
\times_{\mathsf{Map}([0],X)}\mathsf{Map}([1],X)
$$

\section{Lifting properties}
\label{section-lifting-properties}

The key to proving anything related
to left orthogonality is not to use
the usual lifting diagram but
the equivalent definition involving $\mathsf{Map}$.

\begin{definition}
\label{definition-orthogonal}
For morphisms $\ell:A \to B$ and $r:X \to Y$ 
we say that $r$ is {\it right orthogonal} 
to $\ell$ (and dually that $\ell$ is 
{\it left orthogonal} to  $r$ if
for any commutative square
$$
\xymatrix{
A\ar[r]\ar[d]_{\ell}&X\ar[d]^{r}\\
B\ar@{.>}[ur]\ar[r]&Y
}
$$
the space of diagonal lifts $B \to X$ is contractible.
(I think of this as: there exists a unique lift.)
\end{definition}

\noindent
A choice of horizontal arrows in the former
diagram is equivalent to a choice of element in
$\mathsf{Map}(B,Y)\times_{\mathsf{Map}(A,Y)}\mathsf{Map}(A,X)$.
Indeed, given a map $A\to X$,
we may poscompose with $r$ to obtain
a map $A \to Y$, and similarly precomposing with 
$\ell$ any map $B \to Y$.
Intuitively, the pullback
of these two maps is the set of pairs
of maps $A \to X$ and $B \to Y$
that give the same map  $A \to Y$,
i.e. that the square commutes.

But a lift $B \to X$ also determines
a map $A \to X$ and 
a map $B \to Y$.
All this to say that 
a choice of horizontal arrows,
i.e. an element of the pullback
$\mathsf{Map}(B,Y) \times_{\mathsf{Map}(A,Y)}\mathsf{Map}(A,X)$,
that comes from a choice of map
$B \to X$ is the same as 
a fibre of the map
$$
\mathsf{Map}(B,X) \to 
\mathsf{Map}(B,Y) \times_{\mathsf{Map}(A,Y)}\mathsf{Map}(A,X).
$$
Then the definition is equivalent
to this fibre being contractible.
In turn, this is equivalent to the
map being an equivalence.
By putting $\mathsf{Map}(B,X)$ instead
of the pullback, this is also equivalent
to the commutative square
$$
\xymatrix{
\mathsf{Map}(B,X)\ar[r]^{r_*}\ar[d]_{\ell^*}&\mathsf{Map}(B,Y)\ar[d]^{\ell^*}\\
\mathsf{Map}(A,X)\ar[r]_{r_*}&\mathsf{Map}(A,Y)
}
$$
being a pullback. So that's the
right way to look at things, apparently.

\begin{example}
\label{example-monomorphism-iff-right-orthogonal-to-pushout}
It's the same for a map $f:X \to Y$ to be
a monomorphism and to be
right orthogonal to $* \amalg * \to *$.
To see it, draw the diagram of right orthogonality
and then put it in the $\mathsf{Map}$ pullback form.
Using that $\mathsf{Map}(* \amalg *,X)\simeq X\times X$,
which follows from writing the
definition of $* \amalg *$ as the pushout of
the empty space, we obtain the definition of
monomorphism.
\end{example}


\begin{lemma}
\label{lemma-epimorphisms-are-left-orthogonal-to-monomorphisms}
Epimorphisms in $\mathit{Gpd}_\infty$ are left orthogonal to
monomorphisms.
\end{lemma}

\begin{exercise}
\label{exercise-2.11}
Show that a map is left orthogonal
to itself if and only if it is an equivalence.
\end{exercise}

\begin{proof}
We use Proposition 
\ref{proposition-map-is-equivalence-iff-fibers-contractible}.
Consider the diagram
$$
\xymatrix{
X\ar[r]^{\text{id}}\ar[d]_{f}&X\ar[d]^{f}\\
Y\ar[r]_{\text{id}}\ar@{.>}[ur]&Y.
}
$$
If $f$ is an equivalence then 
by the existence of the lift
every fiber consists of only one point and
thus it is contractible.
Conversely, if every fiber is contractible
we define the unique lift as the fiber of every point.
\end{proof}

\begin{lemma}
\label{lemma-orthogonality-and-composition}
Suppose $f:A \to B$ is left orthogonal
to a map $r:X \to Y$.
Then a map $g:B \to C$ is left
orthogonal to $r$ if and only if $g \circ f$ is.
\end{lemma}

\begin{proof}
By 2-for-3 for pullbacks, i.e. Exercise \ref{exercise-2.4}.
\end{proof}

It is important to remember that
being a monomorphism is the same
as square with $\pi_0$ is pullback.
That is the key to Lemma 2.4.3.
For one implication we need
to put surjectivity on $\pi_0$
to apply 2-for-3.

Look at the case for sets,
it's also true that epimorphisms
is orthogonal to monomorphisms.

\begin{lemma}
\label{lemma-orthogonality-for-pushout-diagram}
Suppose we have a commutative diagram
\begin{equation}
\label{equation-orthogonal-lemma}
\xymatrix{
X\ar[d]^f& Y \ar[l]\ar[d]_g \ar[r]& Z\ar[d]_h\\
X'&Y' \ar[l]\ar[r]&Z,
}
\end{equation}
such that each of the morphisms $f$, $g$ and $h$ 
is left orthogonal to a morphism $r:U \to V$.
Then the induced morphism on pushouts
$X \amalg_Y Z \to X' \amalg_{Y'}Z'$ is
also left orthogonal to $r$.
\end{lemma}

\begin{proof}
The induced map on pushouts is
$$
\xymatrix{
Y \ar[r] \ar[d] & Z \ar[d] \ar[rrd] & & \\
X \ar[r] \ar[rd]& X \amalg_Y Z \ar@{-->}[rrd]^F & & Z'\ar[d] \\
&X'\ar[rr]& & X' \amalg_{Y'}Z'
}
$$
To construct a lift of the form
$$
\xymatrix{
X \amalg_Y Z\ar[r]\ar[d]&U\ar[d]^r\\
X' \amalg_{Y'}Z'\ar[r]\ar@{.>}[ur]&V
}
$$
we use the universal product of pushout for $X' \amalg_{Y'}Z'$,
that is, we shall be done once we construct a digram
$$
\xymatrix{
Y'\ar[r]\ar[d]&Z'\ar[d]\\
X'\ar[r]&U.
}
$$
Notice that this is indeed the case:
the universal property of the pushout
in homotopy sense means that the space of maps
is contractible.

Such a map is obviously constructed by
composing $Y' \to X'$ as in Diagram \ref{equation-orthogonal-lemma}
followed by the lift of $f$. Likewise
we construct a map  $Y'\to V$.
And in fact
{\bf it is not needed that $g$ is orthogonal to $r$}.
\end{proof}

\begin{proof}
$$
\xymatrix{
X\ar[d]&Y \ar[l]\ar[d]\ar[r]&Z\ar[d]\\
X'\ar[d]&  Y \ar[l]\ar[d]\ar[r]&Z\ar[d]\\
X' \ar[d]&  Y \ar[l]\ar[d]\ar[r]& Z'\ar[d]\\
X'\amalg_Y Y'\ar[d]&  Y'\ar[l]\ar[d]\ar[r]& Z'\ar[d]\\
X'& Y'\ar[l]\ar[r]&Z'
}
$$
In each row of vertical arrows there is one that
is not trivial. We will be done once we show… using
the next lemma.

Every triple of horizontal arrows gives a pushout.
Every triple of vertical arrows gives a morphism of pushouts.
In fact, we have that for every triple
of horizontal arrows, the corresponding pushout
morphism is a pushout of the corresponding nontrivial
vertical arrow, e.g. on the top part we get

$$
\xymatrix{
X\ar[r]\ar[d]\ar@{}[dr]|-{\ulcorner}&X \amalg_YZ\ar[d]\\
X'\ar[r]&X'\amalg_YZ
}
$$

\end{proof}

\begin{lemma}
\label{lemma-orthogonal-lemma2}
Suppose we have a pushout square
$$
\xymatrix{
A\ar[r]\ar[d]_f\ar@{}[dr]|-{\ulcorner}&B\ar[d]^{f'}\\
C\ar[r]&B \amalg_A C
}
$$
where $f$ is left orthogonal to a morphism $r$.
Then $f'$ is also left orthogonal to $r$.
\end{lemma}

\begin{proof}
Suppose there is a square
$$
\xymatrix{
B\ar[r]\ar[d]_{f'}&U\ar[d]^{r}\\
C\ar[r]&B \amalg_A C.
}
$$
To find a unique up to homotopy lift of $f'$, 
all we need to do is construct a square
$$
\xymatrix{
A\ar[r]^?\ar[d]&B\ar[d]\\
C\ar[r]_?&U.
}
$$
Which we can construct easily by
$$
\xymatrix{
A \ar[d]_f\ar[r]& B\ar[r]& U\ar[d]^r\\
C\ar@{.>}[urr]\ar[r]&  B \amalg_A C \ar[r]&V.
}
$$
\end{proof}

A more formal approach is:

\begin{proof}
First apply $\mathsf{Map}-,U)$.
\end{proof}

\begin{definition}
\label{definition-retract}
Recall that an object $X$ is a {\it retract} of $Y$ 
if there are maps $X \to Y \to X$ and 
a homotopy between the composite and the identity of $X$.
Similarly,
we say that a morphism of $f'$ is
a {\it retract} of $f$ if there is a commutative diagram
…
\end{definition}

\begin{lemma}
\label{lemma-retract-orthogonality}
Suppose $f'$ is a retract of $f'$.
If $f$ is left orthogonal to a morphism
$r$, then so is $f'$.
\end{lemma}

\begin{proof}
Suppose we have a lifting problem
$$
\xymatrix{
X'\ar[r]\ar[d]&U\ar[d]^r\\
Y'\ar[r]&V.
}
$$
Then we construct
$$
\xymatrix{
X\ar[r]\ar[d]&X'\ar[r]\ar[d]&U\ar[d]^{r}\\
Y\ar[r]\ar@{.>}[urr]&Y'\ar[r]&V
}
$$
thus obtaining a lift by precomposing the 
bottom arrow with $Y' \to Y$
given in the definition of retract.
\end{proof}

\begin{exercise}
\label{exercise-retract-of-equivalence-is-equivalence}
Show that any retract of an equivalence is an equivalence.
\end{exercise}

\begin{proof}
Recall that the definition of
equivalence is that it has inverses such
that the compositions are homotopic to the identity.

$$
\xymatrix{
\bullet\ar[r]\ar[d]^f&\bullet\ar[d]^{f'}&\bullet\ar[d]^{f}\\
\bullet\ar[r]&\bullet\ar@{.>}[u]\ar[r]&\bullet
}
$$
In a more formal way we obtain a cube diagram
upon application of $\mathsf{Map}$.
\end{proof}


\section{Conservative functors and mapping spaces}
\label{section-conservative-functors-and-mapping-spaces}

\begin{definition}
\label{definition-conservative-functor}
A functor $\mathcal{C} \to \mathcal{D}$ is {\it conservative} 
if it is right orthogonal to $s_0:[1]\to [0]$.
\end{definition}

\begin{exercise}
\label{exercise-equivalences-for-conservative-functor}
The following are equivalent for a functor $F:\mathcal{C} \to \mathcal{D}$:
\begin{enumerate}
\item $F$ is conservative.
\label{item-conservative1}

\item The fibres of $F$ are all $\infty$-groupoids.
\label{item-conservative2}

\item The commutative square
\label{item-conservative3}
$$
\xymatrix{
\mathcal{C}^{\simeq}\ar[r]\ar[d]&\mathcal{C}\ar[d]\\
\mathcal{D}^{\simeq}\ar[r]&\mathcal{D}
}
$$
is a pullback.
\end{enumerate}
\end{exercise}

\begin{proof}
Maybe the easiest is to check that 
\ref{item-conservative3} $\implies$ \ref{item-conservative2}.
This is just because the square being a pullback
means that the fibres are equivalent,
and the fibres of the left vertical arrow are
groupoids, while the fibres of the right vertical
arrow are the fibres of $F$.

In a similar way we can prove
\ref{item-conservative1} $\iff$ \ref{item-conservative2}.
Use that a map is an equivalence if and only if it is 
an equivalence upon groupoidification and $\mathsf{Map}([1],-)$ 
on the fibres of diagram in \ref{item-conservative3}.
Applying groupoidification gives
trivial equivalences in the fibres.
Applying $\mathsf{Map}([1],-)$ and getting
equivalences on the fibres is equivalent to
the square
$$
\xymatrix{
\mathcal{C}\simeq\mathsf{Map}([0],\mathcal{C})
\ar[r]\ar[d]&
\mathsf{Map}([1],\mathcal{C})\ar[d]\\
\mathcal{D}\simeq \mathsf{Map}([0],\mathcal{D})\ar[r]&
\mathsf{Map}([1],\mathcal{D})
}
$$
being a pullback, which is the definition of conservative.

if and only if the maps on fibres
are equivalences. The fiber of the left vertical arrow
is the groupoidification of the fiber of groupoidification of $F$,
and the fiber of the right vertical arrow
is the $\mathsf{Map}([1],-)$.

Also, by applying $\mathsf{Map}([1],-)$ to
the square on \ref{item-conservative3}
we immediately obtain the $\mathsf{Map}$ condition
for being conservative, i.e. condition \ref{item-conservative1}.

Finally to check that
\ref{item-conservative2} $\implies$ \ref{item-conservative3} 
we apply $\mathsf{Map}([0],-)$ to obtain
$$
\xymatrix{
\mathsf{Map}([0],\mathcal{C}^\simeq)\ar[r]\ar[d]
&\mathsf{Map}([0],\mathcal{C})\ar[d]\\
\mathsf{Map}([0],\mathcal{D}^{\simeq})\ar[r]&\mathsf{Map}([0],\mathcal{D})
}
$$
To check this is a pullback we only need to
check that the maps induced in fibers are equivalences
by  Lemma \ref{lemma-pullback-iff-fiber-maps-are-equivalences}.
But since the fibres of $F$ are $\infty$-groupoids,
they must equal the fiber of the map on the associated groupoids
(it's a fact! Fibre and groupoidification commute).
We do the same for $[1]$ and use that $[0]$ and $[1]$ detect
equivalences.
\end{proof}

Condition \ref{item-conservative3}
can be interpreted as:
if a map gives an equivalence in $\mathcal{D}$,
then it already was an equivalence in $\mathcal{C}$.
For that we use
$$
\xymatrix{
\pi_0\mathcal{C}^\simeq\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&
\pi_0\mathcal{D}^\simeq\ar[d]\\
\pi_0\mathsf{Map}([1],\mathcal{C})\ar[r]&
\pi_0\mathsf{Map}([1],\mathcal{D}).
}
$$

Key tip: by Lemma (?) it is equivalent that
a functor $F: \mathcal{C} \to \mathcal{D}$ is conservative and
that the square [square with $\pi_0$] is a pullback.

\begin{definition}
\label{definition-arrow-category}
The {\it arrow category} of $\mathcal{C}$ is
$\mathsf{Ar}(\mathcal{C})=\mathsf{Fun}([1],\mathcal{C})$.
\end{definition}

\begin{lemma}
\label{lemma-1}
$$
\xymatrix{
B\ar[r]\ar[d]^f\ar@{}[dr]|-{\ulcorner}&B \amalg_YZ\ar[d]^
{f\amalg_{\text{id}}\text{id}}\\
D\ar[r]&D \amalg_YZ
}
$$
\end{lemma}

\begin{proof}
$$
\xymatrix{
Y\ar[r]\ar[d]\ar@{}[dr]|-{\ulcorner}&Z\ar[d]\\
B\ar[r]&B\amalg_YZ\ar[d]\\
D\ar[r]&D\amalg_YZ
}
$$
\end{proof}

Now observe that the folowing
is a particular case:
$$
\xymatrix{
[1]\ar[r]\ar[d]^{s_0}\ar@{}[dr]|-{\ulcorner}&[1]\amalg_{[0]}[1]=[2]\ar[d]
_{\text{id}\amalg_{\text{id}}s_0}\\
[0]\ar[r]&[1]\amalg_{[0]}[0]=[1]
}
$$
where the latter equality,
namely $[1]\amalg_{[0]}[0]=[1]$,
holds because it must be a fact that
when one of the horizontal arrows of a pushout 
is an equivalence then the other one must be too.

\begin{lemma}
\label{lemma-2}
In
$$
\xymatrix{
A\ar[r]\ar[d]\ar@{}[dr]|-{\ulcorner}&V\ar[d]
\ar[r]& B\amalg_YZ\ar[d]_{f\amalg_{\text{id}}\text{id}}\\
C\ar[r]&D\ar[r]&D\amalg_YZ
}
$$
We can put identity left or right and it will still be a pushout
\end{lemma}

We conclude that
$$
\xymatrix{
[1]\amalg [1]\ar[r]\ar[d]^{s_0 \amalg_{\emptyset}\text{id}}
\ar@{}[dr]|-{\ulcorner}&[2]\amalg_{[1]}[2]\ar[d]\\
[0]\amalg[1]\ar[d]^{\text{id}\amalg s_0}\ar[r]&[1]\amalg_{[1]}[2]
\ar[d]_{\text{id} \amalg_{\text{id}}s_0}\\
[0]\amalg[0]\ar[r]&[1]\amalg_{[1]}[1]=[1]
}
$$

Why do all this? A map that is right orthogonal
to $[1]\to[0]$ is also right orthogonal
to $s_0\times \text{id}:[1]\times[1]\to[1]$.

\begin{proposition}
\label{proposition-characterization-conservative}
It is equivalent that $F:\mathcal{C} \to \mathcal{D}$
is conservative and that the square
$$
\xymatrix{
\mathsf{Fun}([0],\mathcal{C})=\mathcal{C}\ar[r]\ar[d]&
\mathsf{Fun}([0],\mathcal{D})=\mathcal{D}\ar[d]\\
\mathsf{Fun}([1],\mathcal{C})=\mathsf{Ar}(\mathcal{C})\ar[r]
&\mathsf{Fun}([1],\mathcal{D})=\mathsf{Ar}(\mathcal{D})
}
$$
is a pullback.
\end{proposition}

\begin{proof}
One implication is easy: just take
$(-)^\simeq$ to obtain the $\mathsf{Map}$ condition
for conservative functors.

For the other direction we can get to
the exercise diagram by looking at
$$
\xymatrix{
[1]&\emptyset\ar[l]\ar[r]\ar[d]& [1]\ar[d]\\
[0]&\emptyset\ar[l]\ar[r]&\emptyset
}
$$
Then we apply $\mathsf{Map}$ (I think) and get to
$$
\xymatrix{
\mathsf{Map}([1),\mathcal{C})\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&
\mathsf{Map}([1],\mathcal{D})\ar[d]\\
\mathsf{Map}([1],\mathsf{Fun}([1],\mathcal{C})\ar[r]\ar[d]^{=}&
\mathsf{Map}([1],\mathcal{D})\ar[d]^=\\
\mathsf{Map}([1]\times[1],\mathcal{C})\ar[r]&
\mathsf{Map}([1]\times[1],\mathcal{D})
}
$$
Where have used currying.
The latter diagram gives the pullback
after applying $\mathsf{Map}([1],-)$.
The pullback after applying $(-)^\simeq$
gives just the $\mathsf{Map}$ condition
for conservativity.
\end{proof}

\begin{proposition}
\label{proposition-arrow-functor-is-conservative}
$\mathsf{Ar}(\mathcal{C})\to \mathcal{C} \times \mathcal{C}$
is conservative.
\end{proposition}

\begin{proof}
We use Proposition \ref{proposition-characterization-conservative}
putting $\mathcal{C}=\mathsf{Ar}(\mathcal{C})$ and
$\mathcal{D}=\mathcal{C} \times \mathcal{C}$.
That is, we know that 
$\mathsf{Ar}(\mathcal{C}) \to \mathcal{C} \times \mathcal{C}$ 
is conservative if and only if
$$
\xymatrix{
\mathsf{Fun}([1],\mathcal{C})=\mathsf{Ar}(\mathcal{C})\ar[r]\ar[d]&
\mathsf{Fun}([0]\amalg [0],\mathcal{C})=\mathcal{C}\times\mathcal{C}\ar[d]\\
\mathsf{Fun}([1],\mathsf{Fun}([1],\mathcal{C}))
=\mathsf{Fun}([1]\times[1],\mathcal{C}\ar[r]&
\mathsf{Fun}[1],\mathcal{C} \times\mathcal{C})
=\mathsf{Fun}([1]\amalg[1],\mathcal{C})
}
$$
where we have used
\begin{align*}
\mathcal{C}\times\mathcal{C}&=\mathsf{Fun}([0]\amalg[0],\mathcal{C})\\
\mathsf{Fun}([1],\mathcal{C}\times\mathcal{C})
&=\mathsf{Fun}([1]\times([0]\amalg[0]),\mathcal{C})\\
&=\mathsf{Fun}([1]\amalg[1],\mathcal{C})
\end{align*}

\noindent
where the first equality is given
just by applying $\mathsf{Fun}(-,\mathcal{C})$
to the basic pushout diagram,
the second one by currying,
and third one by
using that these are also $1$-categories.

The point is that once
we look at this the right way
we realise that it is nothing but 
the exercise diagram. So it's a pullback.
\end{proof}

\begin{definition}
\label{definition-mapping-space}
The {\it mapping space} is the fiber
$$
\xymatrix{
\mathcal{C}(x,y)\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}
&\mathsf{Ar}(\mathcal{C})\ar[d]\\
\{(x,y)\}\ar[r]&\mathcal{C}\times\mathcal{C}
}
$$
\end{definition}

\begin{exercise}
\label{exercise-compositions}
Use the pushout decomposition of $[2]$ 
to define composition maps
$$
\mathcal{C}(x,y)\times\mathcal{C}(y,z)\to\mathcal{C}(x,z).
$$
(For extra credit, use the decomposition
of $[3]$ to show this is associative
up to a specified homotopy.)
\end{exercise}

\begin{proof}
$$
\xymatrix{
\text{fiber}\ar[d]\ar@{.>}[rr]^{\simeq}&&
\mathcal{C}(x,y)\times \mathcal{C}(y,z)\ar[d]\\
\mathsf{Fun}([2],\mathcal{C})\ar[r]^{\simeq}\ar[d]&
\mathsf{Fun}([1]\amalg_{[0]}[1],\mathcal{C})\ar[r]^{\simeq}\ar[d]
&\mathsf{Fun}([1],\mathcal{C})\times_{\mathsf{Fun}([0],\mathcal{C})}
\mathsf{Fun}([1],\mathcal{C})\ar[ld]\\
\mathcal{C}\times\mathcal{C}\times\mathcal{C}\ar[r]^{\simeq}&
(\mathcal{C} \times \mathcal{C})
\times_{\mathcal{C}}(\mathcal{C}\times\mathcal{C})
}
$$
We shall define the fiber to be the
composition $\mathcal{C}(x,y,z)$.
This makes sense since
the fiber on the rightmost part
is indeed the product of the fibers, 
as is displayed in the diagram.
This is because in general
$$
\xymatrix{
fib(F)\times fib(G)\ar[r]&  \mathcal{A}\times_Z \mathcal{B}
\ar[r]^{F\times_{\text{id}}G}&
\mathcal{C}\times_Z \mathcal{D}
}
$$
\end{proof}


\section{Fully faithful functors}
\label{section-fully-faithful-functors}

\begin{definition}
\label{definition-fully-faithful}
A functor of $\infty$-categories $F:\mathcal{C} \to \mathcal{D}$ 
is {\it fully faithful} if it is
right orthogonal to $\partial[1] \to [1]$,
that is, if the commutative square
$$
\xymatrix{
\mathsf{Map}([1],\mathcal{C})\ar[r]\ar[d]&
\mathsf{Map}([1],\mathcal{D})\ar[d]\\
(\mathcal{C}^\simeq)^{\times 2}\ar[r]&
(\mathcal{D}^\simeq)^{\times 2}
}
$$
is a pullback.
\end{definition}

By Exercise \ref{exercise-equivalences-for-conservative-functor}, since 
$\mathsf{Ar}(\mathcal{C})\to \mathcal{C}\times\mathcal{C}$
is conservative, we get that the fibres
are groupoids, so we know that we get equivalences
on the fibres when we get a pullback, so really we have
equivalences
$$
\mathcal{C}(x,y)\xrightarrow{\simeq}\mathcal{D}(Fx,Fy)
$$
\begin{proposition}
\label{proposition-fullt-faithfull-iff-pullback}
$F:\mathcal{C} \to \mathcal{D}$ is fully faithful
if and only if the commutative square
$$
\xymatrix{
\mathsf{Ar}(\mathcal{C})\ar[r]\ar[d]&\mathsf{Ar}(\mathcal{D})\ar[d]\\
\mathcal{C}\times\mathcal{C}\ar[r]&\mathcal{D}\times\mathcal{D}
}
$$
\end{proposition}

\begin{proof}
At least one implication is easy:
if it's a pullback,
maps on fibres are equivalences.
By the remark on the human-readble
definition of fully faithfulness, we are done.
\end{proof}

\begin{lemma}
\label{lemma-fully-faithfulness-is-preserved-by-Fun(A,-)}
If $F:\mathcal{C} \to \mathcal{D}$ is fully faithful,
so is
$F_*:
\mathsf{Fun}(\mathcal{A},\mathcal{C})\to\mathsf{Fun}(\mathcal{A},\mathcal{D})$ 
for any $\infty$-category $\mathcal{A}$.
\end{lemma}

\begin{exercise}
\label{exercise-characterization-of-pullbacks-for-fully-faithful}
Show that the following are equivalent for a commutative square
$$
\xymatrix{
\mathcal{C}\ar[r]^F\ar[d]&\mathcal{C}'\ar[d]\\
\mathcal{D}\ar[r]_G&\mathcal{D}'
}
$$
where $F$ and $G$ are fully faithful:
\begin{enumerate}
\item The square is a pullback of $\infty$-categories.
\label{item-fully-faithful1}

\item The square gives a pullback of $\infty$-groupoids on cores.
\label{item-fully-faithful2}

\item The square gives a pullback of sets on $\pi_0(-)^\simeq$.
\label{item-fully-faithful3}
\end{enumerate} 
\end{exercise}

\begin{proof}
\ref{item-fully-faithful1} $\implies$ \ref{item-fully-faithful2}
is immediate since pullbacks are detected on maps from $[0]$ 
(and $[1]$).

For \ref{item-fully-faithful2} $\implies$ \ref{item-fully-faithful1}
first apply $\mathsf{Map}([1],-)$, then we get

For \ref{item-fully-faithful2} $\implies$ \ref{item-fully-faithful3}
we first need to make the diagram in the exercise
after applying $(-)^{\simeq}$, then
the arrows of $F$ and $G$ become monomorphisms.
If we can prove that, then
we apply some past exercise to see that
the diagram is pullback iff the diagram on $\pi_0$.
In fact, to prove those maps are monomorphisms
we will use the theorem proved next,
Theorem \ref{theorem-fully-faithful-implies-conservative}.
\end{proof}

\begin{theorem}
\label{theorem-fully-faithful-implies-conservative}
$F$ is fully faithfull if and only if
$F$ is conservative.
\end{theorem}

\begin{proof}
We want to prove that $F$ 
is right orthogonal to $\partial[1]\to [1]$
then it is right orthogonal to $[1]\to [0]$.
First we apply some sort of 2-for-3
property (some past exercise)
we look at
$$
\xymatrix{
\partial[1]=[0]\amalg[0]\ar[r]^{\substack{\text{left ort.} \\ \text{to $F$}}}
& [1]\ar[r]^{\substack{\text{want to} \\ \text{prove r.o.}}}
&[0]
}
$$
we realise that it's enough
to prove right-orthogonality of the
composition of the two maps above.
$$
\xymatrix{
[1]\amalg[1]\ar[r]\ar[d]\ar@{}[dr]|-{\ulcorner}&[3]\ar[d]\\
[0]\amalg[0]\ar[r]&E\simeq \ast
}
$$
where $E \simeq *$ by a fact.

Consider
$$
K=\{0<1<2\}\amalg_{\{1<2\}}\{1<2<3\}
$$
which is nothing more than $[2]\amalg_{[1]}[2]$.
Putting $[2]\simeq[1]\amalg_{[0]}[1]$ 
we see that
$$
K\simeq[1]\amalg_{[0]}[1]\amalg_{[1]}[1]\amalg_{[0]}[1]
\simeq[1]\amalg_{[0]}[1]\amalg_{[0]}[1]\simeq[3]
$$
Now we do
$$
\xymatrix{
\{0<2\}\amalg\{1<3\}K\ar[r]^{\simeq}\ar[d]&[3]\ar[d]\\
\ast \amalg \ast\ar[r]&E' \ar[r]&E
}
$$
where we already saw the outer square is
a pushouts by definition of $E$,
and $E'$ is defined as the pushout of
whatever it should be.
Then, since $K \simeq [3]$,
we apply the property of pushouts
that if the map on the ``total spaces''
is equivalence then so is the
map on ``base spaces''
(this is opposite to the property in pullback,
which is just what we call
``pullback of equivalences is equivalence'',
and then apply $\mathsf{Fun}$ 
to get to the property for pushouts).

Now back to our objective,
by the 2-for-3-ish for left-orthogonality,
now we aim to prove that
$$
\xymatrix{
\{1<2\}\ar[r]& K\ar[r]&E'\ar[r]&E.
}
$$
Now let $H$ be the pushout
$$
\xymatrix{
\{0<2\} \ar[r]\ar[d]\ar@{}[dr]|-{\ulcorner}& \ast \ar[d]\\
[2] \ar[r]& H…
}
$$
\end{proof}

Recall from Remark \ref{remark-monomorphism-equiavlence}
that a map of $\infty$-groupoids $f:X \to Y$
is a monomorphism if and only if 
the induced map on mapping spaces
$X(x,x') \to Y(fx,fx')$ is an equivalence.
Which is strange: that's what we wanted for
{\it fully faithful} functors, not monomorphisms.
(But then again: that was before we defined
$\infty$-categories.)

\begin{lemma}
\label{lemma-full-faithful-implies-underlying-groupoid-map-is-monomorphism}
If $F: \mathcal{C} \to \mathcal{D}$ is fully faithful,
then its underlying morphism of $\infty$-groupoids is a monomorphism
of spaces.
\end{lemma}

\begin{proof}
Fully faithful says $\partial[1] \to [1]$ is 
left orthogonal to $F$. But by Theorem \ref{?}
we also know it is conservative, so it's right orthogonal
to $[1] \to [0]$. By 2-for-3, $\partial[1] \to [1] \to [0]$ 
is left orthogonal to $F$. But we know that this is equivalent
to being an equivalence on underlying groupoids
\end{proof}

\begin{definition}
\label{definition-essentially-surjective}
$F:\mathcal{C} \to \mathcal{D}$ is {\it essentially surjective} if
$\pi_0F: \pi_0\mathcal{C}^\simeq \to \pi_0\mathcal{D}^\simeq$ is surjective.
\end{definition}

\begin{remark}
\label{remark-equivalence-on-cores-implies-fully-faithful-equivalence}
Suppose $F:\mathcal{C} \to \mathcal{D}$ gives an equivalence
on cores. Let's show that $F$ is fully faithful
if and only if $\mathsf{Map}([1],\mathcal{C}) \to \mathsf{Map}([1],\mathcal{D})$ 
is an equivalence. Indeed: by definition of full faithfullness
we get equivalences on all mapping spaces 
$\mathcal{C}(x,x') \simeq \mathcal{D}(fx,fx')$.
Applying $(-)^\simeq$ we obtain a similar diagram on groupoids,
namely
$$
\xymatrix{
\mathsf{Map}([1],\mathcal{C})\ar[r]\ar[d]&
\mathsf{Map}([1],\mathcal{D})\ar[d]\\
\mathcal{C}^\simeq \times \mathcal{C}^\simeq\ar[r]&
\mathcal{D}^\simeq\times \mathcal{D}^\simeq.
}
$$
The lower arrow is an equivalence by hypothesis
and by Exercise \ref{exercise-2.3} so is the upper arrow.

In conclusion, provided $F$ is an equivalence on the cores,
it is an equivalence of $\infty$-categories if and only if it
is fully faithful. 
\end{remark}

\begin{lemma}
\label{lemma-equivalence-iff-fully-faithful-and-essentially-surjective}
A functor of $\infty$-categories is an equivalence
if and only if it is fully faithful and essentially surjective.
\end{lemma}

\begin{proof}
Apply Lemma 
\ref{lemma-full-faithful-implies-underlying-groupoid-map-is-monomorphism}
and then Remark
\ref{remark-equivalence-on-cores-implies-fully-faithful-equivalence}.
\end{proof}

\section{Full subcategories}
\label{section-full-subcactegories}

\noindent
This is the construction of a full subcategory
from a subgroupoid of the underlying groupoid of the given category.

Given an $\infty$-category $\mathcal{C}$
and a monomorphism $i:X \hookrightarrow  \mathcal{C}^\simeq$ of $\infty$-groupoids,
then there exist an $\infty$-category $i^*\mathcal{C}$
and a functor of $\infty$-categories
$\overline{i}:i^*\mathcal{C} \to \mathcal{C}$ 
such that $(\overline{i})^\simeq \simeq i$
(and $(i^*\mathcal{C})\simeq X$ should also hold)
and such that the following diagram
$$
\xymatrix{
\mathsf{Map}(\mathcal{D},i^*\mathcal{C})\ar[r]\ar[d]&
\mathsf{Map}(\mathcal{D},\mathcal{C})\ar[d]\\
\mathsf{Map}(\mathcal{D}^\simeq,X)\ar[r]&
\mathsf{Map}(\mathcal{D}^\simeq,\mathcal{C}^\simeq).
}
$$
is a pullback.

Note that putting $\mathcal{D}=[1]$ 
we get that $\mathcal{D}^\simeq=\partial[1]$,
meaning that $\overline{i}$ is fully faithful.

In the other direction, it's also true that any fully faithful
functor is of that form:

\begin{lemma}
\label{lemma-fully-faithful-subcategories}
If $j:\mathcal{D} \to \mathcal{C}$ is fully faithful
then $j \simeq \overline{j^\simeq}$.
\end{lemma}

\begin{proof}
By Lemma
\ref{lemma-full-faithful-implies-underlying-groupoid-map-is-monomorphism}
we know that fully faithful gives monomorphism of underlying groupoids,
which means that we can apply the construction above.
Now, using the diagram above we can factor
$$
\xymatrix{
\mathcal{D}\ar[r]^f\ar@/_1em/[rr]_j
&(j^\simeq)^*\mathcal{C} \ar[r]^{\overline{i}}
&\mathcal{C}
}
$$
(Essentially by definition of pullback.)
Further, by 2-for-3 in for fully faithful morphisms we may
conclude that $f$ is an equivalence.
\end{proof}

\begin{lemma}
\label{lemma-essentially-surjective-orthogonal}
Essentially surjective functors are left orthogonal to fully faithful ones.
\end{lemma}

\medskip\noindent
We are almost done constructing a factorization system!
Consider the functor  $F:\mathcal{C} \to \mathcal{D}$ such that
$F:\mathcal{C}^\simeq X \hookrightarrow \mathcal{D}^\simeq.$
This gives

\section{Equivalences in an infinity-category}
\label{section-equivalences}

For any $\infty$-category we always have
$\mathcal{C} \to \mathsf{Ar}(\mathcal{C})$ induced
from $[1] \to [0]$ by $\mathsf{Fun}(-,\mathcal{C})$.
This is a fully faithful functor (picture).

Then we apply that
$$
\xymatrix{
\mathcal{C}\ar[r]^{\substack{\text{essentially} \\ \text{surjective}}}&
i^*\mathcal{D}\ar[r]^{\substack{\text{fully}\\ \text{faithful}}} & ?
}
$$
for the case
$$
C\xrightarrow{\simeq}\mathsf{Ar}_{\text{eq}}(\mathcal{C})
\hookrightarrow \mathsf{Ar}(\mathcal{C}).
$$
Recall
$$
\xymatrix{
\text{Spaces with a $G$-bundle} \ar[rd] \ar[rr] && \text{Spaces} \\
& \text{Spaces admitting a $G$-bundle}\ar[ur]
}
$$
So th
Then we get 
$$
\text{triangle diagram}.
$$
\begin{lemma}
\label{lemma-equivalence-equivalences}
Suppose $f: x \to y$ is a morphism in an $\infty$-category.
Then the following are equivalent:

\begin{enumerate}
\item $f$ is an equivalence.
\label{item-equiv1}
\item
\label{item-equiv2}
For all $c \in \mathcal{C}$, the morphism
$f_*\mathcal{C}(c,x) \to \mathcal{C}(c,y)$ is
an equivalence of $\infty$-groupoids.
\item 
\label{item-equiv3}
For all $c \in \mathcal{C}$, the morphism
$f^*\mathcal{C}(y,c)\to \mathcal{C}(x,c)$ 
is an equivalence of $\infty$-groupoids.
\end{enumerate}
\end{lemma}

\begin{proof}
2 $\implies$ 1. Put $c=x$ and then $c=y$. We obtain that
$\mathcal{C}(x,x) \simeq \mathcal{C}(x,y)$
and $\mathcal{C}(y,x) \simeq \mathcal{C}(y,y)$.

{\bf Exercise.} Check that $- *$ is ``functorial''.
Consider
$$
\xymatrix{
C(x,y)\ar[r]\ar[d]&\mathcal{C}(c,y)\times \mathcal{C}(x,y)\ar[d]&
\mathcal{C}(c,x)\ar[d]\\
pt\ar[r]_{f}&\mathcal{C}(x,y)\ar[r]&pt
}
$$
where the three squares are pullbacks.
\end{proof}

\begin{lemma}
\label{lemma-groupoid-iff-every-morphism-is-equivalence}
An $\infty$-category $\mathcal{C}$ is an $\infty$-groupoid if
and only if every morphism in $\mathcal{C}$ is an aquicalence.
\end{lemma}

\begin{lemma}
\label{lemma-}
A morphism $f \in \mathsf{Fun}(\mathcal{C},\mathcal{D})$ is an equivalence
if and only if its
\end{lemma}

\begin{exercise}
\label{exercise-2.18}
The statement is equivalent to the fact that
essentially surjective is left orthogonal to 
conservative! [Picture]
\end{exercise}

\section{Monomorphisms of infinity categories}
\label{section-monomorphisms-infty-categories}

\begin{exercise}
\label{exercise-2.19}
Show that the following are equivalent for $F:\mathcal{C} \to \mathcal{D}$:
\begin{enumerate}
\item $F$ is a monomorphism.
\item $F([i]):\mathcal{C}([i]) \to \mathcal{C}([i])$ 
is a monomorphism of $\infty$-groupoids for $i=0,1$.
\item $F$ is right orthogonal to $[i]\amalg[i]\to[i]$ for $i=0,1$.
\end{enumerate}
\end{exercise}

\begin{proof}
For $(1) \implies (2)$ just apply definition
that pullbacks are detected on maps from $[0]$ and $[1]$.

Now $(2) \implies (3)$ is definition of orthogonality on Maps.
\end{proof}

\begin{remark}
\label{remark-only-on-1}
By Observation 2.10.3, it really only matters what happens on $[1]$.
\end{remark}

\begin{exercise}
\label{exercise-2.20}
Use exercise dsadas
\end{exercise}

\begin{proof}
Recall we already proved that
$$
\xymatrix{
E \ar[rd] \ar[rr] && E' \ar[dl] \\
& B
}
$$
then $E \to W'$ is mono iff $F_b \to F'_b$ is mono for all $b \in B$.

Then we have a square with bases $\mathcal{C}[0] \times \mathcal{C}[0]$ 
and $\mathcal{D}[0]\times \mathcal{D}[0]$. But those are different bases!
Then we can construct the pullback
$$
\xymatrix{
pt\ar[r]\ar[d]\ar@{}[dr]|-{\lrcorner}&\mathcal{C}[0]\times\mathcal{C}[0]\ar[d]\\
pt\ar[r]&\mathcal{D}[0]\times\mathcal{D}[0],
}
$$
indeed, it's a pullback {\it when it exists}, since
monomorphisms have fibers that are either empty of points,
but in this case, it cannot be a point (why?!).
\end{proof}

\noindent
Now Some intuition on what is a monomorphism in 1-categories:
if $f\in \mathcal{C}$ is an isomorphism, then $F(f)$ is an isomorphism too.

\begin{lemma}
\label{lemma-monomorphisms-are-conservative}
Monomorphisms are conservative.
\end{lemma}

\begin{proof}
consider
$$
[1] \amalg [1] \to [1] \perp F \implies  [1] \to [0] \perp F.
$$
We want to argue that $[1] \to [0]$ is a retract of
$[0] \amalg [1]\to [0]$.

$$
\xymatrix{
[1]\ar[d]\ar[r]^f&[0]\ar[d]\\
[1] \amalg [1]\ar[r]^{f \amalg \text{id}}\ar[d]^{\text{id} \amalg \text{id}}&
[0] \amalg[1]\ar[d]^{\text{left. o. to }F}\\
[1]\ar[r]& [0]
}
$$
Then the upper square is a pushout.
The outer square it's all identities, so it's also a pushout.
This gives that the two vertical lower arrows
are orthogonal to each other.
That's equivalent to the diagram in Observation 2.10.3.
\end{proof}

\begin{lemma}
\label{lemma-fully-faithful-are-conservative}

\end{lemma}

\begin{proof}
Use that monomorphism iff monomorphism on groupoids
and on mapping spaces.
\end{proof}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}

