\input{preamble}

\begin{document}

\title{Complex Geometry}
\maketitle

\phantomsection
\label{section-phantom}
\hfill
\href{http://github.com/danimalabares/stack}{github.com/danimalabares/stack}

\tableofcontents

\section{Complex manifolds}
\label{section-complex-manifolds}

\begin{definition}
\label{definition-complex-manifold}
A {\it complex manifold} $M$ is a smooth manifold admitting an open cover
$\{U_\alpha\}$ and coordinate maps $\varphi_\alpha:U_\alpha\to\mathbb{C}^n$ such
that $\varphi_\alpha\circ\varphi_\beta^{-1}$ is holomorphic on
$\varphi_\beta(U_\alpha\cap U_\beta)\subset\mathbb{C}^n$ for all $\alpha,\beta$.
\end{definition}

\begin{definition}
\label{definition-holomorphic-function-on-complex-manifold}
A function on an open set $U\subset M$ is {\it holomorphic} if for all $\alpha$,
$f\varphi_\alpha^{-1}$ is holomorphic on 
$\varphi_\alpha(U\cap U_\alpha)\subset\mathbb{C}^n$.
\end{definition}

\begin{lemma}
\label{lemma-holomorphic-function-sheaf}
The sheaf $\mathcal{O}_M$ of holomorphic functions is a sheaf.
\end{lemma}

\section{Hodge decomposition}
\label{section-hodge-decomposition}

\noindent
The upshot is the following:
$$
T^2(V \oplus  W)=
T^2(V)\otimes T^0(W)
\oplus T^1(V)\otimes T^1(W)
\oplus T^0(V)\otimes T^2(W).
$$
Explicitly, the decomposition of a general element on the LHS is
\begin{align*}
(v_1,w_1)\otimes(v_2,w_2)
&=(v_1,0)\otimes(v_2,w_2)+(0,w_1)\otimes(v_2,w_2)\\
&=(v_1,0)\otimes(v_2,0)+(v_1,0)\otimes(0,w_2)\\
&+(0,w_1)\otimes(v_2,0)+(0,w_1)\otimes(0,w_2)
\end{align*}
which is valid because the tensor product of a vector space
$T^2X$ is just the pairs $x \otimes y$ subject
to relations that $(x_1+x_2)\otimes y=x_1 \otimes y+x_2\otimes y$
and addition for $y$ and scalar product.
So we just identify elements
\begin{align*}
(v_1,0)\otimes(v_2,0) &\xymatrix{\ar@{<~>}[r]&}
v_1 \otimes v_2 \in T^2(V) \otimes T^0(W):=T^{2,0}(V \oplus W)\\
(v_1,0)\otimes(0,w_2) &\xymatrix{\ar@{<~>}[r]&}
v_1 \otimes w_2 \in T^1(V) \otimes T^1(W):= T^{1,1}(V\oplus W)\\
(0,w_1)\otimes(v_2,0) &\xymatrix{\ar@{<~>}[r]&}
w_1 \otimes v_2 \in T^1(W) \otimes  T^1(V)
\cong T^1(V) \otimes  T^1(W):=T^{1,1}(V\oplus W)\\
(0,w_1)\otimes(0,w_2) &\xymatrix{\ar@{<~>}[r]&}
w_1\otimes w_2 \in T^0(V) \otimes T^2(W):=T^{0,2}(V \oplus  W).
\end{align*}

\noindent
We have proved that any element in $T^2(V \oplus W)$ 
can be written as an element in the vector space
$T^2(V)\otimes T^0(W)
+ T^1(V)\otimes T^1(W)
+ T^0(V)\otimes T^2(W)$.
Since the intersection of the factors is disjoint,
the sum can be taken direct.

\medskip\noindent
Notice that we have two copies of $T^{1,1}(V\oplus W)$.
By the binomial theorem and isomorphisms
of the kind $A \otimes B \cong B \otimes A$,
we readily see that
 $$
T^k(V \oplus W)
\cong \bigoplus_{p+q=k}\binom{k}{p}T^p(V)\otimes T^q(W).
$$
Of course the binomial coefficient matters little
when the underlying field is $\mathbb{C}$.

The next step is to take the quotient on the LHS
by the relation $v \otimes v=0$,
i.e., the ideal generated by $v \otimes v$.
When we compute $(v_1,w_1)\otimes(v_1,w_1)$ 
as above,
this relation becomes $v_1 \otimes v_1=0$ 
and $w_1\otimes w_2=0$ on the first and last components.
If we want the middle component to vanish as well
we must ask that the isomorphism 
$T^1(W) \otimes  T^1(V)\cong T^1(V) \otimes  T^1(W)$
exchanges sign. Then we obtain that
$$
\Lambda^2(V \oplus W)
=\Lambda^{2,0}(V\oplus W)
\oplus\Lambda^{1,1}(V\oplus W)
\oplus\Lambda^{0,2}(V \oplus W)
$$
by defining $\Lambda^{p,q}(V \oplus W):=\Lambda^p(V)\otimes \Lambda^q(W)$.

To make sure that this generalizes to all $p,q$ 
write, e.g. $p+q=3$,
\begin{align*}
(v_1,w_1)\otimes(v_1,w_1)\otimes(v_1,w_1)
&=(v_1,0)\otimes(v_1,0)\otimes(v_1,0)\\
&+(v_1,0)\otimes(v_1,0)\otimes(0,w_1)\\
&+…
\end{align*}

\noindent
so that imposing the relation $v \otimes v$ on $T^3(V \oplus W)$
implies imposing it on every factor.
[Further arguments needed here… but looks like just boring computations…]

\medskip\noindent
The main result of Hodge theory is that
when we take $T^{1,0}(M)\oplus T^{0,1}(M)$,
the eigenspaces of the complex structure
and pass to complex singular cohomology we get
\begin{equation}
\label{equation-hodge-theorem}
H^{k}(M,\mathbb{C})
=\bigoplus_{p+q=k}H^{p,q}(M)
\end{equation}

\noindent
where $H^{p,q}(M)$ is the set of differential forms
represented by a closed form in $\Lambda^{p,q}(M)$.

\medskip\noindent
Missing: what does it even mean that
$\overline{\Lambda^{p,q}(V)}=\Lambda^{q,p}(V)$?
Recall that $\overline{V}$ is just $V$ but 
with the scalar product $\lambda v:=\bar{\lambda}v $.

\begin{exercise}
\label{exercise-1,1-forms-are-i-invariant}
Show that $(1,1)$-forms are invariant under the action of
the complex structure $I$.
And conversely, a 2-form is of type $(1,1)$ 
only if it is $I$-invariant.
\end{exercise}

\begin{proof}
Let $\alpha,\beta \in \Lambda^{1,1}(M)$.
Recall that $\Lambda^{1,1}(M)=\Lambda^{1,0}(M)\otimes\Lambda^{0,1}(M)$.
For any vectors $v,w$ tangent to some point $p \in M$,
\begin{align*}
I(\alpha\wedge\beta)(v,w)
&=(\alpha\wedge\beta)(Iv,Iw)\\
&=\alpha(Iv)\beta(Iw)-\beta(Iv)\alpha(Iw)\\
&=-\sqrt{-1}\sqrt{-1}(\alpha(v)\beta(w)-\beta(v)\alpha(w))\\
&=\alpha(v)\beta(w)-\beta(v)\alpha(w)\\
&=(\alpha\wedge\beta)(v,w).
\end{align*}

\noindent
The converse follows easily by the direct sum
splitting of $\Lambda^2(M)$ and noting that
a $(2,0)$ or $(0,2)$-form $\gamma$ 
satisfies $I\cdot\gamma(v,w)=-\gamma(v,w)$ 
in an analogous computation.
\end{proof}

\noindent
In particular this implies that $\omega$,
the fundamental form of the Riemannian metric $g$ 
and the complex structure $I$ is a $(1,1)$-form.
So this shows that Kähler classes are in $H^{1,1}(M)$.

\section{Hodge star}
\label{section-Hodge-star}

The construction of the Hodge star in  \cite[Section 5.1]{Voisin}
is essentially: map $\alpha \in \Lambda^{n-k}$ to the operator 
$\alpha \wedge - \in \Hom(\Lambda^{k},\Lambda^n)$
and then use the metric to identify $\Hom(\Lambda^k,\Lambda^n)$
with $\Lambda^k$. Notice that the latter
means that we take a form $\alpha$ and
we map it to the morphism
which maps $\cdot$ to the top-form 
$g(\alpha,\cdot)\text{Vol}$.
This says that for all $\alpha \in \Lambda^k$ 
and $\beta \in \Lambda^{n-k}$
\begin{equation}
\label{equation-Hodge-star}
\alpha\wedge*\beta=(\alpha,\beta)\text{Vol}.
\end{equation}

\begin{lemma}
\label{lemma-Hodge-star-squared}
\begin{reference}
\cite[Lemma 5.5]{Voisin}
\end{reference}
The operator $*$ satisfies the identity
\begin{equation}
\label{equation-Hodge-star-squared}
*^2=(-1)^{k(n-k)} \text{ on }A^k(X).
\end{equation}
\end{lemma}

\begin{proof}
Observe that $*$ is an isometry,
use skew-commutativity of product to obtain
the $(-1)^{k(n-k)}$
and finally Equation \ref{equation-Hodge-star}.
\end{proof}

\section{Riemann surfaces}
\label{section-Riemann-surfaces}

\begin{definition}
\label{definition-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
A {\it meromorphic function on a Riemann surface} is a holomorphic map to the
Riemann sphere which is not identically equal to $\infty$.
\end{definition}

\begin{definition}
\label{definition-pole-of-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
A {\it pole} of a meromorphic function on a Riemann surface is any point $x$ 
such that $F(x)=\infty$.
\end{definition}

\begin{definition}
\label{definition-pole-of-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
The {\it order} of a pole of a meromorphic function on a Riemann surface is the
integer $k_x$ such that the coordinate representation of $f$ is $f(x)=z^{k_x}$
near $x$.
\end{definition}

\begin{proposition}
\label{proposition-degree-is-constant}
\begin{reference}
\cite[p. 46]{Donaldson}
\end{reference}
Let $F:X\to Y$ be a proper, non-constant holomorphic map between connected
Riemann surfaces. Then the integer $d(y)=\# f^{-1}(y)$ does not depend on $y \in
Y$.
\end{proposition}

\begin{proof}
Using local representation of $f$ as $z^k$. But see also \ref{MilnorDT}: this
number is locally constant because we can find a neighbourhood $V$ of any point 
$y$ such that any other $y'$ in this neighbourhood has the same number of
preimages. Using compactness fix neighbourhoods $U_i$ of all the preimages of 
$y$, using that $y$ is a regular value we may suppose the $f$ is a
diffeomorphism at the $U_i$, and then define 
$V:=\cap V_i\setminus f(M\setminus\cup U_i)$.
\end{proof}

\begin{lemma}
\label{lemma-meromorphic-function-with-one-pole-of-order-1-gives-Riemann-sphere}
Let $X$ be a compact Riemann surface. If there is a meromorphic function on $X$
having exactly one pole, and that pole has order 1, then $X$ is equivalent to
the Riemann sphere.
\end{lemma}

\begin{proof}
A meromorphic function has no critical points! That is, $\infty$ is a regular
value, having one preimage by hypothesis. Then the degree of $f$ is one, so that
it must be a bijection (why?). And it has no crticial points… (why?) So by Lemma
something, its inverse must be holomorphic.
\end{proof}

\begin{exercise}
\label{exercise-canonical-bundle-of-Riemann-surface-has-no-base-points}
Show that the canonical bundle $K$ of a Riemann surface $S$ has no base points.
\end{exercise}

\begin{proof}
Suppose $p$ is a base point of $K$. We want to construct a meromorphic function
with exactly one pole and use Lemma
\ref{lemma-meromorphic-function-with-one-pole-of-order-1-gives-Riemann-sphere}
to arrive at a contradiction. Any such function is an element of
$H^{0}(\mathcal{O}(p))$. Note that by Serre duality we have:
$$
H^{0}(\mathcal{O}(p))=H^{0}(\mathcal{O}(p)\otimes K^*\otimes K)
=H^{1}(K(-p))^*
$$
So it's enough to show that $H^{1}(K(-p))$ is not zero. So consider the sheaf 
exact sequence twisted by the ideal sheaf $\mathcal{I}_p=\mathcal{O}_S(-p)$ 
of $p$:
$$
\xymatrix{
0\ar[r]&K(-p)\ar[r]&K\ar[r]&K(p)\ar[r]&0
}
$$
Then we use the exact sequence in cohomology to prove that $H^{1}(K(-p))$ is not
zero. First, $H^{1}(K(p))=0$ because by Serre duality it has the same dimension
as the space of holomorphic functions vanishing at $p$, which is only the zero
function since $M$ is compact. Next, $H^{1}(K)$ is not zero because by Dolbeault
theorem it is $H^{1,1}(M,\mathbb{R})$ which contains real 2-forms. Then
$H^{1}(K(-p))$ cannot be zero because it surjects onto a nontrivial space.
\end{proof}

\section{Belyi functions}
\label{section-Belyi-functions}

To understand Belyi functions we start by considering meromorphic functions
$f:X\to \mathbb{C}P^{1}$ as ramified coverings:

\begin{proposition}
\label{proposition-meromorphic-functions-are-ramified-coverings}
\begin{reference}
\cite[Proposition 1.8.9]{Lando}
\end{reference}
A nonconstant meromorphic function $f:X\to\mathbb{C}P^{1}$, considered as a
mapping of the underlying topological space, is a ramified covering of the
sphere $S^2\cong\mathbb{C}P^{1}$.
\end{proposition}

Be careful: isomorphic complex ramified coverings produce isomorphic Riemann
surfaces (by definition), but the converse is certainly false. The same Riemann
surface may be obtained by many different and pairwise non-isomorphic coverings.
Just consider different meromorphic functions on the same surface.

\medskip\noindent

The following paragraph is an approximate quote:

Proposition \ref{proposition-meromorphic-functions-are-ramified-coverings}, and
the fact that every Riemann surface admits a meromorphic function (which can be
seen by Riemann-Roch, cf. \cite[Fact 1.8.6]{Lando}) show that every Riemann
surface may be represented by a ramified covering of $\mathbb{C}P^{1}$. The
following theorem, which affirms the converse statement, is one of the most
fundamantal:

\begin{theorem}[Riemann's existence theorem]
\label{theorem-Riemann-existence}
\begin{reference}
\cite[Theorem 1.8.14]{Lando}
\end{reference}
Suppose a base star is fixed in $\mathbb{C}P^{1}$, and the squence of its
terminal vertices is $R=[y_1,\ldots,y_k]$. Then for any constellation
$[g_1,\ldots,g_k]$, $g_i \in S_n$, there exists a compact Riemann surface $X$
and a meromorphic function $f:X \to \mathbb{C}P^{1}$ such that $y_1,\ldots,y_k$
are the critical values of $f$ (i.e. $f'$ vanishes at these points) and
$g_1,\ldots,g_k$ are the corresponding monodromy permutations. The ramified
covering $f:X\to \mathbb{C}P^{1}$ is independent of the choice of the base star
in a given homotopy type and is unique up to isomorphism.
\end{theorem}

\begin{proof}
The heart of this theorem is the correspondence between constellations, which
are abstract sets of permutations whose product is the identity and act
transitively on the set of $n$ elements (and are also maps on surfaces), and the
monodromy group of a covering. Indeed: for a regular point $y_0$ of a degree-$n$
convering we get an action of the symmetric group of $n$ elements on the fiber
$E:=\pi^{-1}(y_0)$; taking each generator of the fundamental group to be any of
these permutations we obtain a constallation (cf \cite[Construction
1.2.13]{Lando}.

The other way around, \cite[Proposition 1.2.15]{Lando}, we can define a group
homomorphism $\pi(S^2\setminus\{p_i\},y_0)\to G$ where $G$ is the group of the
constellation; the fact that the it is indeed a group homomorphism is due to the
fact that both sets of generators satisfy the property that their product is
identity. Then for any point $x$ in the set of $n$ elements we can consider its
stabilizer. This corresponds to a subgroup $M_x$ of
$\pi(S^2\setminus\{p_i\},y_0)$. Such a subgroup determines a finite-sheeted
covering of $S^2\setminus\{p_i\}$. The covering is connected since $G$ acts
transitively on $E$. {\it Habemus superficie}.
\end{proof}

The surprising result by Belyi is that for the case $k=3$ it will happen that
the corresponding Riemann surfaces will be defined over $\overline{\mathbb{Q}}$,
the field of algebraic numbers. Therefore, the absolut Galois group
$\text{Aut}(\overline{\mathbb{Q}}|\mathbb{Q})$ (that is, the automorphism group
of the field $\overline{\mathbb{Q}}$) acts on them, and thus on
$3$-constellations as well. The mysterious nature of the group and the
simplicity of the objects on which it acts, gave rise to the following term
which may look a bit strange: {\it theory of dessins d'enfants}.

\begin{definition}
\label{definition-Riemann-surface-defined-over-field}
\begin{reference}
\cite[Definition 1.8.8]{Lando}
\end{reference}
If it is possible to realize a Riemann surface $X$ by a system of equations with
coefficients in a subfield $K\subseteq\mathbb{C}$, then we say that $X$ is {\it
defined over $K$}.
\end{definition}

\begin{theorem}[Belyi]
\label{theorem-Belyi}
\begin{reference}
\cite[Theorem 2.1.1]{Lando}
\end{reference}
A Riemann surface $X$ admits a model over the field $\overline{ \mathbb{Q}}$ of
algebraic numbers if and only if there exists a covering $X\to \overline{
\mathbb{C}}$ unramified outside $\{0,1,\infty\}$. In such a case, the
meromorphic function $f$ can also be chosen in such a way that it will be
defined over $\overline{\mathbb{Q}}$.
\end{theorem}

\section{Sheaf of holomorphic functions}
\label{section-sheaf-of-holomorphic-functions}

For a definition of sheaf
see Algebraic Geometry Definition 
\ref{algebraic-geometry-definition-sheaf}.

\begin{lemma}
\label{lemma-O_X-is-a-sheaf}
Let $X$ be a complex manifold of complex dimension $n$.

The functor
\begin{align*}
\mathcal{O}_X: \mathit{Open}_X^{\text{op}} &\longrightarrow \mathit{Set}
\\
U &\longmapsto \mathcal{O}_X(U):=\{f:U\to \mathbb{C}^n:
f \text{ is holomorphic}\}\\
i:V \hookrightarrow V &\longmapsto 
\mathcal{O}_X(i):\mathcal{O}_X(U) \to \mathcal{O}_X(V)
\end{align*}
where $\mathcal{O}_X(i)$ is given by restriction,
is a sheaf.
\end{lemma}

\begin{proof}
$\mathcal{O}_X$ is a presheaf,
i.e. a functor,
by definition: restriction
maps the identity to the identity
and preserves compositions.

To check the condition of being a sheaf let
$U_i$ be an open cover of some open set $U$ of $X$
and $f_i:U_i \to X$ sections of $\mathcal{O}_X(U_i)$,
that is, holomorphic functions, which
coincide pairwise in intersections.
Then it is obvious that the function $f:U \to \mathbb{C}$,
$x \mapsto f_i(x)$ for any $U_i \ni x$ 
is well defined. It is also holomorphic
since holomorphicity is a condition defined on
open sets.
\end{proof}

\section{Analytic sets}
\label{section-analytic-sets}

\begin{definition}
\label{definition-analytic-subvariety}
\begin{reference}

\end{reference}
An {\it analytic set} or {\it subvariety} $Y$ 
is a subset of a complex manifold $X$
given locally as the zeros of a finite collection of holomorphic functions.
\end{definition}

\begin{lemma}
\label{lemma-structure-sheaf-of-subvariety}
Let $Y \subset X$ be an analytic subvariety
of a complex manifold $X$
equipped with the subspace topology.
Then
\begin{align*}
\mathcal{O}_Y: \mathit{Open}_Y^{\text{op}} &\longrightarrow \mathit{Set} \\
U\cap Y &\longmapsto \{f|_{U \cap Y}:f \in \mathcal{O}_X(U)\}
\end{align*}

\noindent
is a sheaf.
\end{lemma}

\begin{proof}
This is a presheaf for the same reasons as
the sheaf $\mathcal{O}_X$ is a presheaf.
The fact that it is a sheaf follows
from the fact that $\mathcal{O}_X$ is a 
sheaf and by definition of subspace topology;
namely for any family of functions
defined over an open cover $\{U_i \cap Y\}$
of some open set  $U\cap Y$ we can reconstruct a function
on $U$ that restricted to $U \cap Y$ is as desired.
\end{proof}

Recall that any map of sheaves of groups
has well-defined kernel, see Lemma
\ref{algebraic-geometry-lemma-sheaves-valued-on-groups-have-kernels}.

\begin{definition}
\label{definition-ideal-sheaf}
Let $Y \subset X$ be an analytic subvariety
of a complex manifold $X$.
The {\it ideal sheaf} of $Y$, denoted $\mathcal{I}_Y$,
is the kernel
of the restriction map $\mathcal{O}_X \to \mathcal{O}_Y$.
\end{definition}

\noindent
This just says that $\mathcal{I}_X(U)$ is the
set of functions $f \in \mathcal{O}_X$ that
vanish under the restriction map, i.e.
that vanish at points of $Y$.

Since the restriction map is surjective, 
we have the following short exact sequence:
$$
\xymatrix{
0\ar[r]&\mathcal{I}_Y\ar[r]&\mathcal{O}_X\ar[r]&\mathcal{O}_Y\ar[r]&0
}
$$

\medskip\noindent
Notice that for any open set $U\subset X$,
$\mathcal{I}_Y(U)$ is an ideal of $\mathcal{O}_X(U)$. (Indeed,
if a function vanishes at $Y$ then its product
with any other function will also vanish.)

\begin{definition}
\label{definition-irreducible-variety}
An analytic variety $V\subset U\subset \mathbb{C}^n$ is {\it irreducible} if
$V$ cannot be written as the union of two distinct analytic varieties 
$V_1,V_2\subset U$, both distinct to $V$.
\end{definition}

\begin{lemma}
\label{lemma-irreducible-analytic-hypersurface-irreducible-polynomial}
If $V$ is an irreducible analytic hypersurface given locally as $V=\{f=0\}$, 
then $f$ is irreducible in $\mathcal{O}_p$.
\end{lemma}

\begin{proof}
If $f=gh$ and neither of $g$ and $h$ are units and they are distinct, we could 
express $V$ as the union of two distinct varieties: $V(g)$ and $V(h)$. (If one 
of them, was a unit then the vanishing set would be all of $U$.)
\end{proof}

\begin{definition}
\label{definition-germ-of-set}
\begin{reference}
\cite[Definition 1.1.21]{huc}
\end{reference}
The {\it germ} of a set in the origin $0\in \mathbb{C}^n$ is given by a subset
$X \subset \mathbb{C}^n$. To subsets $X,Y$ define the same germ if there exists
an open neighbourhood $0 \in U\subset \mathbb{C}^n$ with $U\cap X=U\cap Y$. A
germ is called {\it analytic} if there are functions $f_1,\ldots,f_k\in
\mathcal{O}_n$ such that $X$ and $Z(f_1,\ldots,f_k)$ define the same germ.
\end{definition}



\medskip\noindent
Now the adventure of proving that the ideal
sheaf is a line bundle for hypersurfaces begins.

See Algebraic Geometry Lemma 
\ref{algebraic-geometry-lemma-ideal-sheaf-is-line-bundle-schemes}
for the proof that the ideal sheaf of an irreducible codimension-1
closed subscheme of a smooth scheme is a line bundle.
Now I will try to prove this for the case of an analytic subvariety
of a (smooth) complex manifold.

First notice that in
the case that $Y$ is an irreducible subvariety,
this ideal is prime: if $fg \in \mathcal{I}_Y(U)$,
then $V(f) \cup  V(g) \supset Y\cap U$ 
so that $(V(f) \cup  V(g))\cap Y = Y\cap U$,
and then it must be true that $V(f)\cap Y\subseteq V(g)\cap Y$
or that $V(f)\cap Y \supseteq V(g)\cap Y \cap U$
since $Y$ is irreducible, and thus, say,
$V(f)\supseteq Y \cap U$,
that is, $I(V(f))\subseteq Y \cap U$
so that $f \in I(Y \cap U)$.

If we further ask that $Y$ is a hypersurface,
we want to show that $\mathcal{I}_Y$ is locally principal.
If $f \in \mathcal{I}_Y(U)$ is the 
defining function of some hypersurface
$Y$ of a variety $X$ on an open set $U \subset X$,
we shall have that $\mathcal{I}_Y(U)=(f)$. 
That is, if $g$ also vanishes at $Y\cap U$,
we want to see that $g = fh$ for some $h \in \mathcal{O}_X(U)$.

By Stacks Project \href{https://stacks.math.columbia.edu/tag/0AFT}{0AFT}
we need two ingredients:
(1) the fact that the ring $\mathcal{O}_X(U)$ is a UFD for all $U \subset X$
and (2) the following lemma.

\begin{lemma}
\label{lemma-ideal-of-irreducible-hypersurface-is-height-1-prime}
The ideal of an irreducible analytic hypersurface is a height-1 prime ideal.
\end{lemma}

\begin{proof} 
The fact that it is prime comes from the fact that $Y$ is
irreducible as explained above.

Now suppose that $0 \subset \mathfrak{p} \subseteq I$.
Then $V(\mathfrak{p})$ is an analytic variety that contains $Y$.
At regular points of both $V(\mathfrak{p})$ and $Y$, 
both are smooth manifolds, but since $Y$ is of codimension 1 and 
$V(\mathfrak{p})$ does not equal all of  $Y$, 
we conclude that they coincide. 
Thus, in a neighbourhood
of a regular point we have $\mathfrak{p}=I(V(\mathfrak{p}))=I$ by the
holomorphic Nullstellensatz \ref{algebra-Nullstellensatz}.
\end{proof}

Now we shall use the Gauss Lemma 
\ref{number-theory-lemma-Gauss} to prove:

\begin{lemma}
\label{lemma-stalk-is-UFD}
The stalk $\mathcal{O}_n:=\mathcal{O}_{\mathbb{C}^n,0}$ is a UFD.
\end{lemma}

\begin{proof}
By induction on $n$. For $n=0$ it is trivial. Suppose $\mathcal{O}_{n-1}$ is a
UFD. Then by the Gauss Lemma 
\ref{number-theory-lemma-Gauss}, $\mathcal{O}_{n-1}[w]$ is a UFD
too. Thus we may express any Weierstrass polynomial $g$ as a product of
irreducible elements (uniquely up to multiplication by units).

Let $f\in \mathcal{O}_n$. We want to express $f$ as a product of (unique up to
multiplication by units) of irreducible elements. By Weierstrass Preparation
Theorem \ref{theorem-Weierstrass-preparation} there is a Weierstrass polynomial
$g\in\mathcal{O}_n[w]$ and a holomorphic function not vanishing on $0$ (i.e. a
unit of $\mathcal{O}_n$) such that $f=gh$. By the previous remark $g$ is
factored uniquely up to multiplication by units as $g=g_1\ldots g_m$. This shows
existence of the factorization.

To prove uniqueness suppose that $f=f_1\ldots f_k$ for some irreducible
$f_1,\ldots,f_k\in\mathcal{O}_n$. Since $f$ does not vanish in the $w$ axis,
neither can each $f_i$, so that we may decompose each of them as  $f_i=g_i'h_i$
by Weierstrass Preparation Theorem. Since $f_i$ is irreducible, it follows that
$g_i'$ is irreducible. Then we have that $$ f=gh=\prod g_i'\prod h_i $$ so by
uniqueness in Weierstrass Preparation Theorem we conclude that $g=\prod g_i'$,
and by uniqueness from the fact that  $\mathcal{O}_n[w]$ is a UFD we conclude
that $g$ coincides with $\prod g_i'$ up to multiplication by units.
\end{proof}

\begin{lemma}
\label{lemma-ideal-sheaf-is-line-bundle-analytic-varieties}
The ideal sheaf of an irreducible codimension-1 analytic subvariety of a smooth
complex manifold is a line bundle.
\end{lemma}

\begin{proof}
By definition, our subvariety $Y$ is locally defined by the zeroes of a single 
holomorphic function defined on the ambient manifold $X$. That is,
at every $p\in Y$ there is an open set $U\subset X$ such that $U\cap
Y=f^{-1}(0)$ for some $f\in\mathcal{O}_X(U)$. Since $U$ is an open set of a
complex manifold, the ring $\mathcal{O}_X(U)$ is isomorphic to the ring
$\mathcal{O}_n$ of holomorphic functions on $\mathbb{C}^n$ in a neighbourhood of
the origin; that's by Definition 
\ref{complex-analysis-definition-holomorphic-function} since a
holomorphic function on a manifold is defined as such if its composition with
the coordinate chart is a holomorphic function on $\mathbb{C}^n$.

By Lemma
\ref{lemma-irreducible-analytic-hypersurface-irreducible-polynomial}, since $Y$
is irreducible it follows that $f$ is irreducible and so is the ideal of
functions vanishing on $Y$.

By Lemma \ref{lemma-stalk-is-UFD}, we prove identically as in Lemma 
\ref{algebraic-geometry-lemma-ideal-sheaf-is-line-bundle-schemes} 
that the ideal of functions
vanishing on $Y$ is principal.
\end{proof}

\noindent
Note the that argument actually works backwards if we assume
the ambient ring is Noetherian,
see Stacks Project \href{https://stacks.math.columbia.edu/tag/0AFT}{0AFT}.

\begin{definition}
\label{definition-sheaf-associated-to-effective-Cartier-divisor}
Let $D:=S$ be an effective Cartier divisor, that is, an analytic hypersurface of
a complex manifold. The ideal sheaf $\mathcal{I}_S:=\mathcal{O}_X(-S)$ of $S$ is
the dual line bundle of the {\it line bundle associated to the divisor $D$},
which is denoted by $\mathcal{O}_X(D)$.
\end{definition}

\section{Hilbert's Nullstellensatz}
\label{section-nullstellensatz}

\noindent
Usually I think of Hilbert's Nullstellensatz
as the statement that $I(V(I))=\sqrt{I}$.
Following are two simple initial observations.

It is immediate that $\sqrt{\mathfrak{p}}=\mathfrak{p}$
if $\mathfrak{p}$ is a prime ideal (of any ring):
if  $f^k \in \mathfrak{p}$ then
either $f \in \mathfrak{p}$ or $f^{k-1}\in \mathfrak{p}$,
etc.

It is also easy to see that
for any ideal $I$ of functions or germs of functions
(i.e. either  $I \subset \mathcal{O}_X(U)$
or $I \subset \mathcal{O}_n$)
we have
$\sqrt{I}\subseteq I(V(I))$.
Indeed, if $f^k \in I$,
then $f^k(x)=0$ for all $x \in V(I)$,
and since $\mathbb{C}$ has no nonzero divisors
we see that $f(x)=0$,
that is $f \in I(V(I))$.

It remains to show that $I(V(I)) \subseteq \sqrt{I}$.
We shall first suppose that  $I$ is prime
and prove that $I(V(I)) \subseteq I$.
(The complete statement for the radical follows
from a purely algebraic process,
see \cite[Theorem 4.22]{Demailly}.)

We will need a few preparatory results.
First recall that $S$ is an integral ring over $R$ 
if every element of $S$ is expressed as
a root of a monic polynomial with coefficients in $R$.
(See Stacks Project \href{https://stacks.math.columbia.edu/tag/00GI}{00GI}.)

It will be handy to keep in mind the following lemma
(Stacks Project \href{https://stacks.math.columbia.edu/tag/00GH}{00GH}):

\begin{lemma}
\label{lemma-characterize-finite-in-terms-of-integral}
Let $R \to S$ be a ring map. The following are equivalent
\begin{enumerate}
\item $R \to S$ is finite,
\item $R \to S$ is integral and of finite type, and
\item there exist $x_1, \ldots, x_n \in S$ which generate $S$ as an
algebra over $R$ such that each $x_i$ is integral over $R$.
\end{enumerate}
\end{lemma}

\noindent
This essentially says that an integral extension
$R \to S$ gives $S$ the structure of a finitely generated $R$-module
(I think experts call this a ``finite $R$-module'')
whose generators are integral.
This just means that $S=R[x_1,\ldots,x_k]$
and $x_i \in S$ is the root of a monic polynomial in $R$.

\begin{proposition}
\label{proposition-integral-extension}
$\mathcal{O}_n/\mathcal{I}$ is a
finite integral extension of $\mathcal{O}_d$.
\end{proposition}

\begin{proof}
For this it's enough to check that
the map $\mathcal{O}_d \to \mathcal{O}_n/\mathcal{I}$ 
is finite.
That is, that every element of $\mathcal{O}_n/\mathcal{I}$ 
can be expressed as a tuple of elements
of $\mathcal{O}_d$. 
(We can think of this tuple
as a linear combination, or cycle.)
Step 1: produce some Weierstrass polynomials…
\end{proof}

\begin{lemma}
\label{lemma-nullstellensatz}
\begin{reference}
\cite[Lemma 4.21]{Demailly}
\end{reference}
If $\mathcal{I} \subset \mathcal{O}_n$ is prime and
$A = V(\mathcal{I})$, then
$\mathcal{I}_{A,0}=\mathcal{I}$.
\end{lemma}

\begin{proof}
Proposition \ref{proposition-integral-extension}
says: take a polynomial $f \in \mathcal{O}_n$
and consider its equivalence class $\tilde{f}\in\mathcal{O}_n/\mathcal{I}$.
Then $\tilde{f}$ is the root of some monic polynomial 
$t^r+b_{r-1}t^{r-1}+\ldots+b_1t+b_0$
with $b_i \in \mathcal{O}_d$.
That is, putting $f$ instead of $t$ we get an equation
$$
f^r+b_1f^{r-1}+\ldots+b_r=0\qquad \text{mod }\mathcal{I}.
$$
In other words, the holomorphic function
$f^r+b_1f^{r-1}+\ldots+b_r$ is in  $\mathcal{I}$.
Since $f$ vanishes on $(A,0)$,
this says that $b_r$ vanishes in $(A,0)$ too.
Now suppose that this implied that the class $\tilde{b_r}=0$.
We are supposed to use that Proposition \ref{proposition-integral-extension}
also tells us is that the above equation is irreducible,
which I think means that $F=\sum b_it^i \in \mathcal{O}_d[t]$
is irreducible.
In turn this gives that $r=1$.
\end{proof}


\medskip\noindent
Let's just store what was learned today:
\begin{enumerate}
\item {\bf Noether normalization lemma.} 
See \href{https://www.youtube.com/watch?v=VWWoG_4XVvs}
{this video}.
Let $k$ be a (infinite) field,
$A \neq 0$ a finitely generated $k$-algebra.
Then there exists elements $y_1,\ldots,y_r \in A$ 
which are algebraically independent over $k$ 
and such that $A$ is integral over $k[y_1,\ldots,y_r]$.
That is,
$$
\xymatrix{
A\ar@{-}[d]^{\substack{\text{integral} \\ \text{ext.}}}\\
k[y_1,\ldots,y_r]\ar@{-}[d]^{\substack{\text{transc.} \\ \text{ext.}}}\\
k.
}
$$

\item This can be used to prove the weak Nullstellensatz, i.e.
let $k$ be an algberaically closed field, and $I \subseteq k[x_1,\ldots,x_n]$ 
an ideal such that $V(I)=\emptyset$. Then $I=k[x_1,\ldots,x_n]$.

To prove it using Noether's normalization lemma,
suppose that the $I\neq k[x_1,\ldots,x_n]$.
Let $\mathfrak{m}$ be a maximal ideal such that $I \subseteq \mathfrak{m}$.
Then $A=k[x_1,\ldots,x_n]/\mathfrak{m}=k[y_1,\ldots,y_n]$,
where the first string is algebraically independent
while the last string is integral. But because the 
whole extension is algebraic, then $y_1,\ldots,y_n$ 
are integral over $k$.
Then we can map $y_i \mapsto \alpha_i$, a root
of its defining polynomial over $k$.
This means we do have a point where all polynomials
in $\mathfrak{m}$ vanish.

{\bf Note.} I'm not sure what we mean with "the first string"
and the "second string".

\item Also reviewed Misha's proof of the Nullstellensatz.
Looks accessible, though it is not holomorphic!

\item Perhaps start in Demailly just after Prop. 4.13.
\end{enumerate}

\section{Line bundles}
\label{section-line-bundles}

\noindent
I have followed mostly \cite{GH} for this, and also
some \cite{lec}.

For a smooth hypersurface $X \subset Y$
locally defined as the vanishing of $f_i \in \mathcal{O}_Y(U_i)$
for an open cover $U_i$ of $Y$,
we define the line bundle $\mathcal{O}_Y(X)$
by the cocycle $f_{ij}:=f_i/f_j$.

We may also see $\mathcal{O}_Y(X)$ as a locally free sheaf
by assigning to $U_i$ the group of holomorphic sections of $\mathcal{O}_Y(X)$.
As explained in  \cite[p. 138]{GH},
tensoring by a section with divisor $X$
gives an identification between this group of
sections and the meromorphic sections on $M$ 
with poles along $X$.
Ultimately this means that the sheaf
corresponding to $\mathcal{O}_Y(X)$ is locally
generated by $1/f_i$.

In turn this means that its dual, denoted $O_Y(-X)$,
is a line bundle defined by the cocycle $(f_i/f_j)^{-1}$
and a locally principal sheaf generated by $f_i$,
that is, the ideal sheaf of $X$.




\section{Singularities and dimension}
\label{section-singularities-and-dimension}

The key statement is that the set of smooth
points of a complex variety is dense. 

\section{Riemann-Roch formulas}
\label{section-Riemann-Roch}

\begin{theorem}[Riemann-Roch for curves]
\label{theorem-Riemann-Roch-for-curves}
Let $D$ be a divisor on a compact Riemann surface $X$, that is, $D$ is a
collection of $d$ points on $X$.
\begin{equation}
\label{equation-Riemann-Roch-for-Riemann-surfaces}
h^0(D)-h^0(K-D)=d-g+1
\end{equation}
\end{theorem}

\begin{exercise}
\label{exercise-no-holomorphic-vector-fields-for-g-geq2}
Prove that if $X$ is a complex smooth curve with $g\geq 2$ then $h^0(T_X)=0$.
\end{exercise}

\begin{proof}
First you notice that the dimension of the holomorphic 1-forms is the genus.
This is just because the genus $p_a$ is defined as $h^1(\mathcal{O}_X)$, which
is just $h^0(K_X)$ by Serre duality. Then you say well if you have a holomorphic
vector field, pair it with the nonzero holomorphic 1-form. This gives a nonzero
function, but it must be constant because $X$ is compact. Then it is actually
nowhere vanishing. This says the vector field cannot vanish anywhere, which
means the tangent bundle of the curve is trivial. Apparently elliptic curves,
i.e. $g=1$ are the 
\end{proof}

\begin{theorem}[Riemann-Roch for line bundles on surfaces]
\label{theorem-Riemann-Roch-for-line-bundles-on-surfaces}
Let $L$ be a line bundle on a complex surface $X$, and $K_X=\Omega^2X$ the
canonical bundle of $X$. Then
\begin{equation}
\label{equation-Riemann-Roch-for-line-bundles-on-surfaces}
\chi(L)=\chi(\mathcal{O}_X)+\frac{1}{2}(L,L-K_X)
\end{equation}
\end{theorem}

\section{Adjunction formula}
\label{section-adjunction-formula}

Perhaps the most accessible statement that could be interpreted as ``adjunction
formula'' is that the line bundle associated to a smooth hypersurface is the
normal bundle.

\begin{theorem}[Adjunction formula I]
\label{theorem-adjunction-formula-i}
\begin{reference}
\cite[p.146]{GH}
\end{reference}
If $X$ is a smooth hypersurface of a smooth complex manifold $Y$, then
\begin{equation}
\label{equation-adjunction-i}
\mathcal{O}_Y(X)|_{X} \simeq \mathcal{N}_{X/Y},
\end{equation}
where $\mathcal{N}_{X/Y}:=T_Y'/T_X'$.
\end{theorem}

\begin{proof}
If $X$ is locally defined
by the vanishing of $f_i$ on an open cover $U_i$ of $Y$,
then $\mathcal{O}_Y(X)$ is given by the cocycle $f_{ij}:=f_if_j$.

To prove Equation \ref{equation-adjunction-i}
it's enough to show that $\mathcal{O}_Y(X)|_{X}\otimes \mathcal{N}^\vee_{X/Y}$ 
is trivial, which can be done by constructing a nonvanishing section.
Such a section is given by
$$
df_i=d(f_{ij}f_j)=df_{ij}\cdot f_j+f_{ij}df_j,
$$
since the first term vanishes along $X$ (because $f_j$ does)
and the remaining terms define precisely a section
of ${T'}^\vee_Y/{T'}^\vee_X$,
the conormal bundle ---
indeed, sections of such a bundle
are holomorphic differencials vanishing along $X$.
\end{proof}

\begin{theorem}[Adjunction formula II]
\label{theorem-adjunction-ii}
Let $X$ be a complex submanifold of a complex manifold $Y$.
Then
\begin{equation}
\label{equation-adjunction-ii}
(K_Y\otimes \mathcal{O}_Y(X))|_{X}\cong K_X.
\end{equation}
\end{theorem}

\begin{proof}
From the holomorphic tangent bundle exact sequence we get
$$
\xymatrix{
0\ar[r]
&T'_X\ar[r]
&T'_Y|_{X}\ar[r]
&N_{X/Y}:=T'_Y/T'_X\ar[r]
&0
}
$$
which in fact has been claimed not to split.
But one can prove by hand that
$$
T'_Y|_X  \cong T'_X \oplus N_{X/Y}
$$
by using the local trivializations of $T'_X$ and $N_{X/Y}$,
and then conclude using the local trivializations of both
$T'_X \oplus  N_{X/Y}$ and $T'_Y|_X$, and
the fact that their dimensions coincide,
to construct a bundle isomorphism among them.

Taking determinant of both bundles we obtain the
result since exterior power of direct sum goes to
tensor product.
\end{proof}

\begin{lemma}
\label{lemma-adjunction-formula-for-curves-on-surfaces}
Let $S$ be any curve on a surface $X$. Then
\begin{equation}
\label{equation-adjunction-formula-for-curves-on-surfaces}
2p_a(S)-2=(S.S-K_X)
\end{equation}
\end{lemma}

\begin{proof}
If $S$ is nonsingular we may use the normal bundle short exact sequence. If
$S$ is singular we need to use the ideal sheaf short exact sequence, which means
we think of $S$ either as a closed embedded subscheme of $X$ or as an analytic 
subvariety. Taking Euler class we obtain
$$
\chi(\mathcal{O}(-S))+\chi(\mathcal{O}_S)=\chi(\mathcal{O}_X)
$$
Since $p_a(S):=1-\chi(\mathcal{O}_S)$, we obtain that
$p_a(S)=1-\chi(\mathcal{O}_X)-\chi(\mathcal{O}(-S))$. To compute
$\chi(\mathcal{O}(-S))$ we use Riemann-Roch formula
\ref{equation-Riemann-Roch-for-curves-on-surfaces} for curves on surfaces, which
gives
$$
\chi(\mathcal{O}(-S))=\chi(\mathcal{O}_X)
+\frac{(\mathcal{O}(-S).\mathcal{O}(-S)+\omega_X^*)}{2}
$$
Taking duals on both entries of the intersection form and substituting in our
previous expression for $p_a(S)$ we obtain the result.
\end{proof}

\begin{exercise}
\label{exercise-singular-curve-on-K3-has-positive-self-intersection}
Let $S$ be a singular, irreducible complex curve on a K3 surface. Prove that
$(S.S)\geq 0$.
\end{exercise}

\begin{proof}
This is just an application of Eq.
\ref{equation-adjunction-formula-for-curves-on-surfaces}. Since
$K_X=\mathcal{O}_X$ it suffices to show that $p_a(S)$ is not zero. This follows
fact that $S$ is singular, since its arithmetic genus is defined as the genus of
its normalization, which must be strictly positive since there exists at least
one singularity.
\end{proof}

\section{Chow's theorem}
\label{section-chow-theorem}

\begin{proposition}
\label{proposition-slice-charts}
Every codimension-$p$ submanifold of a complex $n$-manifold has slice charts,
i.e. for any $p \in M$ there's a coordinate chart $U \ni p$ such that points of
$M$ have coordinates $(z_1,\ldots,z_n,0,\ldots 0)$.
\end{proposition}

\begin{proof}
This may be taken as the definition of smooth (real or complex) submanifold, or
as a proposition using inverse function theorem (real or complex).
\end{proof}

\begin{proposition}
\label{proposition-stalk-is-PID}
Stalk of holomorphic functions is a PID.
\end{proposition}

\begin{proof}
This can be proved via Weierstrass Preparation theorem
\ref{theorem-Weierstrass-preparation} which implies
 Lemma \ref{lemma-stalks-are-UFDs}, and this in turn implies Lemma 
\ref{lemma-codimension-1-ideals-in-UFD-are-principal}.

Also, it can be shown directly for smooth hypersurfaces
 as in \cite{lec} Lemma 3.38.
\end{proof}

\begin{theorem}[Chow for hypersurfaces]
\label{theorem-Chow-for-hypersurfaces}
Every complex codimension-1 submanifold of $\mathbb{C}P^{n}$ is algebraic.
\end{theorem}

\section{Ampleness}
\label{section-ampleness}

\begin{definition}
\label{definition-base-point}
\begin{reference}
\cite[Definition 2.3.25]{huc}
\end{reference}
Let $L$ be a holomorphic bundle on a complex manifold $X$. A point $x \in X$ is
a {\it base point} of $L$ if $s(x)=0$ for all $s\in H^{0}(X,L)$. 
\end{definition}

\begin{definition}
\label{definition-base-locus}
\begin{reference}
\cite[Definition 2.3.25]{huc}
\end{reference}
Let $L$ be a holomorphic bundle on a complex manifold $X$. 
The {\it base locus} $\text{Bs}(L)$ is the sate of all base points of $L$.
\end{definition}

\begin{proposition}
\label{proposition-canonical-map}
\begin{reference}
\cite[Proposition 2.3.26]{huc}
\end{reference}
Let $L$ be a holomorphic line bundle on a complex manifold $X$ and suppose that
$s_0,\ldots,s_N\in H^{0}(X,L)$ is a basis. Then
\begin{align*}
\varphi_L: X\setminus\text{Bs}(L) &\longrightarrow \mathbb{P}^N \\
x &\longmapsto (s_0(x):\ldots:s_N(x))
\end{align*}
defines a holomorphic map such that $\varphi^*
_L\mathcal{O}_{\mathbb{P}^N}(1)\cong L|_{X\setminus\text{Bs}(L)}$.
\end{proposition}

\begin{definition}
\label{definition-linear-system}
\begin{reference}
\cite[p. 86]{huc}
\end{reference}
The map $\varphi_L$ in Proposition \ref{proposition-canonical-map} is said to be
associated to the {\it complete linear system} $H^{0}(X,L)$ (i.e. the sections
of $L$ are what we call a complete linear system) whereas a subspace of 
$H^{0}(X,L)$ is called a {\it linear system} of $L$.
\end{definition}

\begin{definition}
\label{definition-globally-generated}
\begin{reference}
\cite[p. 86]{huc}
\end{reference}
$L$ is {\it globally generated} by the sections $s_0,\ldots,s_N$ if
$\text{Bs}(L,s_0,\ldots,s_N)=\emptyset$.
\end{definition}

\begin{definition}
\label{definition-ample}
\begin{reference}
\cite[Definition 2.3.28]{huc}
\end{reference}
A line bundle $L$ on a complex manifold is called {\it ample} if for some $k>0$
and some linear system in $H^{0}(X,L^k)$ the associated map $\varphi$ is an
embedding.
\end{definition}

\begin{slogan}
By definition, a compact complex manifold is projective if and only if it admits
an ample line bundle.
\end{slogan}

\begin{exercise}
\label{exercise-L-ample-implies-Lotimes2-globally-generated}
Let $L$ be an ample bundle on a K3 surface $M$. Prove that $L^{\otimes 2}$ is
globally generated (that is, for each $x \in M$ there exists a section $h \in
H^{0}(L^{\otimes 2})$ which does not vanish in $x$).
\end{exercise}

\begin{proof}
\begin{reference}
\href{https://math.stackexchange.com/questions/5081481/
ample-line-bundle-on-a-k3-surface-implies-l-otimes-2-is-base-point-free/
5081492?noredirect=1#comment10928708_5081492}{StackExchange}
\end{reference}
As an outline for exposition:
\begin{enumerate}
\item Show that $L$ has sections (by ampleness+Kodaira Vanishing+Riemann-Roch), 
pick a section $C$ and note that if 
$L^{\otimes2}$ had base points they would be in $C$.
\item Show that restriction map is surjective (Kodaira Vanishing).
\item Show that inclusion map is not surjective. For this it's enough to show
that $\dim|D|=\dim|D-p|+1$. This follows by writing the formula of Riemann-Roch
for both of these Weil divisors (have to pass to Weil divisors). But you will
need to make sure that $h^0(K-D)$ and $h^0(K-(D-p))$ are zero.
\end{enumerate}

First we need to show that $L$ has sections. To see this I will shot that since
$L$ is ample, $L^2>0$. Indeed, if $mL$ is very ample we apply by Riemann-Roch,
 Kodaira Vanishing and the fact that $\chi(\mathcal{O}_X)=2$ on a K3 to obtain 
$h^0(mL)=2+\frac{1}{2}m^2L^2$ which must be positive since $mL$ has sections by
being very ample. Notice $L^2$ cannot be zero as $h^0(mL)=2$ would imply we have
an embedding of a K3 surface into $\mathbb{P}^1$.

Applying again Riemann-Roch and Kodaira vanishing we see that $h^0(L)>0$. Let
$C$ be a section of $L$.

Notice that if $L^{\otimes 2}$
had any base points, they would have to be on $C$. Indeed, since $C$ is the
vanishing set of a section $s\in H^{0}(L)$, we must have $s \otimes s \in
H^{0}(L^{\otimes 2})$ vanishing in any base point of $L^{\otimes 2}$.

Then we consider the ideal exact sequence for $C$ and tensor by $L^{\otimes 2}$
to obtain
$$
\xymatrix{
0\ar[r]&L^{\otimes 2}(-C)\ar[r]&L^{\otimes 2}\ar[r]&
L^{\otimes 2}\otimes\mathcal{O}_C\ar[r]&0
}
$$
Notice that the term on the left is actually $L$ since the ideal sheaf
$\mathcal{O}_M(-C)=\mathcal{I}_C$ is dual to $L$ because $C$ is defined as the
vanishing set of a section of $L$. Passing to cohomology we obtain
 $$
\xymatrix{
H^{0}(L^{\otimes 2})\ar[r]&H^{0}(L^{\otimes 2}\otimes \mathcal{O}_C)\ar[r]&
H^{1}(L)
}
$$
where the latter term vanishes by Kodaira Vanishing because $L$ is ample.
This says that every section of $L^{\otimes 2}|_C$ is the
restriction to $C$ of a section of $L^{\otimes 2}$. In turn this shows that it's
enough to show that the bundle $L^{\otimes 2}$ has no base points along $C$.

By adjunction formula for (possibly singular) curves on smooth surfaces and by 
the fact that $M$ is smooth, we see that $2p_a(C)-2=(L.L)$ so that
$$
4p_a(C)-4=(2L.L)=\text{deg}_C(L^{\otimes 2})
$$
Notice that since $L^2>0$ we exclude the cases that $p_a(C)=0,1$.

To conclude pick a point $p\in C$. Saying that $p$ is not a base point of
$L^{\otimes 2}|_{C}$ is the same as saying that not every section of $L^{\otimes
2}|_{C}$ vanishes at $p$, that is, that 
$h^0(L^{\otimes 2}|_{C}(-p))<h^0(L^{\otimes 2}|_{C})$.

Now I will prove that since the degree of $L^{\otimes 2}|_{C}$ and $L^{\otimes
2}|_{C}(p)$ is greater than $2p_a(C)$ we have that 
$h^0(\omega_C\otimes (L^{\otimes2}|_{C})^\vee)=0
=h^0(\omega_C\otimes (L^{\otimes 2}|_{C}(-p))^\vee)$. For this we need to see these line
bundles as Weil divisors by simply taking sections, whose vanishing sets are 
finite sets of points with multiplicities. Then their degree is the sum of the
multiplicities.  This definition makes degree additive with respect to tensor
product (we may take local sections and sum degrees). By Riemann-Roch on the curve
$C$, we know that $\text{deg}\omega_C=2p_a-2$. Then

$$
\text{deg}_C(\omega_C\otimes L^{\otimes 2})
=\text{deg}_C(\omega_C)+\text{deg}_C(L^{\otimes 2})
=2p_a-2-(4p_a(C)-4)<0
$$
and a similar computation works for $L^{\otimes 2}(-p)$ as it has the same
degree of $L^{\otimes 2}$ minus 1. This implies that neither of these bundles
can have sections since any section would provide a linearly equivalent
effective divisor. This would be a contradiction since both
$L^{\otimes 2}$ and $L^{\otimes 2}(-p)$ have sections. Therefore 
$h^0(\omega_C\otimes (L^{\otimes2}|_{C})^\vee)=0
=h^0(\omega_C\otimes (L^{\otimes 2}|_{C}(-p))^\vee)$ as claimed.

Finally we apply Riemann-Roch to $L^{\otimes 2}$ and $L^{\otimes 2}(-p)$ to
obtain that $h^0(L^{\otimes 2})>h^0(L^{\otimes 2}(-p))$.
\end{proof}

\section{Bertini's theorem}
\label{section-Bertini-theorem}

\begin{slogan}
In \(\mathbb{C}^n\) many complex hypersurfaces can be written as regular level
sets of globally defined holomorphic functions. But in a compact complex
manifold, this is never possible, because all global holomorphic functions are
constants. Instead, we can use sections of line bundles.
\end{slogan}

\section{Serre duality}
\label{section-serre-duality}

\begin{theorem}[Serre duality]
\label{theorem-serre-duality}
\cite{Voisin} II.5.32. The pairing
$$
H^q(X,\mathcal{E})\otimes
H^{n-q}(X,\mathcal{E}^*\otimes K_X)\to H^{n}(X,K_X)\cong\mathbb{C}
$$
is perfect.
\end{theorem}

So when you put the dual \(\vee\) on one of these you get isomorphism.

Our course version says:
$$
H^{k}(X,\mathcal{L})^{\vee}=H^{n-k}(X,\omega_X \otimes \mathcal{L}^*)
$$
\section{Kodaira Vanishing theorem}
\label{section-Kodaira-vanishing-theorem}

\begin{theorem}[Kodaira Vanishing]
\label{theorem-Kodaira-vanishing}
\begin{reference}
\cite[21.5.8]{sea}
\end{reference}
Suppose $k$ is a field of characteristic 0, and $X$ is a
smooth projective $k$-variety. Then for any ample invertible sheaf $L$,
$H^{i}(X,K_X \otimes L)=0$ for $i>0$.
\end{theorem}

\begin{proof}
No proof in \cite{sea}.
\end{proof}

\section{Kodaira Embedding theorem}
\label{section-Kodaira-Embedding-theorem}

The forward implication is easy and sometimes not considered as part of the
theorem.

Compare this theorem with Nakai-Moishezon Criterion
\ref{algebraic-geometry-theorem-Nakai-Moishezon-criterion}.

\begin{theorem}[Kodaira Embedding]
\label{theorem-Kodaira-embedding}
\begin{reference}
\cite[Theorem 10.12]{lec}
\end{reference}
Suppose $M$ is a compact complex manifold. A holomorphic line bundle $L\to M$ is
ample if and only if it is positive. Thus $M$ is projective if and only if it
admits a holomorphic line bundle.
\end{theorem}

\begin{proof}
The easy implication as follows. If $L$ is ample then there is $N$ such that
$L^{\otimes N}$ is very ample, meaning by Misha's definition that the canonical
map is an embedding such that $L^{\otimes N}=\varphi^*\mathcal{O}(1)$, which has
degree 1 by definition as in \cite[15.4.14]{sea}.
\end{proof}

\section{Néron-Severi group}
\label{section-neron-severi-group}

\noindent
Instead of considering the exact sequence 
$$
\xymatrix{
0\ar[r]
&H^0(X,\mathcal{M}^*_X)\ar[r]
&H^0(X,\mathcal{M}_X^*/\mathcal{O}_X^*)\ar[r]
&H^1(X,\mathcal{O}_X^*)\ar[r]
&0
}
$$
which says that $\text{Pic}(X)$ is isomorphic
to Cartier divisors modulo linear equivalence,
we consider
$$
\xymatrix{
0\ar[r]
&\text{Pic}^0(X)\ar[r]
&\text{Pic}(X)\ar[r]
&\text{Pic}(X)/\text{Pic}^0(X):=\text{NS}(X)\ar[r]
&0
}
$$
where $\text{Pic}^0(X)$ is the connected component
of the identity in the Picard scheme,
which is a scheme representing some functor.
The idea is that $\text{Pic}^0(X)$-equivalence
is like linear equivalence, but different.
The Néron-Severi group describes line bundles
module this other equivalence.

\section{Hypercomplex manifolds}
\label{section-hypercomplex-manifolds}

\begin{exercise}
\label{exercise-SU2-invariant-forms}
Let $M$ be a compact hypercomplex manifold of real dimension 4, equipped with a
quaternionic Hermitian structure, and $V$ the space of closed
$\text{SU}(2)$-invariant 2-forms. Prove that $V$ is finite-dimensional.
\end{exercise}

\begin{proof}[Proof by Arpan.]
Consider the Hodge star operator with respect to the Riemannian metric on $M$.
\begin{enumerate}
\item A closed anti-self-dual form is harmonic. Indeed, by some 
characterization a
form is harmonic $\iff$ it is $d$-closed and $d^*$-closed. So if $\alpha$ is
self-dual and $d$-closed we get $d^*\alpha=(-1)^{-\bullet}*d*\alpha=0$ since
$d\alpha=0$.
\item The space of harmonic forms is finite-dimensional (analysis, cf. Fredholm
theory).
\item I should be able to prove that an $\text{SU}(2)$-invariant closed form is
anti self-dual.
\begin{enumerate}
\item Define $\Lambda^+:=$self-dual 2-forms and $\Lambda^-:=$anti-self dual
2-forms. Notice that $\Lambda^2=\Lambda^+ \oplus \Lambda^-$,
this is by \ref{lemma-Hodge-star-squared}, since we can
see $*$ as an involutive endomorphism of $\Lambda^2$,
so that it has eigenvalues $\pm 1$, given the
desired decomposition as its eigenspace decomposition.

\item {\bf Claim.} $\Lambda^+=\text{span}(\omega_I,\omega_J,\omega_K)$.
\item {\bf Claim.} $\omega_I,\omega_J$ and $\omega_K$ are
$\text{SU}(2)$-invariant.

The last two items imply that $\text{SU}(2)\Lambda^+=\Lambda^+$.
\item {\bf Claim.} $\text{SU}(2)\mathbb{y}\Lambda^+$ has no fixed points.

We conclude that if $\alpha$ is $\text{SU}(2)$-invariant (i.e. a fixed point of
$\text{SU}(2)\mathbb{y}\Lambda^2$) it's positive part will vanish, so that
$\alpha$ is anti-self-dual.
\end{enumerate}
\end{enumerate}
\end{proof}

\begin{proof}
Idea: show that
Hodge star $*\omega$ is in the $\text{SU}(2)$-orbit of $\omega$ and conclude
that $\int \omega\wedge *\omega=0$, implying that $\|\omega\|=0$.
\end{proof}

\begin{exercise}
\label{exercise-closed-fundamental-forms-on-almost-hypercomplex-manifold}

\end{exercise}

\begin{proof}
Idea: find a counterexample. The easiest should be a Kummer surface. It looks
possible to find an almost hypercomplex structure on $\mathbb{C}^2$ passing to
the torus and then to the $\mathbb{Z}_2$ quotient, but not clear what will
happen after blowing up.
\end{proof}

\section{Deformation theory (introduction)}
\label{section-deformations}

\noindent
Here I discuss deformations in the category of complex spaces.

Let's just do a summary of \cite[Chapter 9]{Voisin}.

Let $\mathcal{X}$ be a complex manifold, $B$ a complex manifold
and $\phi:\mathcal{X} \to B$ a holomorphic map.
We call $\phi$ a {\it family} if it is a proper holomorphic submersion.

A theorem by Ehresmann says that any ``deformation'' of
smooth real manifolds is trivial:

\begin{theorem}[Ehresmann]
\label{theorem-ehresmann}
\begin{reference}
\cite[Theorem 9.3]{Voisin}
\end{reference}
If $\phi:\mathcal{X} \to B$ is a
proper submersion of differentiable manifolds
(no complex structure), with $B$ contractible and $0 \in B$ 
some distinguished point,
then the total space $\mathcal{X}$ is trivial as a 
manifold over $B$, i.e.
there exists a diffeomorphism
 $$
T:\mathcal{X}\xrightarrow{\cong}X_0 \times B
$$
of manifolds over $B$, i.e. commuting with projection.
\end{theorem}

\begin{proof}
The main tool is the theorem of tubular neighbourhoods,
which says that there is a diffeomorphism of
a nieghbourhood $W$ of $X_0$ in $\mathcal{X}$
and a neighbourhood of $X_0$ in its normal bundle.
(We have a normal bundle because $X_0$ is a submanifold of $\mathcal{X}$.)

In particular this gives a differentiable retraction
$T_0:W \to X_0$, which allows us to consider the map
$$
(T_0,\phi):W \to X_0 \times B.
$$
Since $T_0$ is a retraction 
(it's the identity when restricted to $X_0$) and $\phi$ is a submersion,
the map $(T_0,\phi)$ has nonsingular differential along $X_0$.
Then we can invert it locally along $X_0$,
and since $X_0$ is compact we obtain a whole
neighbourhood $W'\subset W \subset \mathcal{X}$ 
where the differential is nonzero and thus
$(T_0,\phi)|_{W'}$ is an embedding
(using the inverse function theorem).

Finally we restrict the image of $(T_0,\phi)|_{W'}$ 
to a neighbourhood $U\subset B$ of $0$,
using properness of $\phi$ to ensure
that $\phi^{-1}(U) \subset W'$ --- though I'm
not exactly sure how.
We have constructed a diffeomorphism
$\phi^{-1}(U) \to X_0 \times U$ 
commuting with the projection.

This proof was only local; the global version
is in \cite{Voisin} though it's not used in the rest of the text.
\end{proof}

In the complex situation, if $\phi:\mathcal{X} \to B$ is a family
of complex manifolds and $0 \in B$, then
``up to replacing $B$ by a neighbourhood of 0'',
there exists a smooth trivialization $T=(T_0,\phi):\mathcal{X} \to X_0 \times B$ 
such that the fibres of $T_0$ are complex submanifolds of $\mathcal{X}$.

Now let $\phi:\mathcal{X} \to B$ be a family of complex manifolds.
Recall the pullback bundle $\phi^*B$ and the fact
that the differential $\phi_*$ can be thought of as a gadget
that maps tangent vectors to $\mathcal{X}$ 
not to vectors tangent to $B$ but
to vectors in the pullback bundle $\phi^*B$.
Restricting everything to the fibre $X=\phi^{-1}(0)$ we get
\begin{equation}
\label{equation-short-exact-sequence-deformation}
\xymatrix{
0\ar[r]&T_X\ar[r]&T_{\mathcal{X}|X}\ar[r]&\phi^*T_{B|X}\ar[r]&0.
}
\end{equation}
There's what seems to be a really nice result saying that
$H^1(\mathcal{F})$ parametrizes isomorphisms classes
of extensions of $\mathcal{F}$ by the trivial bundle,
but for now let me just define it roughly as follows.
The category of $\mathcal{O}_X$ is most surely abelian
with enough injectives. This means that objects
have associated complexes, and we can take
cohomologies of these complexes.
This says, roughly, that short exact
sequences of vector bundles have associated cohomology
long exact sequences. Then the Kodaira-Spencer map
is the map 
$$
\rho:T_{B,0}=H^0(X,\phi^* T_{B|X})\to H^1(X,T_X)
$$
induced by the long exact sequence associated to
\ref{equation-short-exact-sequence-deformation}.
Here the equality $T_{B,0}=H^1(X,\phi^* T_{B|X})$ 
is just because the pullback of the tangent bundle of $B$ 
to any fiber is trivial.

\medskip\noindent
Now I will explain first order deformations.
Consider a family $\mathcal{X} \to B$.
We introduce a complex analytic subscheme $B_\varepsilon$ of $B$ 
giving an ideal sheaf $\mathcal{M}^2_0$
where $\mathcal{M}_0$ is the maximal ideal
of $\mathcal{O}_{B,0}$ consisting of the holomorphic
functions vanishing at 0.
This means that a function in $\mathcal{M}^2_0$ 
is (a finite sum of terms) of the form $f=gh$ for $g,h \in \mathcal{M}_0$,
which means that $df=d(gh)=hdg+gdh=0$ at $0$
since both $g$ and $h$ vanish at $0$.
That is, this sheaf contains functions that vanish
at $0$ and whose first derivative vanishes at $0$.

This means that $B_\varepsilon$ is a point:
it's the vanishing locus of the set of functions
that vanish at a single point.
However, it is endowed with an unusual structure sheaf.
Let $v$ be a tangent vector to $B$ at $0$ and
$f$ a function in the strange sheaf $\mathcal{M}_0/\mathcal{M}_0^2$.
Then by the computation above, since $v$ is a differential
operator, $v$ annihilates $f$.
This means that this sheaf detects not only the point $0$ 
but also any tangent vector at $0$.
Let's denote
$B_\varepsilon=\Spec \mathbb{C}[\varepsilon]/(\varepsilon^2)$
just because its structure sheaf is 
$\mathbb{C}[\varepsilon]/(\varepsilon^2)$.

In fact, this is so throughout deformation theory:
$\Spec k[\varepsilon]/(\varepsilon^2)$ is topologically a point!
But it's a {\it fat point}: the support of its
structure sheaf is a point, but as a scheme, it's not a point.
And the same happens with the family $\mathcal{X}$ over
$\Spec k[\varepsilon]/(\varepsilon^2)$,
topologically it's just the fibre $X$!
But its structure sheaf is different:
``it contains the directions in $\mathcal{X}$ which
are normal to $X$''.

\medskip\noindent
Perhaps the most important part of this construction
comes when considering a fat point $B_\varepsilon \subset B$.
This gives a first-order deformation
$\phi^{-1}(B_\varepsilon)) \subset \mathcal{X}$ 
$$
\xymatrix{
X\ar[r]\ar[d]
&\phi^{-1}(B_\varepsilon) \subset \mathcal{X}\ar[d]\\
\ast\ar[r]
&B_\varepsilon \subset B
}
$$
Using the constructions above, one shows that
to any such deformation we can associate a cocycle
in $H^1(X,T_X)$.
Thus, first order deformations are ``exactly parametrised''
by the group $H^1(X,T_X)$.
This is the main idea behind Kodaira-Spencer map,
which is well-explained in
\href{https://en.wikipedia.org/wiki/Kodaira%E2%80%93Spencer_map}{Wikipedia}.

I will present a similar construction
to Kodaira-Spencer map
that works for embedded deformations
instead of just deformations.
(That's with the intention of understanding the
forthcoming exercise Exercise \ref{exercise-deformations-curve-in-k3}.)

Since we are in complex space category
I follow \cite[p. 224]{Voisin} for the main setup,
but this is also a mixture
of \cite[p. 147, 150]{Sernesi}.

The result is in fact quite reasonable geometrically:
the dimension of directions in which we can deform a
submanifold should be non other than
the dimension of the normal bundle.

\section{Deformation theory}
\label{section-deformation-theory}

\begin{definition}
\label{definition-deformation}
Let $X$ be a complex manifold.
A {\it deformation} of $X$ is a holomorphic submersion
$\pi:\mathcal{X} \to B$ of complex manifolds
such that $\pi^{-1}(0)\cong X$ for some $0 \in B$.

If $\mathcal{X}$ and $\mathcal{Y}$ are two deformations
of $X$ over the same base,
a {\it morphism of deformations} is a map
$f:\mathcal{X} \to \mathcal{Y}$ such that the diagram
$$
\xymatrix{
& X\ar[dl]\ar[dr]\\
\mathcal{X}\ar[dr]\ar[rr]^f&&\mathcal{Y}\ar[dl]\\
&B
}
$$
commutes. The {\it space of deformations} of $X$
is the set of deformations modulo
the equivalence relation of two deformations
being isomorphic. A priori we don't know
if this set has any structure.

Let $Y$ be another complex manifold.
A {\it deformation of $X$ in $Y$} 
is a deformation of $X$ such that $\mathcal{X}\subset Y\times B$.

The {\it fat point} is a ringed space 
$(B_\varepsilon,\mathbb{C}[\varepsilon]/(\varepsilon^2))$
whose underlying topological space $B_\varepsilon$ is a point
and structure sheaf is the ring of dual numbers
$\mathbb{C}[\varepsilon]/(\varepsilon^2)$.

A {\it first order deformation} of $X$ is a deformation such that
the base $B$ is a fat point.
\end{definition}

The following proposition is a
mixture of ideas from \cite[p. 224]{Voisin}
and \cite[Examples 3.2.4(ii)]{Sernesi-deformations}.

\begin{proposition}
\label{proposition-kodaira-spencer-for-embedded-deformations}
Let $X$ be a smooth hypersurface in a complex manifold $Y$.
For every deformation of $X$ in $Y$ 
with base of dimension 1 we can construct a section of the bundle
$N_{X/Y}$. Different deformations give
different sections up to rescaling.
\end{proposition}

\begin{proof}
Let
$$
\xymatrix{
X\ar[r]\ar[d]
&\mathcal{X}\subset Y\times B\ar[d]^\pi\\
0\ar[r]
&B
}
$$
be a deformation of $X$ in $Y$
and suppose that $\dim B=1$.
This means that $\mathcal{X}$ is a complex submanifold of
the product $Y \times B$ 
and $\pi:\mathcal{X} \to B_\varepsilon$ is
a holomorphic submersion.

Since $X$ is a hypersurface,
we can find an open cover $V_i$ 
of $M$ such that $V_i \cap X:= U_i$ 
is given locally by the vanishing of
a function $f_i \in \mathcal{O}_Y(V_i)$.
In terms of coordinates we find that
that $V_i \cap X$ is given by $(z_1,…,z_{n-1},0)$.

Since $\pi$ is a submersion,
by the holomorphic inverse function theorem
we obtain for every $V_i \subset \mathcal{X}$ 
(such that $V_i \cap X \neq  \emptyset$)
a biholomorphism from some $B_i \subset B$ containing $0$ to $V_i$.
This gives coordinates $(0,…,b)$ to $V_i$.
We conclude that $V_i \cong U_i\times B_i$ along $X$.

Now we ``restrict'' to a first order deformation.
Consider the fat point subscheme
$B_\varepsilon$ of $B$ 
(I think this is the reason why $B$ must have dimension 1,
in Voisin notation, that a first order neighbourhood
of $0$ in $B$ is indeed a fat point)
and let $X_\varepsilon=\pi^{-1}(B_\varepsilon)$,
which is a ringed space whose topological space
is the same as $X$, but its
structure sheaf is induced from $B_\varepsilon$.

(I think that to prove this part I have
to look carefully at the induced sheaf
$\pi^*(\mathbb{C}[\varepsilon]/(\varepsilon^2)$.)
Since we are on a local trivialization,
the structure sheaf of the product $U_i \times B_i$ 
is the tensor product of the structure sheaves
(reference?),
so that the structure sheaf of $X_\varepsilon$ at
$U_i\times B_\varepsilon$ is given by
$$
\mathcal{O}_{X_\varepsilon}(U_i)=
 \mathcal{O}_Y(U_i) \otimes \mathbb{C}[\varepsilon]/(\varepsilon^2).
$$
Functions here look like finite sums of
functions of the form $f+ \varepsilon g$ for 
$f,g \in \Gamma(U_i,\mathcal{O}_{U_i})$.

The next key step is to argue that
$X_\varepsilon$ is locally cut by
functions of the kind $f_i + \varepsilon g_i$ 
for some $g_i \in \mathcal{O}_M(U_i)$.
Here the $f_i$ are the same as those which define $X$.
I think a proof is that from the ideal sheaf
exact sequence of $X$ in $Y$
$$
\xymatrix{
0\ar[r]
&\mathcal{I}_X\ar[r]
&\mathcal{O}_Y\ar[r]
&\mathcal{O}_X\ar[r]
&0
}
$$
we obtain after tensoring by $\mathbb{C}[\varepsilon]/(\varepsilon^2)$
$$
\xymatrix{
0\ar[r]
&\mathcal{I}_X \otimes \mathbb{C}[\varepsilon]/(\varepsilon^2)\ar[r]
&\mathcal{O}_Y \otimes \mathbb{C}[\varepsilon]/(\varepsilon^2)\ar[r]
&\mathcal{O}_X \otimes \mathbb{C}[\varepsilon]/(\varepsilon^2)\ar[r]
&0.
}
$$
(But is the functor $-\otimes \mathbb{C}[\varepsilon]/(\varepsilon^2)$ 
exact? Why? So far we didn't impose a flatness condition on $\pi$.)
The sheaf in the right
coincides with the structure sheaf of $X_\varepsilon$ when 
evaluated on a trivial open set of the form
$U_i \otimes B_\varepsilon$.
This shows that the ideal sheaf of $X_\varepsilon$ 
as a ringed space is
$\mathcal{I}_X \otimes\mathbb{C}[\varepsilon]/(\varepsilon^3)$.
Since $\mathcal{I}_X$ is locally principal generated by $f_i$,
we conclude that indeed $X_\varepsilon$ 
must be cut locally by functions of the form $f_i + \varepsilon g_i$
for some $g_i \in \mathcal{O}_Y(U_i)$

Recall that the line bundle associated to $X$
is $\mathcal{O}_Y(X)$, given by the cocycle $f_i/f_j:=f_{ij}$.
A version of adjunction formula
(more precisely, \cite[Adjunction formula I, p. 146]{GH})
establishes that this line bundle,
when restricted to $C$, is in fact
the normal bundle of $X$ in $Y$, defined as que quotient
bundle $T_Y'/T_X':=N_{X/Y}$.
In symbols, $\mathcal{O}_Y(X)|_{X}\cong N_{X/Y}$.

Similarly, the line bundle associated to $\mathcal{X}$ 
is given by the cocycle
$$
F_{ij}=f_{ij}+\varepsilon g_{ij}
$$
for $g_{ij}=\frac{g_i-f_{ij}g_j}{f_j}$.
Indeed, note that 
$\frac{1}{f_j+\varepsilon g_j}=\frac{1}{f_j}-\varepsilon \frac{g_j}{f^2_j}$ 
and compute $F_{ij}=(f_i+\varepsilon g_j)/(f_j+\varepsilon g_j)$.

Then
$$
f_i+\varepsilon g_i=(f_{ij}+\varepsilon g_{ij})(f_j+\varepsilon g_j)
$$
gives
$$
g_i=f_{ij}g_j+g_{ij}f_j
$$
and since $f_j$ vanishes along $X$,
we are left with $g_i=f_{ij}g_j$ 
which is how a section of the sheaf $N_{X/Y}$
is obtained.
\end{proof}

\begin{exercise}
\label{exercise-deformations-curve-in-k3}
Let $C$ be a smooth genus $g$ curve which
can be embedded in a K3 surface $M$, and $\mathcal{X}$ 
``the family of all deformations'' of $C$ in $M$.
Prove that $\dim \mathcal{X} \leq g$.
\end{exercise}

\begin{proof}
By Adjunction formula II 
(Theorem \ref{theorem-adjunction-ii}) 
and $M$ being a K3 surface
we get that $h^0(C,N_{C,M})=g$.

If the deformation space $X$ exists and is a complex manifold,
the map constructed in 
Proposition \ref{proposition-kodaira-spencer-for-embedded-deformations}
would be a holomorphic (why holomorphic!?) 
injective map $X \to H^0(C,N_{C/Y})$.
This obliges $\dim X \leq  h^0(C,N_{C/Y})=g$.
Indeed, if not, the differential must have a kernel,
and integrating along a direction in the kernel
we obtain the germ of a complex curve along which
the map is constant, which is impossible since it is injective.
\end{proof}







\section{Cones}
\label{section-cone}

Recall that $\text{NS}(X)$ is the quotient group
$\text{Pic}(X)/H^1(\mathcal{O}_X)\subset H^2(X,\mathbb{Z})
\subset H^2(X,\mathbb{R})$
coming from the exponential exact sequence.
This has an intersection form.
In the case of a K3 we readily see that
$h^1=0$ so $\text{NS}=\text{Pic}$.
In fact, the intersection form coincides with
the usual cup product on 2-cocycles of singular cohomology.

For a K3 surface we have
\begin{itemize}
\item The {\it Kähler cone}. Classes 
in $H^{1,1}(X,\mathbb{R})$ that are represented by a
Kähler form.

\item The {\it positive cone}. Classes $\text{NS}(X)_\mathbb{R}
=\text{NS}(X) \otimes_\mathbb{Z}\mathbb{R}$
with $\alpha^2>0$.

\item The {\it ample cone}. Classes $\text{NS}(X)_\mathbb{R}$
with $\alpha^2>0$ and $\alpha.C>0$ for all algebraic curves 0.
(See \ref{algebraic-geometry-theorem-Nakai-Moishezon-criterion}.)
This is true, but hard to prove, see
\cite[p. 150]{huk}.
Another description is that the ample cone
is the set of classes in $\text{NS}(X)_\mathbb{R}$
that are finite sums $\sum a_iL_i$ 
for $L_i \in \text{NS}(X)$ ample
and $a_i \in \mathbb{R}_{>0}$.

\item The {\it nef cone}. Classes (in $\text{NS}(X)?)$
with $\alpha.C=\int_C\alpha\geq 0$ for any algebraic curve.
There is also a notion of nef for analytic cycles
which basically says that the form is approximated
by Kähler forms.
In \cite[Theorem 4.7(ii)]{Demailly-Paun} we have that
a $(1,1)$-class is nef (in the analytic sense) if and only if
$\int_Y \alpha\wedge\omega^{p-1}\geq 0$ for every
irreducible analytic set $Y \subset X$, $p=\dim Y$
and $\overline{\omega}$ Kähler class.

\end{itemize}

\noindent
The upshot about Demailly-Pa\u un theorem
is that Kähler classes are numerically positive
(recall that ``numerically'' means w.r.t. intersection form)
on {\it analytic} cycles. This distinguishes
complex analytic geometry from algebraic geometry.
This is why Demailly-Pa\u un say that 
their theorem is a generalization of Nakai-Moishezon:
because the latter is for {\it algebraic} cycles,
indeed, found in Hartshorne's book.

The proof goes roughly as follows.
It's clear that $\mathcal{K} \subset \mathcal{P}$
($\mathcal{P}$ is the analytically numerically positive cone)
because, since the Kähler form
comes from the Riemannian metric
and the curves are complex,
which means that they are invariant under
the complex structure,
we have integrals
$\int_Y\omega$ for curves $Y \subset X$ 
but $\omega(v,Jv)>0$ for a basis $v,Jv$ 
of $T_pY$.
That is to say, there are no complex
Lagrangian curves.

But that's elementary.
The point of the theorem is proving that
a form in $\overline{\mathcal{K}}\cap \mathcal{P}$,
i.e. in the closure of the Kähler cone
and which is also numerically analytically positive,
is in fact Kähler.

This says that the boundary of the Kähler cone does
not intersect the numerically analytically positive cone.

\begin{theorem}[Demailly-Pa\u un]
\label{theorem-demailly-paun}
Let $X$ be a compact Kähler manifold.
The Kähler cone is a connected component
of the cone of 1,1-classes numerically positive on
analytic cycles.
\end{theorem}

\begin{exercise}
\label{exercise-demailly-paun}
Let $M$ be a K3 surface such that $\text{rk}\text{NS}(M)<20$.
Using Demailly-Paun theorem,
prove that there exists a non-zero vector
$\eta \in H^{1,1}(M)$ which satisfies $\eta^2=0$ 
and belongs to the boundary of the Kähler cone.
\end{exercise}

\noindent
Here's an idea:
By Demailly-Paun for K3
(on page 272 of slides.pdf),
we have that the Kähler cone is contained in the positive cone.
Then perhaps use \cite[Theorem 7.1]{Huybrechts-HK}
to conclude to show find a class $\eta$ in the closure
of the Kähler cone.
If we can show that $\eta$ also has  $\eta^2=0$,
we conclude that it must be in the {\it boundary}
of the Kähler cone, since by Demailly-Paun
the Kähler cone is contained in the positive cone.

\medskip\noindent
But what's the vector? Not a Kähler class, not a positive class.


\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
