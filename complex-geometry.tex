\input{preamble}

\begin{document}

\title{Complex Geometry}
\maketitle

\phantomsection
\label{section-phantom}
\hfill
\href{http://github.com/danimalabares/stack}{github.com/danimalabares/stack}

\tableofcontents

\section{Complex analysis in several variables}
\label{section-complex-analysis-in-several-variables}

\begin{lemma}
\label{lemma-holomorphic-function-characterization}
\cite{lec}, Theorem 1.21. Let $U\subseteq\mathbb{C}^n$ be open and $f:U\to
\mathbb{C}$. The following are equivalent:
\begin{enumerate}
\item $f$ is holomorphic (i.e. it is continuous and has a complex partial
derivative with respect to each variable at each point of $U$)
\item $f$ is smooth and satisfies the following Cauchy-Riemann equations:
\begin{equation}
\label{equation-Cauchy-Riemann-several-variables}
\frac{\partial u}{\partial x^j}=\frac{\partial v}{\partial y^j},\qquad 
\frac{\partial u}{\partial y^j}=-\frac{\partial v}{\partial x^j}
\end{equation}
where $z^j=x^j+\sqrt{-1}y^j$ and $f(s)=u(z)+\sqrt{-1}v(x)$.
\item For each $p=(p^1,\ldots,p^n)\in U$ there exists a neighbourhood of $p$ in
$U$ on which $f$ is equal to the sum of an absolutely convergent power series of
the form
\begin{equation}
\label{equation-Taylor-series-several-variables}
f(z)=\sum_{i_1,\ldots,i_n}a_{i_1,\ldots,i_n}(z^1-p^1)\ldots(z^n-p^n)
\end{equation}
\end{enumerate}
\end{lemma}

\begin{proof}
I will prove that if $f$ is holomorphic then it has a Taylor series for $n=2$. 
First apply Cauchy integral formula on each variable to obtain
$$
f(z^1,z^2)=\frac{1}{(2\pi\sqrt{-1})^2}
\int_{\substack{|z^1-w^1|=r \\ |z^2-w^2|=r}}
\frac{f(w^1,w^2)}{(w^1-z^1)(w^2-z^2)}dw^1dw^2
$$
Now observe:
\begin{equation}
\label{equation-multivariable-Cauchy}
\frac{1}{w^1-z^1}=\frac{1}{w^1-p^1+p^1-z^1}
=\frac{1}{w^1-p^1}\frac{1}{1-\frac{p^1-z^1}{w^1-p^1}}
\end{equation}
And on the right-hand-side we have a geometric series so that we may write
$$
\frac{1}{w^1-z^1}
=\frac{1}{w^1-p^1}\sum_{k=0}^\infty\left(\frac{p^1-z^1}{w^1-p^1}\right)^k
$$
finally substituting this into (\ref{equation-multivariable-Cauchy}) we may take
the products $(p^1-z^1)^{k_1}(p^2-z^2)^{k_2}$ out of the integral and define the
remaining term as $a_{k_1k_2}$.
\end{proof}

\section{Weierstrass preparation theorem}
\label{section-Weierstrass-preparation-theorem}

\begin{definition}
\label{definition-germ}
A {\it germ} of a function near a point is a function defined on some open 
neighbourhood of the point.
\end{definition}

\begin{definition}
\label{definition-Weierstrass-polynomial}
A {\it Weierstrass polynomial} is a polynomial whose coefficients are
holomorphic functions.
\end{definition}

\begin{theorem}[Weierstrass preparation theorem]
\label{theorem-Weierstrass-preparation}
If $f:U\subset\mathbb{C}^n\to\mathbb{C}$ is holomorphic and $f$ is not
identically zero in the coordinate axis $z_n:=w$, there
is a unique germ of a monic Weierstrass polynomial $g$ whose coefficients are
holomorphic functions on the first $n-1$ variables 
and a germ of a holomorphic 
function $h$ with $h(0)\neq 0$ such that $f=gh$.
\end{theorem}

\begin{proof}

Since $f$ is not identically zero near $0$, then there is a point that we may
suppose is in the $z_n$-axis where $f$ is not zero.

Consider the function of one complex variable $f(0,\ldots,0,w)$. Since it has a
zero at $0$, is holomorphic, and is not identically zero, the zero $0$ must be
of finite order $m$ (cf. Lemma
\ref{complex-analysis-lemma-zeroes-are-isolated-and-have-finite-order}). Recall
that $m$ is the smallest integer $m$ such that $f^{(m)}(0)$.

We want to apply the Argument Principle
\ref{complex-analysis-theorem-argument-principle}.

We want to count the number of zeros that $f(0,…,0,w)$.

\end{proof}

\begin{lemma}
\label{lemma-Gauss-UFD}
If $R$ is a UDF, then $R[x]$ is a UFD.
\end{lemma}

\begin{lemma}
\label{lemma-stalk-is-UFD}
The stalk $\mathcal{O}_n:=\mathcal{O}_{\mathbb{C}^n,0}$ is a UFD.
\end{lemma}

\begin{proof}
By induction on $n$. For $n=0$ it is trivial. Suppose $\mathcal{O}_{n-1}$ is a
UFD. Then by Gauss' Lemma \ref{lemma-Gauss}, $\mathcal{O}_{n-1}[w]$ is a UFD
too. Thus we may express any Weierstrass polynomial $g$ as a product of
irreducible elements (uniquely up to multiplication by units).

Let $f\in \mathcal{O}_n$. We want to express $f$ as a product of (unique up to
multiplication by units) of irreducible elements. By Weierstrass Preparation
Theorem \ref{theorem-Weierstrass-preparation} there is a Weierstrass polynomial
$g\in\mathcal{O}_n[w]$ and a holomorphic function not vanishing on $0$ (i.e. a
unit of $\mathcal{O}_n$) such that $f=gh$. By the previous remark $g$ is
factored uniquely up to multiplication by units as $g=g_1\ldots g_m$. This shows
existence of the factorization.

To prove uniqueness suppose that $f=f_1\ldots f_k$ for some irreducible
$f_1,\ldots,f_k\in\mathcal{O}_n$. Since $f$ does not vanish in the $w$ axis,
neither can each $f_i$, so that we may decompose each of them as  $f_i=g_i'h_i$
by Weierstrass Preparation Theorem. Since $f_i$ is irreducible, it follows that
$g_i'$ is irreducible. Then we have that $$ f=gh=\prod g_i'\prod h_i $$ so by
uniqueness in Weierstrass Preparation Theorem we conclude that $g=\prod g_i'$,
and by uniqueness from the fact that  $\mathcal{O}_n[w]$ is a UFD we conclude
that $g$ coincides with $\prod g_i'$ up to multiplication by units.
\end{proof}

\section{Complex manifolds}
\label{section-complex-manifolds}

\begin{definition}
\label{definition-complex-manifold}
A {\it complex manifold} $M$ is a smooth manifold admitting an open cover
$\{U_\alpha\}$ and coordinate maps $\varphi_\alpha:U_\alpha\to\mathbb{C}^n$ such
that $\varphi_\alpha\circ\varphi_\beta^{-1}$ is holomorphic on
$\varphi_\beta(U_\alpha\cap U_\beta)\subset\mathbb{C}^n$ for all $\alpha,\beta$.
\end{definition}

\begin{definition}
\label{definition-holomorphic-function-on-complex-manifold}
A function on an open set $U\subset M$ is {\it holomorphic} if for all $\alpha$,
$f\varphi_\alpha^{-1}$ is holomorphic on 
$\varphi_\alpha(U\cap U_\alpha)\subset\mathbb{C}^n$.
\end{definition}

\begin{lemma}
\label{lemma-holomorphic-function-sheaf}
The sheaf $\mathcal{O}_M$ of holomorphic functions is a sheaf.
\end{lemma}

\section{Riemann surfaces}
\label{section-Riemann-surfaces}

\begin{definition}
\label{definition-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
A {\it meromorphic function on a Riemann surface} is a holomorphic map to the
Riemann sphere which is not identically equal to $\infty$.
\end{definition}

\begin{definition}
\label{definition-pole-of-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
A {\it pole} of a meromorphic function on a Riemann surface is any point $x$ 
such that $F(x)=\infty$.
\end{definition}

\begin{definition}
\label{definition-pole-of-meromorphic-function-on-Riemann-surface}
\begin{reference}
\cite[p. 45]{Donaldson}
\end{reference}
The {\it order} of a pole of a meromorphic function on a Riemann surface is the
integer $k_x$ such that the coordinate representation of $f$ is $f(x)=z^{k_x}$
near $x$.
\end{definition}

\begin{proposition}
\label{proposition-degree-is-constant}
\begin{reference}
\cite[p. 46]{Donaldson}
\end{reference}
Let $F:X\to Y$ be a proper, non-constant holomorphic map between connected
Riemann surfaces. Then the integer $d(y)=\# f^{-1}(y)$ does not depend on $y \in
Y$.
\end{proposition}

\begin{proof}
Using local representation of $f$ as $z^k$. But see also \ref{MilnorDT}: this
number is locally constant because we can find a neighbourhood $V$ of any point 
$y$ such that any other $y'$ in this neighbourhood has the same number of
preimages. Using compactness fix neighbourhoods $U_i$ of all the preimages of 
$y$, using that $y$ is a regular value we may suppose the $f$ is a
diffeomorphism at the $U_i$, and then define 
$V:=\cap V_i\setminus f(M\setminus\cup U_i)$.
\end{proof}

\begin{lemma}
\label{lemma-meromorphic-function-with-one-pole-of-order-1-gives-Riemann-sphere}
Let $X$ be a compact Riemann surface. If there is a meromorphic function on $X$
having exactly one pole, and that pole has order 1, then $X$ is equivalent to
the Riemann sphere.
\end{lemma}

\begin{proof}
A meromorphic function has no critical points! That is, $\infty$ is a regular
value, having one preimage by hypothesis. Then the degree of $f$ is one, so that
it must be a bijection (why?). And it has no crticial points… (why?) So by Lemma
something, its inverse must be holomorphic.
\end{proof}

\begin{exercise}
\label{exercise-canonical-bundle-of-Riemann-surface-has-no-base-points}
Show that the canonical bundle $K$ of a Riemann surface $S$ has no base points.
\end{exercise}

\begin{proof}
Suppose $p$ is a base point of $K$. We want to construct a meromorphic function
with exactly one pole and use Lemma
\ref{lemma-meromorphic-function-with-one-pole-of-order-1-gives-Riemann-sphere}
to arrive at a contradiction. Any such function is an element of
$H^{0}(\mathcal{O}(p))$. Note that by Serre duality we have:
$$
H^{0}(\mathcal{O}(p))=H^{0}(\mathcal{O}(p)\otimes K^*\otimes K)
=H^{1}(K(-p))^*
$$
So it's enough to show that $H^{1}(K(-p))$ is not zero. So consider the sheaf 
exact sequence twisted by the ideal sheaf $\mathcal{I}_p=\mathcal{O}_S(-p)$ 
of $p$:
$$
\xymatrix{
0\ar[r]&K(-p)\ar[r]&K\ar[r]&K(p)\ar[r]&0
}
$$
Then we use the exact sequence in cohomology to prove that $H^{1}(K(-p))$ is not
zero. First, $H^{1}(K(p))=0$ because by Serre duality it has the same dimension
as the space of holomorphic functions vanishing at $p$, which is only the zero
function since $M$ is compact. Next, $H^{1}(K)$ is not zero because by Dolbeault
theorem it is $H^{1,1}(M,\mathbb{R})$ which contains real 2-forms. Then
$H^{1}(K(-p))$ cannot be zero because it surjects onto a nontrivial space.
\end{proof}

\section{Belyi functions}
\label{section-Belyi-functions}

To understand Belyi functions we start by considering meromorphic functions
$f:X\to \mathbb{C}P^{1}$ as ramified coverings:

\begin{proposition}
\label{proposition-meromorphic-functions-are-ramified-coverings}
\begin{reference}
\cite[Proposition 1.8.9]{lando}
\end{reference}
A nonconstant meromorphic function $f:X\to\mathbb{C}P^{1}$, considered as a
mapping of the underlying topological space, is a ramified covering of the
sphere $S^2\cong\mathbb{C}P^{1}$.
\end{proposition}

Be careful: isomorphic complex ramified coverings produce isomorphic Riemann
surfaces (by definition), but the converse is certainly false. The same Riemann
surface may be obtained by many different and pairwise non-isomorphic coverings.
Just consider different meromorphic functions on the same surface.

\medskip\noindent

The following paragraph is an approximate quote:

Proposition \ref{proposition-meromorphic-functions-are-ramified-coverings}, and
the fact that every Riemann surface admits a meromorphic function (which can be
seen by Riemann-Roch, cf. \cite[Fact 1.8.6]{lando}) show that every Riemann
surface may be represented by a ramified covering of $\mathbb{C}P^{1}$. The
following theorem, which affirms the converse statement, is one of the most
fundamantal:

\begin{theorem}[Riemann's existence theorem]
\label{theorem-Riemann-existence}
\begin{reference}
\cite[Theorem 1.8.14]{lando}
\end{reference}
Suppose a base star is fixed in $\mathbb{C}P^{1}$, and the squence of its
terminal vertices is $R=[y_1,\ldots,y_k]$. Then for any constellation
$[g_1,\ldots,g_k]$, $g_i \in S_n$, there exists a compact Riemann surface $X$
and a meromorphic function $f:X \to \mathbb{C}P^{1}$ such that $y_1,\ldots,y_k$
are the critical values of $f$ (i.e. $f'$ vanishes at these points) and
$g_1,\ldots,g_k$ are the corresponding monodromy permutations. The ramified
covering $f:X\to \mathbb{C}P^{1}$ is independent of the choice of the base star
in a given homotopy type and is unique up to isomorphism.
\end{theorem}

\begin{proof}
The heart of this theorem is the correspondence between constellations, which
are abstract sets of permutations whose product is the identity and act
transitively on the set of $n$ elements (and are also maps on surfaces), and the
monodromy group of a covering. Indeed: for a regular point $y_0$ of a degree-$n$
convering we get an action of the symmetric group of $n$ elements on the fiber
$E:=\pi^{-1}(y_0)$; taking each generator of the fundamental group to be any of
these permutations we obtain a constallation (cf \cite[Construction
1.2.13]{lando}.

The other way around, \cite[Proposition 1.2.15]{lando}, we can define a group
homomorphism $\pi(S^2\setminus\{p_i\},y_0)\to G$ where $G$ is the group of the
constellation; the fact that the it is indeed a group homomorphism is due to the
fact that both sets of generators satisfy the property that their product is
identity. Then for any point $x$ in the set of $n$ elements we can consider its
stabilizer. This corresponds to a subgroup $M_x$ of
$\pi(S^2\setminus\{p_i\},y_0)$. Such a subgroup determines a finite-sheeted
covering of $S^2\setminus\{p_i\}$. The covering is connected since $G$ acts
transitively on $E$. {\it Habemus superficie}.
\end{proof}

The surprising result by Belyi is that for the case $k=3$ it will happen that
the corresponding Riemann surfaces will be defined over $\overline{\mathbb{Q}}$,
the field of algebraic numbers. Therefore, the absolut Galois group
$\text{Aut}(\overline{\mathbb{Q}}|\mathbb{Q})$ (that is, the automorphism group
of the field $\overline{\mathbb{Q}}$) acts on them, and thus on
$3$-constellations as well. The mysterious nature of the group and the
simplicity of the objects on which it acts, gave rise to the following term
which may look a bit strange: {\it theory of dessins d'enfants}.

\begin{definition}
\label{definition-Riemann-surface-defined-over-field}
\begin{reference}
\cite[Definition 1.8.8]{lando}
\end{reference}
If it is possible to realize a Riemann surface $X$ by a system of equations with
coefficients in a subfield $K\subseteq\mathbb{C}$, then we say that $X$ is {\it
defined over $K$}.
\end{definition}

\begin{theorem}[Belyi]
\label{theorem-Belyi}
\begin{reference}
\cite[Theorem 2.1.1]{lando}
\end{reference}
A Riemann surface $X$ admits a model over the field $\overline{ \mathbb{Q}}$ of
algebraic numbers if and only if there exists a covering $X\to \overline{
\mathbb{C}}$ unramified outside $\{0,1,\infty\}$. In such a case, the
meromorphic function $f$ can also be chosen in such a way that it will be
defined over $\overline{\mathbb{Q}}$.
\end{theorem}

\section{Analytic varieties}
\label{section-analytic-varieties}

\begin{definition}
\label{definition-analytic-variety}
An {\it analytic variety} is a subset $V$ of an open set $U\subset \mathbb{C}^n$
such that for any $p\in V$ there is a neighbourhood $U'\ni p$ such that $V\cap
U'$ is given as the zero locus of a finite set of holomorphic functions
$f_1,\ldots,f_k$ defined on $U'$.
\end{definition}

\begin{definition}
\label{definition-analytic-hypersurface}
An analytic variety is a {\it hypersurface} if it is given as the vanishing
locus of a single holomorphic function.
\end{definition}

\begin{definition}
\label{definition-irreducible-variety}
An analytic variety $V\subset U\subset \mathbb{C}^n$ is {\it irreducible} if
$V$ cannot be written as the union of two distinct analytic varieties 
$V_1,V_2\subset U$, both distinct to $V$.
\end{definition}

\begin{lemma}
\label{lemma-irreducible-analytic-hypersurface-irreducible-polynomial}
If $V$ is an analytic hypersurface given locally as $V=\{f=0\}$, then $f$ is
irreducible in $\mathcal{O}_p$.
\end{lemma}

\begin{proof}
If $f=gh$ and neither of $g$ and $h$ are units and they are distinct, we could 
express $V$ as the union of two distinct varieties: $V(g)$ and $V(h)$. (If one 
of them, was a unit then the vanishing set would be all of $U$.)
\end{proof}

\begin{definition}
\label{definition-germ-of-set}
\begin{reference}
\cite[Definition 1.1.21]{huc}
\end{reference}
The {\it germ} of a set in the origin $0\in \mathbb{C}^n$ is given by a subset
$X \subset \mathbb{C}^n$. To subsets $X,Y$ define the same germ if there exists
an open neighbourhood $0 \in U\subset \mathbb{C}^n$ with $U\cap X=U\cap Y$. A
germ is called {\it analytic} if there are functions $f_1,\ldots,f_k\in
\mathcal{O}_n$ such that $X$ and $Z(f_1,\ldots,f_k)$ define the same germ.
\end{definition}

\begin{lemma}
\label{lemma-analytic-germ-is-irreducible-iff-prime-ideal}
\cite[Lemma 1.1.28]{huc}
An analytic germ $X$ is irreducible if and only iff $I(X)$ is a prime ideal.
\end{lemma}

\begin{proof}
If $X$ is irreducible let $fg\in I(X)$. Then $V(I(X))\subset V(f)\cup V(g)$. But
since $X$ is irreducible we cannot express $X \cap (V(f) \cup  V(g))$ unless
either of $V(f)$ or $V(g)$ are trivial or equal to $X \cap V(f)$ or $X \cap
V(g)$.

The converse I won't need right now.
\end{proof}

\section{Analytic subvarieties}
\label{section-analytic-subvarieties}

\begin{definition}
\label{definition-analytic-subvariety}
\cite{gri}. An {\it analytic subvariety} $V$ of a complex manifold $M$ is a
subset given locally as the zeros of a finite collection of holomorphic
functions.
\end{definition}

For a smooth submanifold $M$ of a complex manifold $N$ we have the {\it normal 
short exact sequence}
$$
\xymatrix{
0\ar[r]&TM\ar[r]&TN\ar[r]&T^\perp M\ar[r]&0
}
$$
If $M$ is a singular subscheme we have the {\it ideal short exact sequence}
$$
\xymatrix{
0\ar[r]&\mathcal{I}_M\ar[r]&\mathcal{O}_N\ar[r]&\mathcal{O}_M\ar[r]&0
}
$$
which follows from definition of a closed embedded subscheme.

If $M$ is a singular analytic subvariety we also have an ideal short exact
sequence, this time using the holomorphic function sheaves.

\begin{lemma}
\label{lemma-ideal-sheaf-is-line-bundle-schemes}
The ideal sheaf of an irreducible codimension-1 closed subscheme of a smooth
scheme is a line bundle.
\end{lemma}

\begin{proof}
Since $M$ is codimension-1 irreducible, the ideal sheaf at every affine chart is
a codimension-1 prime ideal. This means that there aren't any nontrivial prime
ideals of $\mathcal{I}_X(\text{Spec}A):=I$. Let $f\in I$.
Since $X$ is smooth, $O_X\text{Spec}A=A$ is a UFD. Then there exists an
irreducible element $g\in I$ such that $gh=f$. The ideal generated by $g$ is
prime and contained in $I$, so that $I$ is principal. This shows that
$\mathcal{I}_M$ is locally principal, i.e. it is a line bundle.
\end{proof}

In the case of complex manifolds and analytic subvarieties, we can prove this
completely via Weierstrass preparation theorem. We only need the following other
results:

\begin{lemma}
\label{lemma-ideal-of-irreducible-hypersurface-is-height-1-prime}
The ideal of an irreducible analytic hypersurface is a height-1 prime ideal.
\end{lemma}

\begin{proof}
The fact that it is prime comes from the fact that $X$ is irreducible. Now
suppose that $0 \subset \mathfrak{p} \subset I$ with strict contentions. Then
$V(\mathfrak{p})$ is an analytic variety that contains $X$. Since $X$ is
codimension 1, we have that $V(\mathfrak{p})$ coincides with $X$ at regular
points. In a neighbourhood of a regular point we thus have 
$\mathfrak{p}=I(V(\mathfrak{p}))=I$ by the Nullstellensatz.
\end{proof}


\begin{lemma}
\label{lemma-Gauss-UFD}
If $R$ is a UFD, then $R[x]$ is a UFD.
\end{lemma}

I will not prove the complete statement. The only fact I need from this
reasoning is that every element of $\mathcal{O}_n$ has an irreducible factor.

\begin{lemma}
\label{lemma-polynomials-over-UFD-have-irreducible-factor}
If $R$ is a UFD then every element in $R[x]$ has an irreducible factor.
\end{lemma}

\begin{proof}
Let $f\in R[x]$. Consider the field of fractions $F$ of $R$. Then $f$ has a
factorization into irreducibles in $F[x]$: if $f$
is linear it is irreducible since every constant is a unit; if $f$ has higher
degree we use induction (suppose $f=gh$ and decompose $g$ and $h$ into
irreducibles). Thus we can write $f=g_1\ldots g_r$.

We may also write $g_1=cg_1'$ where $c$ is the gcd of the coefficients of $g_1$.
(Apparently not in every ring we can pick a gdc, but at least in $R$ we can
since it is a UFD; just write all elements as products of irreducibles and pick
the greatest in common.)

Now observe that an irreducible element of $F[x]$ that is also primitive (i.e.
the gdc of its coefficients is 1) must be irreducible in $R[x]$. Indeed, if
$g_1=pq$ for $p,q \in R[x]$, since $g_1$ is irreducible in $F[x]$ and  $p,q \in
F[x]$ we must have that, say, $p \in F$. But since $p \in R[x]$, in fact $p\in
R$. Thus $p$ is a common divisor of the coefficients of $g_1$, a contradiction
since $g_1$ is primitive.
\end{proof}

The following statement is enough to show that the ideal sheaf of a
codimension-1 subvariety is locally principal:

\begin{lemma}
\label{lemma-}
Any element of $\mathcal{O}_n$ has an irreducible factor.
\end{lemma}

\begin{proof}
By induction on $n$. For $n=0$ it is trivial. Suppose that any element of
$\mathcal{O}_{n-1}$ has an irreducible factor.

By Weierstrass Preparation theorem \ref{theorem-Weierstrass-preparation} we may
write $f=gh$ for $g\in \mathcal{O}_{n-1}[z_n]$ and $h$ not vanishing at zero. By
Lemma \ref{lemma-polynomials-over-UFD-have-irreducible-factor}, $g$ has an
irreducible factor $g_1$. Then all we have to do is show that $g_1$ is
irreducible in $\mathcal{O}_n$.

To obtain a contradiction suppose that $g_1$ is reducible in
$\mathcal{O}_n$. Then we can write $g_1=h_1h_2$ for $h_i$ not units in
$\mathcal{O}_n$, that is, $h_i$ have a zero at zero. Then we may apply
Weierstrass Preparation theorem to both $h_i$ and obtain $h_i=u_ip_i$. Then we
can write $g_1u_1^{-1}u_2^{-1}=p_1p_2$. This says that $g_1$ divides $p_1p_2$ in
$\mathcal{O}_n$.

Since the proof of Weierstrass polynomials uses the elementary symmetric
polynomials as coefficients, which are monic as elements of
$\mathcal{O}_{n-1}[z_n]$, e can apply highschool division algorithm in
$\mathcal{O}_{n-1}[z_n]$. Indeed, we multiply $p_1p_2$ by a polynomial $q$ so
that $q(p_1p_2)$ has the same degree as $g_1$, thus obtaining a reminder of
smaller degree. That is, we obtain $g_1=q(p_1p_2)+r$.

When we restrict these functions to the $(0,z_n)$ axis we see that $r$ must
vanish in all the roots of $g_1$ and $p_1p_2$. But $r$ must be a polynomial in
$z_n$ of degree smaller than $g_1$ by division algorithm, so it can only have so
many zeroes if it vanishes completely. 
This shows that $g_1=q(p_1p_2)$ in $\mathcal{O}_{n-1}[z_n]$, none of which are
units, that is, $g_1$ is reducible in $\mathcal{O}_{n-1}[z_n]$, which is a
contradiction.
\end{proof}

\begin{lemma}
\label{lemma-stalk-is-UFD}
The stalk $\mathcal{O}_n:=\mathcal{O}_{\mathbb{C}^n,0}$ is a UFD.
\end{lemma}

\begin{proof}
By induction on $n$. For $n=0$ it is trivial. Suppose $\mathcal{O}_{n-1}$ is a
UFD. Then by Gauss' Lemma \ref{lemma-Gauss}, $\mathcal{O}_{n-1}[w]$ is a UFD
too. Thus we may express any Weierstrass polynomial $g$ as a product of
irreducible elements (uniquely up to multiplication by units).

Let $f\in \mathcal{O}_n$. We want to express $f$ as a product of (unique up to
multiplication by units) of irreducible elements. By Weierstrass Preparation
Theorem \ref{theorem-Weierstrass-preparation} there is a Weierstrass polynomial
$g\in\mathcal{O}_n[w]$ and a holomorphic function not vanishing on $0$ (i.e. a
unit of $\mathcal{O}_n$) such that $f=gh$. By the previous remark $g$ is
factored uniquely up to multiplication by units as $g=g_1\ldots g_m$. This shows
existence of the factorization.

To prove uniqueness suppose that $f=f_1\ldots f_k$ for some irreducible
$f_1,\ldots,f_k\in\mathcal{O}_n$. Since $f$ does not vanish in the $w$ axis,
neither can each $f_i$, so that we may decompose each of them as  $f_i=g_i'h_i$
by Weierstrass Preparation Theorem. Since $f_i$ is irreducible, it follows that
$g_i'$ is irreducible. Then we have that $$ f=gh=\prod g_i'\prod h_i $$ so by
uniqueness in Weierstrass Preparation Theorem we conclude that $g=\prod g_i'$,
and by uniqueness from the fact that  $\mathcal{O}_n[w]$ is a UFD we conclude
that $g$ coincides with $\prod g_i'$ up to multiplication by units.
\end{proof}

\begin{lemma}
\label{lemma-ideal-sheaf-is-line-bundle-analytic-varieties}
The ideal sheaf of an irreducible codimension-1 analytic subvariety of a smooth
complex manifold is a line bundle.
\end{lemma}

\begin{proof}
By definition, our subvariety $M$ is locally defined by the zeroes of a single 
holomorphic function defined on the ambient manifold $X$. That is,
at every $p\in M$ there is an open set $U\subset X$ such that $U\cap
M=f^{-1}(0)$ for some $f\in\mathcal{O}_X(U)$. Since $U$ is an open set of a
complex manifold, the ring $\mathcal{O}_X(U)$ is isomorphic to the ring
$\mathcal{O}_n$ of holomorphic functions on $\mathbb{C}^n$ in a neighbourhood of
the origin; that's by Definition \ref{definition-holomorphic-function} since a
holomorphic function on a manifold is defined as such if its composition with
the coordinate chart is a holomorphic function on $\mathbb{C}^n$.

By Lemma
\ref{lemma-irreducible-analytic-hypersurface-irreducible-polynomial}, since $M$
is irreducible it follows that $f$ is irreducible and so is the ideal of
functions vanishing on $M$.

By Lemma \ref{lemma-stalk-is-UFD}, we prove identically as in Lemma 
\ref{lemma-ideal-sheaf-is-line-bundle-schemes} that the ideal of functions
vanishing on $M$ is principal.
\end{proof}

\begin{definition}
\label{definition-sheaf-associated-to-effective-Cartier-divisor}
Let $D:=S$ be an effective Cartier divisor, that is, an analytic hypersurface of
a complex manifold. The ideal sheaf $\mathcal{I}_S:=\mathcal{O}_X(-S)$ of $S$ is
the dual line bundle of the {\it line bundle associated to the divisor $D$},
which is denoted by $\mathcal{O}_X(D)$.
\end{definition}

\section{Riemann-Roch formulas}
\label{section-Riemann-Roch}

\begin{theorem}[Rieman-Roch for curves]
\label{theorem-Riemann-Roch-for-curves}
 \begin{equation}
\label{equation-Riemann-Roch-for-curves}
h^0(D)-h^0(K-D)=d-g+1
\end{equation}
\end{theorem}

\begin{theorem}[Riemann-Roch for Riemann surfaces]
\label{theorem-Riemann-Roch-for-Riemann-surfaces}
Let $D$ be a divisor on a compact Riemann surface $X$, that is, $D$ is a
collection of $d$ points on $X$.
\begin{equation}
\label{equation-Riemann-Roch-for-Riemann-surfaces}
h^0(D)-h^0(K-D)=d-g+1
\end{equation}
\end{theorem}

\section{Adjunction formula}
\label{section-adjunction-formula}

\begin{lemma}
\label{lemma-adjunction-formula-for-curves-on-surfaces}
Let $S$ be any curve on a surface $X$. Then
\begin{equation}
\label{equation-adjunction-formula-for-curves-on-surfaces}
2p_a(S)-2=(S.S-K_X)
\end{equation}
\end{lemma}

\begin{proof}
If $S$ is nonsingular we may use the normal bundle short exact sequence. If
$S$ is singular we need to use the ideal sheaf short exact sequence, which means
we think of $S$ either as a closed embedded subscheme of $X$ or as an analytic 
subvariety. Taking Euler class we obtain
$$
\chi(\mathcal{O}(-S))+\chi(\mathcal{O}_S)=\chi(\mathcal{O}_X)
$$
Since $p_a(S):=1-\chi(\mathcal{O}_S)$, we obtain that
$p_a(S)=1-\chi(\mathcal{O}_X)-\chi(\mathcal{O}(-S))$. To compute
$\chi(\mathcal{O}(-S))$ we use Riemann-Roch formula
\ref{equation-Riemann-Roch-for-curves-on-surfaces} for curves on surfaces, which
gives
$$
\chi(\mathcal{O}(-S))=\chi(\mathcal{O}_X)
+\frac{(\mathcal{O}(-S).\mathcal{O}(-S)+\omega_X^*)}{2}
$$
Taking duals on both entries of the intersection form and substituting in our
previous expression for $p_a(S)$ we obtain the result.
\end{proof}

\begin{exercise}
\label{exercise-singular-curve-on-K3-has-positive-self-intersection}
Let $S$ be a singular, irreducible complex curve on a K3 surface. Prove that
$(S.S)\geq 0$.
\end{exercise}

\begin{proof}
This is just an application of Eq.
\ref{equation-adjunction-formula-for-curves-on-surfaces}. Since
$K_X=\mathcal{O}_X$ it suffices to show that $p_a(S)$ is not zero. This follows
fact that $S$ is singular, since its arithmetic genus is defined as the genus of
its normalization, which must be strictly positive since there exists at least
one singularity.
\end{proof}

\section{Chow's theorem}
\label{section-chow-theorem}

\begin{proposition}
\label{proposition-slice-charts}
Every codimension-$p$ submanifold of a complex $n$-manifold has slice charts,
i.e. for any $p \in M$ there's a coordinate chart $U \ni p$ such that points of
$M$ have coordinates $(z_1,\ldots,z_n,0,\ldots 0)$.
\end{proposition}

\begin{proof}
This may be taken as the definition of smooth (real or complex) submanifold, or
as a proposition using inverse function theorem (real or complex).
\end{proof}

\begin{proposition}
\label{proposition-stalk-is-PID}
Stalk of holomorphic functions is a PID.
\end{proposition}

\begin{proof}
This can be proved via Weierstrass Preparation theorem
\ref{theorem-Weierstrass-preparation} which implies
 Lemma \ref{lemma-stalks-are-UFDs}, and this in turn implies Lemma 
\ref{lemma-codimension-1-ideals-in-UFD-are-principal}.

Also, it can be shown directly for smooth hypersurfaces
 as in \cite{lec} Lemma 3.38.
\end{proof}

\begin{theorem}[Chow for hypersurfaces]
\label{theorem-Chow-for-hypersurfaces}
Every complex codimension-1 submanifold of $\mathbb{C}P^{n}$ is algebraic.
\end{theorem}

\section{Ampleness}
\label{section-ampleness}

\begin{definition}
\label{definition-base-point}
\begin{reference}
\cite[Definition 2.3.25]{huc}
\end{reference}
Let $L$ be a holomorphic bundle on a complex manifold $X$. A point $x \in X$ is
a {\it base point} of $L$ if $s(x)=0$ for all $s\in H^{0}(X,L)$. 
\end{definition}

\begin{definition}
\label{definition-base-locus}
\begin{reference}
\cite[Definition 2.3.25]{huc}
\end{reference}
Let $L$ be a holomorphic bundle on a complex manifold $X$. 
The {\it base locus} $\text{Bs}(L)$ is the sate of all base points of $L$.
\end{definition}

\begin{proposition}
\label{proposition-canonical-map}
\begin{reference}
\cite[Proposition 2.3.26]{huc}
\end{reference}
Let $L$ be a holomorphic line bundle on a complex manifold $X$ and suppose that
$s_0,\ldots,s_N\in H^{0}(X,L)$ is a basis. Then
\begin{align*}
\varphi_L: X\setminus\text{Bs}(L) &\longrightarrow \mathbb{P}^N \\
x &\longmapsto (s_0(x):\ldots:s_N(x))
\end{align*}
defines a holomorphic map such that $\varphi^*
_L\mathcal{O}_{\mathbb{P}^N}(1)\cong L|_{X\setminus\text{Bs}(L)}$.
\end{proposition}

\begin{definition}
\label{definition-linear-system}
\begin{reference}
\cite[p. 86]{huc}
\end{reference}
The map $\varphi_L$ in Proposition \ref{proposition-canonical-map} is said to be
associated to the {\it complete linear system} $H^{0}(X,L)$ (i.e. the sections
of $L$ are what we call a complete linear system) whereas a subspace of 
$H^{0}(X,L)$ is called a {\it linear system} of $L$.
\end{definition}

\begin{definition}
\label{definition-globally-generated}
\begin{reference}
\cite[p. 86]{huc}
\end{reference}
$L$ is {\it globally generated} by the sections $s_0,\ldots,s_N$ if
$\text{Bs}(L,s_0,\ldots,s_N)=\emptyset$.
\end{definition}

\begin{definition}
\label{definition-ample}
\begin{reference}
\cite[Definition 2.3.28]{huc}
\end{reference}
A line bundle $L$ on a complex manifold is called {\it ample} if for some $k>0$
and some linear system in $H^{0}(X,L^k)$ the associated map $\varphi$ is an
embedding.
\end{definition}

\begin{slogan}
By definition, a compact complex manifold is projective if and only if it admits
an ample line bundle.
\end{slogan}

\begin{exercise}
\label{exercise-L-ample-implies-Lotimes2-globally-generated}
Let $L$ be an ample bundle on a K3 surface $M$. Prove that $L^{\otimes 2}$ is
globally generated (that is, for each $x \in M$ there exists a section $h \in
H^{0}(L^{\otimes 2})$ which does not vanish in $x$).
\end{exercise}

\begin{proof}
\begin{reference}
\href{https://math.stackexchange.com/questions/5081481/
ample-line-bundle-on-a-k3-surface-implies-l-otimes-2-is-base-point-free/
5081492?noredirect=1#comment10928708_5081492}{StackExchange}
\end{reference}
As an outline for exposition:
\begin{enumerate}
\item Show that $L$ has sections (by ampleness+Kodaira Vanishing+Riemann-Roch), 
pick a section $C$ and note that if 
$L^{\otimes2}$ had base points they would be in $C$.
\item Show that restriction map is surjective (Kodaira Vanishing).
\item Show that inclusion map is not surjective. For this it's enough to show
that $\dim|D|=\dim|D-p|+1$. This follows by writing the formula of Riemann-Roch
for both of these Weil divisors (have to pass to Weil divisors). But you will
need to make sure that $h^0(K-D)$ and $h^0(K-(D-p))$ are zero.
\end{enumerate}

First we need to show that $L$ has sections. To see this I will shot that since
$L$ is ample, $L^2>0$. Indeed, if $mL$ is very ample we apply by Riemann-Roch,
 Kodaira Vanishing and the fact that $\chi(\mathcal{O}_X)=2$ on a K3 to obtain 
$h^0(mL)=2+\frac{1}{2}m^2L^2$ which must be positive since $mL$ has sections by
being very ample. Notice $L^2$ cannot be zero as $h^0(mL)=2$ would imply we have
an embedding of a K3 surface into $\mathbb{P}^1$.

Applying again Riemann-Roch and Kodaira vanishing we see that $h^0(L)>0$. Let
$C$ be a section of $L$.

Notice that if $L^{\otimes 2}$
had any base points, they would have to be on $C$. Indeed, since $C$ is the
vanishing set of a section $s\in H^{0}(L)$, we must have $s \otimes s \in
H^{0}(L^{\otimes 2})$ vanishing in any base point of $L^{\otimes 2}$.

Then we consider the ideal exact sequence for $C$ and tensor by $L^{\otimes 2}$
to obtain
$$
\xymatrix{
0\ar[r]&L^{\otimes 2}(-C)\ar[r]&L^{\otimes 2}\ar[r]&
L^{\otimes 2}\otimes\mathcal{O}_C\ar[r]&0
}
$$
Notice that the term on the left is actually $L$ since the ideal sheaf
$\mathcal{O}_M(-C)=\mathcal{I}_C$ is dual to $L$ because $C$ is defined as the
vanishing set of a section of $L$. Passing to cohomology we obtain
 $$
\xymatrix{
H^{0}(L^{\otimes 2})\ar[r]&H^{0}(L^{\otimes 2}\otimes \mathcal{O}_C)\ar[r]&
H^{1}(L)
}
$$
where the latter term vanishes by Kodaira Vanishing because $L$ is ample.
This says that every section of $L^{\otimes 2}|_C$ is the
restriction to $C$ of a section of $L^{\otimes 2}$. In turn this shows that it's
enough to show that the bundle $L^{\otimes 2}$ has no base points along $C$.

By adjunction formula for (possibly singular) curves on smooth surfaces and by 
the fact that $M$ is smooth, we see that $2p_a(C)-2=(L.L)$ so that
$$
4p_a(C)-4=(2L.L)=\text{deg}_C(L^{\otimes 2})
$$
Notice that since $L^2>0$ we exclude the cases that $p_a(C)=0,1$.

To conclude pick a point $p\in C$. Saying that $p$ is not a base point of
$L^{\otimes 2}|_{C}$ is the same as saying that not every section of $L^{\otimes
2}|_{C}$ vanishes at $p$, that is, that 
$h^0(L^{\otimes 2}|_{C}(-p))<h^0(L^{\otimes 2}|_{C})$.

Now I will prove that since the degree of $L^{\otimes 2}|_{C}$ and $L^{\otimes
2}|_{C}(p)$ is greater than $2p_a(C)$ we have that 
$h^0(\omega_C\otimes (L^{\otimes2}|_{C})^\vee)=0
=h^0(\omega_C\otimes (L^{\otimes 2}|_{C}(-p))^\vee)$. For this we need to see these line
bundles as Weil divisors by simply taking sections, whose vanishing sets are 
finite sets of points with multiplicities. Then their degree is the sum of the
multiplicities.  This definition makes degree additive with respect to tensor
product (we may take local sections and sum degrees). By Riemann-Roch on the curve
$C$, we know that $\text{deg}\omega_C=2p_a-2$. Then

$$
\text{deg}_C(\omega_C\otimes L^{\otimes 2})
=\text{deg}_C(\omega_C)+\text{deg}_C(L^{\otimes 2})
=2p_a-2-(4p_a(C)-4)<0
$$
and a similar computation works for $L^{\otimes 2}(-p)$ as it has the same
degree of $L^{\otimes 2}$ minus 1. This implies that neither of these bundles
can have sections since any section would provide a linearly equivalent
effective divisor. This would be a contradiction since both
$L^{\otimes 2}$ and $L^{\otimes 2}(-p)$ have sections. Therefore 
$h^0(\omega_C\otimes (L^{\otimes2}|_{C})^\vee)=0
=h^0(\omega_C\otimes (L^{\otimes 2}|_{C}(-p))^\vee)$ as claimed.

Finally we apply Riemann-Roch to $L^{\otimes 2}$ and $L^{\otimes 2}(-p)$ to
obtain that $h^0(L^{\otimes 2})>h^0(L^{\otimes 2}(-p))$.
\end{proof}

\section{Bertini's theorem}
\label{section-Bertini-theorem}

\begin{slogan}
In \(\mathbb{C}^n\) many complex hypersurfaces can be written as regular level
sets of globally defined holomorphic functions. But in a compact complex
manifold, this is never possible, because all global holomorphic functions are
constants. Instead, we can use sections of line bundles.
\end{slogan}

\section{Serre duality}
\label{section-serre-duality}

\begin{theorem}[Serre duality]
\label{theorem-serre-duality}
\cite{voi} II.5.32. The pairing
$$
H^q(X,\mathcal{E})\otimes
H^{n-q}(X,\mathcal{E}^*\otimes K_X)\to H^{n}(X,K_X)\cong\mathbb{C}
$$
is perfect.
\end{theorem}

So when you put the dual \(\vee\) on one of these you get isomorphism.

Our course version says:
$$
H^{k}(X,\mathcal{L})^{\vee}=H^{n-k}(X,\omega_X \otimes \mathcal{L}^*)
$$
\section{Kodaira Vanishing theorem}
\label{section-Kodaira-vanishing-theorem}

\begin{theorem}[Kodaira Vanishing]
\label{theorem-Kodaira-vanishing}
\begin{reference}
\cite[21.5.8]{sea}
\end{reference}
Suppose $k$ is a field of characteristic 0, and $X$ is a
smooth projective $k$-variety. Then for any ample invertible sheaf $L$,
$H^{i}(X,K_X \otimes L)=0$ for $i>0$.
\end{theorem}

\begin{proof}
No proof in \cite{sea}.
\end{proof}

\section{Kodaira Embedding theorem}
\label{section-Kodaira-Embedding-theorem}

The forward implication is easy and sometimes not considered as part of the
theorem.

Compare this theorem with Nakai-Moishezon Criterion
\ref{algebraic-geometry-theorem-Nakai-Moishezon-criterion}.

\begin{theorem}[Kodaira Embedding]
\label{theorem-Kodaira-embedding}
\begin{reference}
\cite[Theorem 10.12]{lec}
\end{reference}
Suppose $M$ is a compact complex manifold. A holomorphic line bundle $L\to M$ is
ample if and only if it is positive. Thus $M$ is projective if and only if it
admits a holomorphic line bundle.
\end{theorem}

\begin{proof}
The easy implication as follows. If $L$ is ample then there is $N$ such that
$L^{\otimes N}$ is very ample, meaning by Misha's definition that the canonical
map is an embedding such that $L^{\otimes N}=\varphi^*\mathcal{O}(1)$, which has
degree 1 by definition as in \cite[15.4.14]{sea}.
\end{proof}

\section{Hypercomplex manifolds}
\label{section-hypercomplex-manifolds}

\begin{exercise}
\label{exercise-SU2-invariant-forms}
Prove that the subspace of $\text{SU}(2)$-invariant forms is finite dimensional.
\end{exercise}

\begin{proof}
Idea: show that
Hodge star $*\omega$ is in the $\text{SU}(2)$-orbit of $\omega$ and conclude
that $\int \omega\wedge *\omega=0$, implying that $\|\omega\|=0$.
\end{proof}

\begin{exercise}
\label{exercise-closed-fundamental-forms-on-almost-hypercomplex-manifold}

\end{exercise}

\begin{proof}
Idea: find a counterexample. The easiest should be a Kummer surface. It looks
possible to find an almost hypercomplex structure on $\mathbb{C}^2$ passing to
the torus and then to the $\mathbb{Z}_2$ quotient, but not clear what will
happen after blowing up.
\end{proof}

\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}
