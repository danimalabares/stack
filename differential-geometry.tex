\input{preamble}

\begin{document}

\title{Differential Geometry}
\maketitle

\phantomsection
\label{section-phantom}
\hfill
\href{http://github.com/danimalabares/stack}{github.com/danimalabares/stack}
\tableofcontents

\section{Connections}
\label{section-connections}

\begin{example}
\label{example-euclidean-connection}
The usual connection in $\mathbb{R}^n$ is given by 
$$
\nabla_XY=X(Y^i)\partial_i
$$
\end{example}

\begin{proposition}[Everything I know about connections]
\label{proposition-existence-of-pullback-connection}
\end{proposition}

\begin{lemma}
\label{lemma-composition-of-pullback-connections}
\cite{aulas}, p.5. If $g:M_1\to M_2$ and $f:M_2\to M_3$ are smooth maps of 
manifolds and $E$ is a vector bundle over $M_3$, then
$$
g^* (f^* (E))=(f\circ g)^* (E)\qquad \text{and}\qquad
(\nabla^f)^g=\nabla^{f\circ g}
$$
\end{lemma}

The following three lemmas are fundamental properties of isometric
immersions and will be used in Section \ref{section-isometric-immersions}. (Cf.
Lista 3, Exercise 2.)

\begin{lemma}
\label{lemma-tangent-component-of-pullback-connection-by-ii-is-LC}
If $f:M \to \tilde{M}$ is an isometric immersion, then 
$f_*(\nabla_XY)=(\nabla^f_Xf_*Y)^\top$.
\end{lemma}

\begin{proof}
We have to check that $(\nabla^f_Xf_*Y)^\top$ is a torsion-free and compatible
connection on $TM$.
\end{proof}

\begin{lemma}
\label{lemma-isometric-immersion-along-curve}
Let $f:M \to \tilde{M}$ be an isometric immersion, $c$ is a smooth curve in $M$
and $Y\in\mathfrak{X}_c$. Then
$$
f_*\nabla_{\frac{d}{dt}}^\gamma Y
=\left(\nabla^{f\circ\gamma}_{\frac{d}{dt}}f_*Y\right)^\top
$$
\end{lemma}

\begin{proof}
This is just a mixture of Lemmas \ref{lemma-composition-of-pullback-connections}
 and \ref{lemma-tangent-component-of-pullback-connection-by-ii-is-LC}.
\end{proof}

The following result accounts for the definition of totally geodesic
submanifolds, cf. Definition \ref{definition-totally-geodesic-submanifold}.

\begin{lemma}
\label{lemma-totally-geodesic-submanifold}
Let $f:M \to \tilde{M}$ be an isometric immersion and $\gamma:I\to M$ a smooth
curve parametrized by arclength. Show that $\gamma$ is a geodesic of M
if and only if its acceleration on $\tilde{M}$ is perpendicular to $M$, that is,
$$
\tilde{\nabla}^{f\circ\cong\gamma}_{\frac{d}{dt}}(f\circ\gamma)'\perp
f_*(T_{\gamma(t)}M)
$$
\end{lemma}

\begin{proof}
Decompose the vector field 
$\tilde{\nabla}^{f\circ\cong\gamma}_{\frac{d}{dt}}(f\circ\gamma)'$ in tangent and
normal part. Then apply Lemma 
\ref{lemma-tangent-component-of-pullback-connection-by-ii-is-LC}.
\end{proof}

\section{Riemannian submersions and immersions}
\label{section-Riemannian-submersions-and-immersions}

For any smooth manifold submersion $\pi:\tilde{M}\to M$ there is a bundle
isomorphism I love: 
\begin{equation}
\label{equation-submersion-bundle-decomposition}
\pi^*TM \oplus \Ker \pi\cong
T\tilde{M} \end{equation}
 where $\Ker\pi$ is the {\it kernel bundle}, whose
fiber is the kernel of $\pi_*$, and is also called the {\it vertical bundle}.
Proving that $\Ker\pi$ is in fact a bundle and confirming the isomorphism
\ref{equation-submersion-bundle-decomposition} is a simple exercise.

We call $\pi$ a {\it riemannian submersion} only when $\pi^*TM$ is isometric to
$TM$, which makes sense only when $\tilde{M}$ and $M$ are Riemannian manifolds.

Following notation of \cite{Milnor-Characteristic-Classes}, for any subbundle
$\xi \subset\eta$ over a Riemannian manifold, the {\it orthogonal complement
bundle} $\xi^\perp$ can be defined fiberwise as the orthogonal complement of the
fiber and shown to be a bundle as in the case of the kernel bundle. Then Milnor
defines the {\it normal bundle} when $\xi$ is the tangent bundle of a
submanifold. Finally this construction is noted to work just as well for any
isometric immersion $f:M\to \tilde{M}$, so that
\begin{equation}
\label{equation-immersion-bundle-decomposition}
f^*T\tilde{M}\cong TM\oplus T^\perp M
\end{equation}
Further, in problem 3-B we are asked to define for $\xi \subset \eta$ the {\it
quotient bundle} and show it's a bundle. And if $\eta$ has a Riemannian metric,
then $\xi^\perp\cong\eta/\xi$. So that's why we sometimes say that we can define
the normal bundle using a Riemannian metric but we don't need to.

An interesting thought is: given a subbundle, is there a manifold whose tangent
bundle is that subbundle?

\section{Geodesics}
\label{section-geodesics}

\begin{proposition}
\label{proposition-naturallity-of-exponential}
If $f:M\to \tilde{M}$ is an isometry,
$$
\xymatrix{
B_\varepsilon(0)\subset T_pM \ar[r]^{d_p f} \ar[d]_{\text{exp}_p} &
B_\varepsilon(0)\subset T_{f(p)}\tilde{M} \ar[d]^{\text{exp}_{f(p)}} \\
B_\varepsilon(p)\subset M \ar[r]_{f} & B_\varepsilon(f(p))\subset \tilde{M}
}
$$
\end{proposition}

\begin{proof}
Isometry maps geodesics to geodesics by Lemma 
\ref{lemma-isometry-maps-geodesics-to-geodesics}, then uniqueness of solutions
of ODEs.
\end{proof}

\begin{proposition}[Totally Normal Neighbourhoods]
\label{proposition-totally-normal-neighbourhoods}
For all $p \in M$ there is a neighbourhood $W \ni p$ and a number $\delta>0$ 
 such that for every $q \in W$, $B_\delta(q)$ is normal and
 $W \subset B_\delta(q)$. 
\end{proposition}

\section{Curvature}
\label{section-curvature}

The {\it curvature tensor} is
\begin{equation}
\label{equation-curvature-tensor}
R(X,Y)Z=\nabla_X\nabla_YZ-\nabla_Y\nabla_XZ-\nabla_{[X,Y]}Z
\end{equation}

\begin{proposition}
\label{proposition-symmetries-of-curvature-tensor}
The curvature tensor is a tensor and
\begin{enumerate}
\item It is antisymmetric in the first two and last two entries,
\item $\left<R(X,Y)Z,W\right>=\left<R(Z,W)X,Y\right>$, and
\item Bianchi identity.
\end{enumerate}
\end{proposition}

Given a dimension-2 vector subspace $\sigma\subset T_pM$, the {\it sectional
curvature} of $M$ in $\sigma$ is
\begin{equation}
\label{equation-sectional-curvature}
K(\sigma)=\frac{\left<R(u,v)v,u\right>}
{\left<u,u\right>\left<v,v\right>-\left<u,v\right>^2}
\end{equation}
for any base $\{u,v\}$ of $\sigma$.

\begin{lemma}
\label{lemma-sectional-curvature-is-well-defined}
Sectional curvature does not depend on the choice of base.
\end{lemma}

\begin{proposition}
\label{proposition-curvature-like-tensor-determined-by-sectional-curvature}
Let $R$ and $R'$ be two type $(0,4)$ tensors on a vector space $\mathbb{V}$. If
their associated sectional curvatures $K$ and $K'$ are equal, then so are $R$
and $R'$.
\end{proposition}

\begin{proof}
Polarize and make lots of computations, cf. \cite{doc}.
\end{proof}

If a manifold has constant sectional curvature $c$,
\begin{equation}
\label{equation-constant-curvature}
\left<R(X,Y)Z,W\right>=
c(\left<X,Z\right>\left<Y,W\right>-\left<X,W\right>\left<Z,Y\right>)
\end{equation}
since the right-hand-side of Eq. \ref{equation-constant-curvature} is a
so-called curvature tensor, i.e. a tensor satisfying the symmetries of $R$, and
applying Proposition 
\ref{proposition-curvature-like-tensor-determined-by-sectional-curvature}.

The {\it Ricci tensor} is
\begin{equation}
\label{equation-Ricci-tensor}
\begin{aligned}
\text{Ric}: TM\times TM &\longrightarrow \mathbb{R} \\
\text{Ric}(X,Y)&=\frac{1}{n-1}\text{tr}(Z\mapsto R(Z,X)Y)
\end{aligned}
\end{equation}
It is symmetric.

The {\it Ricci curvature} is
\begin{equation}
\label{equation-Ricci-curvature}
\begin{aligned}
\text{Ric}: T^1M &\longrightarrow \mathbb{R} \\
\text{Ric}(X)=\text{Ric}(X,X)&=\frac{1}{n-1}\sum_{i=1}^{n-1}K(X,E_i)
\end{aligned}
\end{equation}
where $\{X,E_1,\ldots,E_{n-1}\}$ is an orthonormal basis.

The {\it scalar curvature} is
\begin{equation}
\label{equation-scalar-curvature}
\begin{aligned}
\text{scal}: M &\longrightarrow \mathbb{R} \\
\text{scal}(p)&=\frac{1}{n}\text{tr}\text{Ric}
=\frac{1}{n}\sum_i\text{Ric}(E_i,E_i)
\end{aligned}
\end{equation}

\begin{lemma}
\label{lemma-scalar-curvature-is-mean-of-sectional}
$$
\text{scal}(p)=\frac{1}{n}\sum_{i}\text{Ric}(e_i,e_i)
=\frac{1}{n(n-1)}\sum_{i,j}K(e_i,e_j)
=\frac{1}{\text{Vol}(S^{n-1})}\int_{\sigma\subset T_pM}K(\sigma)
$$
\end{lemma}


\section{Jacobi Fields}
\label{section-jacobi-fields}

\begin{proposition}[Everyday Jacobi field]
\label{proposition-everyday-jacobi-field}
\cite{doc} Chapter V, Proposition 2.4. Let $\gamma:[0,a]\to M$ be a normalized
geodesic and let $J$ be a Jacobi field through $\gamma$ with $J(0)=0$.
Let $p:=\gamma(0)$ $w:=J'(0)$ and  $v:=\gamma'(0)$. 
Consider the variation
$$
f(s,t):=\text{exp}_{p}(t(v+sw))
$$
Then the associated Jacobi field is $J$. So in particular the field
$$
J(t)=d_{tv}\text{exp}_p(tw)
$$
is a Jacobi field.

{\bf Remark:} the variation can also be taken with respect to
any a curve $\sigma$ on $T_vT_{p}M$ passing through $v$ 
at $s=0$ with velocity $w$.
\end{proposition}

\begin{example}[Jacobi Fields in constant curvature]
\label{example-jacobi-fields-in-constant-curvature-condition}
If $M$ has constant curvature $K$ and $\gamma$ is a normalized geodesic, a 
Jacobi field is the solution of the equation
\begin{equation}
\label{equation-Jacobi-fields-in-constant-curvature-condition}
J''+KJ=0
\end{equation}
This follows from Eq. \ref{equation-constant-curvature} since it implies that
for any $X\in\mathfrak{X}_\gamma$, which we may take orthogonal to $\gamma'$,
$$
\left<X,R_{\gamma'}J\right>
=K(\left<X,J\right>\left<\gamma',\gamma'\right>
-\left<X,\gamma'\right>\left<J,\gamma'\right>)
$$
so that $R_{\gamma'}J=KJ$. The solutions of Eq.
\ref{equation-Jacobi-fields-in-constant-curvature-condition} can be computed taking a
parallel vector field $W$ along $\gamma$ orthogonal to $\gamma'$ and of unit
length. Then
\begin{equation}
\label{equation-Jacobi-fields-in-constant-curvature}
J(t)=\begin{cases}
\sin(\sqrt{K}t)W(t)\qquad & K>0\\
tW(t)\qquad &K=0\\
\text{sinh}(\sqrt{-K}t)W(t)\qquad &K<0
\end{cases}
\end{equation}
provided that $J(0)=0$, $J'(t)\perp \gamma'(t)$ and $J'(0)=W(0)$.
\end{example}

\begin{proposition}
\label{proposition-Jacobi-field-Taylor-expansion}
Differentiating a Jacobi field enough times, we arrive to
\begin{equation}
\label{equation-Jacobi-field-Taylor-expansion}
\|J(t)\|^2=\|w\|^2t^2-\frac{1}{3}\left<R(w,v)v,w\right>t^4+O(t^4).
\end{equation}
\end{proposition}

Sometimes it's useful to work with

\begin{definition}
\label{definition-Jacobi-tensor}
The {\it Jacobi tensor} is the map
\begin{align*}
	\overline{J}_t:  &\longrightarrow T_{\gamma(t)}M \\
	 \overline{J}_t(w)&=d_{tv}\text{exp}_p(tw)
\end{align*}
\end{definition}

\begin{exercise}
\label{exercise-Jacobi-tensor-derivative}
Show that $\bar{J}'(0)=\text{Id}$.
\end{exercise}

\begin{proof}
Just notice that since $\bar{J}_t=d_{tv}\text{exp}_p(tw)$ is linear on
$tw$ (because it's a differential) we have
\begin{align*}
\overline{J}'(0)&=\frac{d}{dt}\Big|_{t=0}(d_{tv}\text{exp}_p(tw))\\
&=\frac{d}{dt}\Big|_{t=0}t\cdot (d_{tv}\text{exp}_p(w))\\
&=d_{tv}\text{exp}_p(w)|_{t=0}+t\cdot(\text{something})|_{t=0}\\
&=\text{Id}_{T_pM}
\end{align*}
\end{proof}

\begin{remark}
\label{remark-dimension-of-space-of-Jacobi-fields}
Lembre o seguinte fato geral mostrado em aula:
\begin{equation}
\label{equation:dimension-of-space-of-orthogonal-Jacobi-fields}
\dim\{J \in \mathfrak{X}^J_\gamma:J(0)=0, J \perp \gamma\}=n-1
\end{equation}
Isso segue das seguintes observações:
\begin{enumerate}
\item $\dim\mathfrak{X}^J_\gamma=2n$ porque são soluções de $n$ equações
diferenciais ordinárias de segunda ordem, i.e. cada campo de Jacobi está
determinado pelas condições iniciais $J(0)$ e $J'(0)$. 
\item $\dim \{J \in \mathfrak{X}^J_\gamma:J(0)=0\}=n$.
\item $\dim \{J \in \mathfrak{X}^J_\gamma:J\perp \gamma'\}=2n-2$. Para
confirmar isso note que pelas simetrias de $R$ e a equação de Jacobi tem-se
que $\left<J,\gamma'\right>''=0$, pelo que $\left<J,\gamma'\right>=a+bt$
para dois números reais $a,b$. Segue que qualquer $J \in
\mathfrak{X}^J_\gamma$ se escreve como
$J(t)=a\gamma'(t)+bt\gamma'(t)+\hat{J}(t)$ para algum $\hat{J}$
perpendicular a  $\gamma'$. (Supondo que $|\gamma'|=1$.) Então se $J \perp
\gamma$, temos que  $a=b=0$, então tiramos dois números do $2n$ que
tínhamos.
\item Segue \ref{equation:dimension-of-space-of-orthogonal-Jacobi-fields}.
\end{enumerate}

\end{remark}


\section{Conjugate points}
\label{section-conjugate-points}

\begin{definition}
\label{definition-conjugate-points}
A point $p \in M$ is {\it conjugate} to $q \in M$ along $\gamma$ if $\gamma$ is
a geodesic joining $p$ and $q$ and there is a Jacobi field 
$J\in\mathfrak{X}_\gamma^J$ such that $J(0)=0$ and  $J(\ell)=0$.
\end{definition}

\begin{proposition}[Critical points of exponential]
\label{proposition-critical-points-exp}
\cite{doc} Chapter V, Proposition 3.5. A vector $v \in T_pM$ is a critical
point of $\text{exp}_p$ if and only if the corresponding 
$\gamma_v(1)$ is a conjugate point of $p$ along $\gamma_v$.
Moreover, in such points, the dimension of the kernel of 
$\text{exp}_p$ at this vector is the multiplicity
of the conjugate point $\gamma_v(1)$ 
(i.e. the dimension of the space of Jacobi fields vanishing 
at the endpoints).
\end{proposition}

\begin{proof}
($\implies$) Suppose that $v$ is a critical point of $\text{exp}_p$ and 
let $w \in \ker d_v \text{exp}_p$ then a Jacobi field along $\gamma$ 
vanishing at the endpoints is given by
$$
J(t):=d_{tv}\text{exp}_ptw
$$
($\impliedby$) If you have a critical point along $\gamma$, then the 
differential of $\text{exp}_p$ has kernel.

(Mulitplicity.) The proof every element of the kernel gives a Jacobi
 field vanishing at the points. Linearly dependent elements will give 
 linearly dependent Jacobi fields.
\end{proof}

\section{Isometric immersions}
\label{section-isometric-immersions}

Let $f:M \to \tilde{M}$ be an isometric immersion of Riemannian manifolds. When
computing the covariant derivative along two vector fields 
$X,Y \in\mathfrak{X}(M)$ we get a vetor field along $X$ that may be split into
its normal and tangent part thanks to Equation 
\ref{equation-immersion-bundle-decomposition}. By Lemma
\ref{lemma-isometry-preserves-connection} we see that the tangent part is
in fact the Levi-Civita connection of $M$ since it is a symmetric and torsion
free connection on the tangent bundle. Since the Levi-Civita connection of
$\tilde{M}$ is torsion free, the normal part is a
symmetric tensor we call {\it second fundamental form}:
\begin{equation}
\label{equation-second-fundamental-form}
\nabla^{f}_X f_*Y=f_*\nabla_XY+\alpha(X,Y)
\end{equation}
\begin{definition}
\label{definition-totally-geodesic-submanifold}
A submanifold $M\subset\tilde{M}$ is {\it totally geodesic} if its second
fundamental form vanishes.
\end{definition}
Notice that Lemma \ref{lemma-totally-geodesic-submanifold} says that geodesics
of a totally geodesic submanifold are geodesics of the ambient manifold.

Now let's differentiate a normal section $\xi\in T^\perp M$. 
We call the tangent part {\it shape operator}. By Lemma
\ref{lemma-normal-connection} below, the normal part is a connection 
we call the {\it normal connection}.
\begin{equation}
\label{equation-shape-operator}
\nabla^f_X\xi=-A_\xi X+\nabla^\perp_X\xi
\end{equation}
\begin{lemma}
\label{lemma-normal-connection}
$\nabla^\perp$ is a connection on $T^\perp M$.
\end{lemma}
Notice the adjointness relation
\begin{equation}
\label{equation-second-fundamental-form-and-shape-operator}
\left<\xi,\alpha(X,Y)\right>=-\left<A_\xi X,Y\right>
\end{equation}
which follows from computing $0=X\left<Y,\xi\right>$.

\section{Gauss, Codazzi, and Ricci equations}
\label{section-Gauss-Codazzi-Ricci}

The {\it Gauss equation} is
\begin{equation}
\label{equation-Gauss}
\left<\tilde{R}(X,Y)Z,W\right>=\left<R(X,Y)Z,W\right>
-\left<\alpha(X,Z),\alpha(Y,W)\right>+\left<\alpha(X,W),\alpha(Y,Z)\right>
\end{equation}
which follows from substituting Eq. \ref{equation-second-fundamental-form} 
into Equation \ref{equation-curvature-tensor}.

For the case of a hypersurface, the normal vector $\alpha(X,Y)$ must be
proportional to the unit normal $N$, and by Eq.
\ref{equation-second-fundamental-form-and-shape-operator} the proportionally
factor is exactly $\left<A_N X,Y\right>$. Using this and evaluating
 at an orthonormal pair $X,Y$ we obtain
\begin{equation}
\label{equation-Gauss-hypersurface}
K(X,Y)=\tilde{K}(X,Y)+\left<AX,X\right>\left<AY,Y\right>-\left<AX,Y\right>^2
\end{equation}
Notice that we are looking at the determinant of the matrix
$$
\begin{pmatrix}
\left<AX,X\right>&\left<AX,Y\right>\\ 
\left<AX,Y\right>&\left<AY,Y\right>
\end{pmatrix}
$$
which is the matrix representation of the shape operator $A$ to the plane
spanned by $X,Y$. (That's just a particular case of the simple fact that the
representation of the matrix $A_i^j$ for $Ae_i=A_i^je_j$ is given by
$\left<Ae_i,e_j\right>=A^k_i\left<e_k,e_j\right>=A^j_i$.)

Notice that the Gaussian curvature of a surface in $\mathbb{R}^3$, defined as
the determinant of the second fundamental form, coincides with sectional
curvature when substituting $\tilde{K}\equiv0$ as is the case of the flat metric
on euclidean space.

For a hypersurface of a constant sectional curvature $c$
manifold, we have {\it Gauss equation for constant sectional curvature}
\begin{equation}
\label{equation-Gauss-constant-sectional-curvature}
K_M(X,Y)=c+\left<\alpha(X,Y),\alpha(Y,Y)\right>-\|\alpha(X,Y)\|^2
\end{equation}

\begin{example}
\label{example-curvature-of-sphere}
Using Eq. \ref{equation-Gauss-hypersurface} we can prove that the sectional
curvature of $S^n$ is 1 once we make sure that the shape operator of the sphere
is the identity. And this follows from the fact that the connection on
$\mathbb{R}^n$ is just directional derivative, see Example 
\ref{example-euclidean-connection}.

More explicitly, the normal component of $\tilde{\nabla}_X\nu$ will vanish (see
discussion in Section \ref{section-Riccati-equation}, so that
$\tilde{\nabla}_X\nu=-A_\nu X$. But the connection in Euclidean space is just
differentiating the vector field, that is, $\tilde{\nabla}_X\nu=\nu X$. And
finally, who's $\nu$? It's the $-\text{id}$ if you chose the inner normal. So
 $\tilde{\nabla}_X\nu=-X$.
\end{example}

\begin{exercise}
\label{exercise-Gauss-sectional}
Use Eq. \ref{equation-Gauss-hypersurface} to show that no 
hypersurface $M \hookrightarrow \mathbb{R}^{n+1}$ can have constant negative 
curvature.
\end{exercise}

\begin{proof}[Solution]
After substituting $\tilde{K}(X,Y)=0$, we see that Eq. 
\ref{equation-Gauss-hypersurface} is determinant of the second fundamental form. 
 But… how to argue that this determinant can't be always negative?
\end{proof}

\begin{example}
\label{example-hyperbolic-space}
\cite{doc}, Chapter VIII, Exercise 3. The unit normal of hyperbolic space in the
hyperboloid model is also the identity. This allows for a similar computation,
but Eq. \ref{equation-Gauss-hypersurface} doesn't hold exactly because the
metric is not Riemannian. In fact, the normal vector has norm $-1$, giving that
hyperbolic space has constant curvature $-1$.
\end{example}

The {\it Codazzi equation} is
\begin{equation}
\label{equation-Codazzi}
(R_{\nabla^f}(X,Y)Z)^\perp
=(\nabla^\perp_X\alpha)(Y,Z)-(\nabla^\perp_Y,\alpha)(X,Z)
\end{equation}

Codazzi equation may help us prove… something cool about bundles I don't quite
remember.

And the {\it Ricci equation} is
\begin{equation}
\label{equation-Ricc}
\left<R_{\nabla^f}(X,Y)\xi,\eta\right>
=\left<R_{\nabla^\perp}(X,Y)\xi,\eta\right>
-\left<[A_\xi,A_\eta]X,Y\right>
\end{equation}

Ricci equation may help prove that the normal bundle of a high codimension
submanifold is trivial.

\begin{theorem}[Fundamental theorem of submanifolds]
\label{theorem-fundamental-theorem-of-submanifolds}
See \cite{pet}, Exercise 3.4.21. Let $M$ be a simply connected Riemannian 
manifold and $(E^p,\widetilde{\left<\cdot,\cdot\right>},\tilde{\nabla})$ be a 
bundle over $M$ with $\tilde{\nabla}$ compatible with 
$\widetilde{\left<\cdot,\cdot\right>}$.
Let $\tilde{\alpha}:\mathfrak{X}(M)\times \mathfrak{X}(M)\to E$ be a symmetric
tensor. Suppose there is a constant $c$ such that
$(E,\tilde{\nabla},\tilde{\alpha})$ satisfies Gauss equation for constant
curvature \ref{equation-Gauss-constant-curvature}, Codazzi equation
\ref{equation-Codazzi} and Ricci equation \ref{equation-Ricci}. 
Then there exists a unique isometric
immersion $f:M \to \mathbb{Q}_c^{n+p}$ and a bundle isomorphism $\varphi:E \to
T^\perp_pM$ such that $\varphi\circ\tilde{\alpha}=\alpha_f$.
\end{theorem}

\section{Riccati equation}
\label{section-Riccati-equation}

Take any point and any tangent vector at that point. Take the geodesic and take
the geodesic sphere of raduis say $r$ with center in the point. It's
a hypersurface. Normal vectors are all multiples of the unit normal vector. But
who's that, the unit normal? Ah, it's the speed of the geodesic.

So? The normal derivative of any vector field tangent to the sphere with respect
to the unit normal $\gamma'(r):=\nu$ is…
$$
0=X\left<\nu,\nu\right>=2\left<\nabla^\perp_X \nu,\nu\right>
$$
that is, normal derivative of $\nu$ with respect to $X$ is perpendicular to
$\nu$. But normal derivative is normal so it's actually a multiple of $\nu$, 
which makes $\nu$ have norm zero or else $\nabla^\perp_X \nu=0$.

Now consider everyday Jacobi variation \ref{proposition-everyday-jacobi-field}
 $f(s,t):=\text{exp}_p(t(v+sw))$ with Jacobi field
$J(t)=d_{tv}\text{exp}_p(tw)$. Differentiate with using the pullback connection
along $f$:
\begin{align*}
\nabla_{\frac{d}{dt}}^\gamma
J(t)&=\nabla_{\partial_t}^ff_s=\nabla_{\partial_t}^f \partial_sf\\
&=\nabla_{\partial_s}^f \partial_t f=\nabla_{J}^f \gamma' = -A_{\gamma'}f
\end{align*}
using that by our discussion above the normal derivative component vanishes. We
conclude that
\begin{equation}
\label{equation-Jacobi-field-derivative-is-shape-operator}
J'=AJ
\end{equation}
Finally we differentiate that to obtain
$$
J''=A'J+AJ'=A'J+A^2J
$$
that is,
\begin{equation}
\label{equation-Riccati}
A'+A^2+R_{\gamma'}=0
\end{equation}
since we can let $J(r)$ be any vector whatsoever and make this construction
work.
\begin{exercise}
\label{exercise-limit-of-shape-operator}
Show that $\lim_{s\to0}sA(s)=\text{Id}$.
\end{exercise}

\begin{proof}[Solution]
By Rafael. First we present a naive computation. We will use that
$A(t)(J(t))=J'(t)$,  $J(0)=0$ and $J'(0)\neq 0$. Let $\varepsilon>0$ and let
$s>0$ be such that
$$
\frac{\|J(s)-J(0)-sJ'(0)\|}{s}<\frac{\varepsilon}{2}
$$
and
$$
\|J'(s)-J'(0)\|<\frac{\varepsilon}{2}.
$$
Then
\begin{align*}
\left\|A(s)(J(s))-\frac{J(s)}{s}\right\|&
=\left\|J'(s)-\left(\frac{J(s)-J(0)}{s}\right)\right\|\\
&\leq \|J'(s)-J'(0)\|+\frac{\|J(s)-J(0)-sJ'(0)\|}{s}\\
&\leq\varepsilon/2+\varepsilon/2=\varepsilon
\end{align*}
This shows that $A=\frac{1}{s}J$ for small $s$, but we have differentiated as if
we were in $\mathbb{R}^n$. A similar computation but picking $s$ such that
$$
\frac{|\left<J(s),e_i(s)\right>-\left<J(0),e_i(0)\right>
-s\left<J'(0),e_i(0)\right>|}{s}<\varepsilon/2
$$
and
$$
|\left<J'(0),e_i(0)\right>-\left<J'(s),e_i(s)\right>|<\varepsilon/2
$$
for a parallel frame $e_i$ along $\gamma$ allows to conclude as desired.
\end{proof}

\section{Hopf-Rinow Theorem}
\label{section-Hopf-Rinow-theorem}

\begin{theorem}[Hopf-Rinow]
\label{theorem-Hopf-Rinow}
The following are equivalent for any $p \in M$:
\begin{enumerate}
\item The domain of the exponential map $\text{exp}_p$ is $T_pM$.
\item Closed and bounded subsets are compact.
\item $(M,d)$ is a complete metric space.
\item $M$ is geodeiscally complete (i.e. every geodesic is maximally defined in
all of $\mathbb{R}$).
\item Existence of exhaustions.
\end{enumerate}
Moreover, each of the former conditions imply that there exists a minimizing 
geodesic joining any two points.
\end{theorem}

\section{Hadamard's theorem}
\label{section-Hadamard}

\begin{theorem}[Hadamard]
\label{theorem-Hadamard}
If $M$ is a complete simply connected manifold with $K\leq 0$, then the 
exponential map is a diffeomorphism.
\end{theorem}

\begin{proof}

\end{proof}

\section{First Variation Formula}
\label{section-first-variation}

\begin{definition}
\label{definition-energy}
The {\it energy function} of a variation
$f:(-\varepsilon,\varepsilon)\times[0,a]\to M$ is
$$
E(s):=\int_0^a\left<f_t,f_t\right>_s
$$
\end{definition}

Recall Schwarz inequality from functional analysis:
$$
\left(\int_0^afg\right)^2\leq \int_0^af^2\int_0^ag^2
$$
Setting $f\equiv1$ and $g=f_t$ we obtain
 \begin{equation}
\label{equation-energy-bounds-length}
\ell(\gamma)\leq aE(\gamma)
\end{equation}

\begin{theorem}[First Variation Formula]
\label{theorem-first-variation-formula}
If  $f:(-\varepsilon,\varepsilon)\times[-0,a] \to M$ is a variation of
the geodesic $\gamma:[0,a]\to M$, then
\begin{equation}
\label{equation-first-variation-formula}
\frac{1}{2}E'(0)=-\int_0^a\left<V,\gamma''\right>+\left<V,\gamma'\right>|_{0}^a
+\sum_{i=1}^{k-1}\left<V,\gamma'(t_{i}^-)-\gamma'(t_i^+)\right>
\end{equation}
\end{theorem}

\begin{proof}
If $\gamma$ is smooth,
\begin{align*}
E'(s)&=\int_0^a\left<f_t,f_t\right>_s=2\int_0^a\left<f_{ts,t}\right>
=2\int_0^a\left<f_s,f_{tt}\right>-\left<f_s,f_t\right>|_{0}^a
\end{align*}
using that
$$
\left<f_s,f_t\right>_t=\left<f_{st},f_t\right>+\left<f_s,f_{tt}\right>
$$
If $\gamma$ is not smooth, the integral of $\left<f_s,f_t\right>_t$ must be
done part by part, obtaining the sum in Eq.
\ref{equation-first-variation-formula}.
\end{proof}

\section{Second Variation Formula}
\label{section-second-variation}

\begin{theorem}[Second Variation Formula]
\label{theorem-second-variation-formula}
Let $f:(-\varepsilon,\varepsilon)\times[0,a] \to M$ be a variation of a smooth
geodesic $\gamma$ with perhaps piecewise smooth variation field $V$. Then
\begin{equation}
\label{equation-second-variation-formula}
E''(0)=\int_0^a |V'|-\int_0^a R_{\gamma'}V+
\left<\gamma'(t),\nabla_{\partial_s}V(t)\right>|_{0}^a+
\sum_{i}\left<V(t_i),V'(t^-_i)-V'(t^+_i)\right>
\end{equation}
\end{theorem}

\begin{proof}
\begin{align*}
E''(s)&
=2\left(\int_0^a\left<f_s,f_{tt}\right>-\left<f_s,f_t\right>|_{0}^a\right)_s
&=\int_0^a\left<f_{ss},f_{tt}\right>+\int_0^a\left<f_s,f_{t ts}\right>
-\left<f_{ss},f_t\right>|_{0}^a-\left<f_s,f_{ts}\right>|_{0}^a
\end{align*}
Now substitute
$$
R_{\gamma'}V=R(V,\gamma')\gamma'=f_{t ts}-f_{tst}
$$
and
$$
\left<f_s,f_{ ts}\right>|_{0}^a=\int_0^a\left<f_s,f_{ ts}\right>_t
=\int_0^a\left<f_{st},f_{ts}\right>+\int_0^a\left<f_s,f_{tst}\right>
$$
If the variational field is not differentiable we must be careful when applying
the fundamental theorem of calculus.
\end{proof}

\begin{definition}
\label{definition-index-form}
The {\it index form} is
\begin{equation}
\label{equation-index-form}
I_a(V,W):=\int_0^a
\left<V'W'\right>-\int_0^a\left<R_{\gamma'}V,W\right>
\end{equation}
for any $V,W \in \mathfrak{X}_\gamma$.
\end{definition}

\begin{remark}
\label{remark-index-form-alternative-formula}
Using that the connection is metric,
\begin{align*}
\left<V,W'\right>'&=\left<V',W'\right>+\left<V,W''\right>\\
\implies  \left<V',W'\right>&=\left<V,W'\right>'- \left<V,W''\right>
\end{align*}
and substituting in the definition we obtain that
\begin{equation}
\label{equation-index-form-alternative-formula}
\begin{aligned}
I_a(V,W)&=\int_0^a\left<V,W'\right>'-\int_0^a \left<V,W''\right>-\int_0^a \left<R_{\gamma'}V,W\right>\\
&=\left<V,W'\right>|_{0}^a-\int_0^a \left<V,W''\right>-\int_0^a\left<R_{\gamma'}W,V\right>\\
&=\left<V,W'\right>|_{0}^a-\int_0^a \left<V,W''+R_{\gamma'}W\right>
\end{aligned}
\end{equation}
\end{remark}

\section{Bonnet-Myers Theorem}
\label{section-Bonnet-Myers-theorem}

\begin{theorem}[Bonnet-Myers]
\label{theorem-Bonnet-Myers}
If $M$ is a complete manifold with $\text{Ric} \geq \frac{1}{r^2}$, then
$\text{diam}M\leq \pi r$. In particular, $M$ is compact.
\end{theorem}

\begin{proof}[Sketch of proof]
Let $p,q \in M$ be points with $d(p,q)>\pi r$. We will construct a Jacobi
field vanishing at the endpoints, so that these points are conjugate and thus
any geodesic $\gamma$ joining them cannot be minimizing.

Let $w_i$ be vectors in $T_pM$ which along with $\gamma'(0)$ form an orthonormal
basis. Define $W_i$ to be the parallel transport of $w_i$ along $\gamma$ and
$J_i:=\sin(\pi t/\ell)W_i$.

Computing the second variation formula, which reduces to the index of $J_i$,
which we may write as in Eq. \ref{equation-index-form-alternative-formula} to
obtain
\begin{align*}
\frac{1}{2}E''(0)&=-\int_0^\ell\left<J,J''-R_{\gamma'}J\right>
\approx\int_0^\ell \sin(\pi t)(1+K(W_i,\gamma'(t))
\end{align*}
Summing over all indices $i$ we arrive at the Ricci curvature, which must be
greater or equal than $1/r^2$ by hypothesis. In comparing with the length of the
curve $\ell>\pi r$, we find that the integrand must be
negative, which forces one of the indices to be negative.
\end{proof}

\begin{lemma}
\label{lemma-Bonnet-Myers-implies-compact-universal-covering-and-finite-pi1}
\cite{doc}, Chapter IX, Corollary 3.2. Let $M$ be a complete Riemannian manifold
with $\text{Ric}\geq \delta>0$. Then the universal covering of $M$ is compact
and has finite fundamental group.
\end{lemma}

\begin{proof}
The universal cover with the pullback metric satisfies the same curvature
hypothesis as $M$, making it compact by Bonnet-Myers Theorem
\ref{theorem-Bonnet-Myers}. Then the leafs of the action of deck transformations
must be finite, so that $\pi_1(M)=\text{Deck}(\pi)$ is finite.
\end{proof}


\section{Weinstein's theorem}
\label{section-Weinstein-theorem}

\begin{theorem}[Weinstein]
\label{theorem-Weinstein}
Let $M^n$ be oriented, compact, $K>0$ and $f \in \text{Iso}(M)$. Suppose that 
if $n$ is even, $f$ preserves orientation, and if $n$ is odd, $f$ reverts
orientation. Then $f$ has a fixed point.
\end{theorem}

\begin{proof}
       A fórmula da segunda variação é a fonte de inspiração, olhe:
$$
E''(0)=\int |\dot V|^2-\int\left<R_ {\dot \gamma}V,V\right>+\left<\dot\gamma,\nabla_{\partial_s}f_s\right>|_{0}^a
$$
e pense: o que preciso para tirar algo bacano dessa formulinha?

De alguma maneira nos damos conta de que isso tem a ver com os pontos fixos de
uma isometria $f$. Suponha que $f$ não tem pontos fixos e busquemos uma
contradição. Defina
\begin{align*}
g: M &\longrightarrow \mathbb{R} \\
g(q) &=d(q,f(q))
\end{align*}

então como $M$ é compacta e essa função é contínua, ela tem um ponto mínimo que
chamamos de $p$. Temos que:
$$
0<g(p)=\operatorname{min}g\leq g(q)\qquad \forall q.
$$

Vamos usar a segunda fórmula da variação para achar um ponto que avaliado em $g$
fica menor do que $g(p)$. Seja $\gamma$ a geodésica minimizante entre $p$ e
$f(p)$ parametrizada por comprimento de arco (que existe porque $M$ compacta
implica completa).

Agora pegue um vetor $v \in T_pM$ unitário e ortogonal a $\dot \gamma$ (para que
o termo com $R$ na fórmula da seg. var. fique $K$), transporte ele paralelamente
ao longo de $\gamma$ para obter $V$, e pegue a variação por geodésicas
\[h(s,t)=\operatorname{exp}_{\gamma(t)}(sV(t))=\gamma_{V(t)}(s).\]

Então a 2nda fórmula fica beleza: como o campo é paralelo, o termo $|\dot V|^2$
morre, o termo da curvatura fica $K$ e o termo com $\nabla_{\partial_s}f_s$
morre também (porque as curvas verticais são geodésicas).

Então como estamos em $K>0$, acaba que $E''(0)<0$, então existe uma vizinhança
de $0$  onde as curvas $f(s,t)$ tem menor energia que $f(0,t)$ (para toda $s$
nessa  vizinhança). Agora lembre que a $\ell^2 \leq dE$, e que no caso de
geodésicas minimizantes se da a igualdade. Então fica que
$$
\frac{1}{d}\ell^2(c^s)\leq
E(s)<E(0)=\frac{1}{d}\ell(\gamma)^2=\frac{1}{d}d(p,f(p))^2
=\frac{1}{d}(\operatorname{min}g)^2
$$
lado esquerdo. Defina $\beta(s)$ como a curva ``vertical" no tempo 0, ie.
$\beta(s)=f(s,0)$. Queremos mostrar que
$$
\frac{1}{d}d(\beta(s),f(\beta(s))^2\leq \frac{1}{d}\ell^2(c^s)
$$
Já que por definição, do lado esquerdo temos $\frac{1}{d}g(\beta(s))^2$, dando
uma contradição com a equação anterior. Para confirmar essa desigualdade e
concluir a prova só devemos mostrar que a curva $c^s$ liga $\beta(s)$ e
$f(\beta(s))$, pois a distância entre esses dois pontos é menor do que o
comprimento de qualquer curva que liga esses pontos.

Ou seja, queremos que
$$
c^s(0)=\beta(s),\qquad c^s(d)=f(\beta(s))\qquad \forall s
$$
Ou seja, queremos que
$$
f \circ \beta=\gamma_{V(d)}
$$
Note que $\beta(s)=\gamma_{V(0)}(s)$. Então derive em $s=0$: \[f \circ
\beta=f\circ\gamma_{V(0)}=\gamma_{V(d)}\iff f_{*,p}V(0)=V(d)=PV(0)\] onde $P$ é
o transporte paralelo ao longo de $\gamma$ de $p=\gamma(0)$ a $\gamma(d)$.  Isso
implica que queremos que \[P^{-1}f_{*,p}V(0)=V(0)\]

Com um desenho muito convincente (ver Manfredo p. 225, esse agumentinho tá
tranquilo) fica que como $f$ é uma isometria \[f_{*,p}\gamma'(0)=\gamma'(d)\]
Decorre daí que $P^{-1}f_{*,p}\gamma'(0)=P^{-1}\gamma'(d)=\gamma'(0)$. Então
podemos fixar nossa atenção em
$$
A:=P^{-1}f_{*,p}|_{\gamma'(p)^\perp}\in \mathsf{O}(n-1)
$$
Nosso objetivo é analisar o que acontece quando $A$ tem um ponto fixo, $V(0)$,
pois essa é uma condição que queremos que seja verdade para que $f\circ \beta =
\gamma_{V(d)}$.

Agora segue o argumento dos eigenvalores que diz assim. Defina
$A:=P^{-1}f_{*,p}$. Suponha que $A$ tem um ponto fixo. Os autovalores vem dados
assim:
$$
\operatorname{Spec}A=\{\underbrace{\lambda_1,\overline{\lambda_1},\lambda_2,\overline{\lambda_2}}_{\text{par} },-1,\ldots,-1,1,\ldots,1\}
$$
Ou seja, os eigenvalores que não são 1 ou $-1$ não afetam o determinante. Daí
concluímos que
\begin{itemize}
\item Se $n-1$ é ímpar, $f$ preserva orientação. Por que? Deixa os complexos do
lado que não importam. Então pensa: se só tenho $-1$s, então tenho uma
quantidade ímpar de $-1$s porque a dimensão é ímpar. Respira. Nesse caso $f$
inverte orientação. Mas: $f$ deve ter pelo menos um $1$! Então a quantidade de
$-1$s  é par. Então não: $f$ preserva orientação.
\item se $n-1$ é par, $f$ reverte orientação.
\end{itemize}
E essas são as condições que precisamos para que $A$ tenha um ponto fixo e tudo
funcione. Então bota isso aí na hipótese do teorema.
\end{proof}

\section{Synge's theorem}
\label{section-Synge-theorem}

\begin{theorem}[Synge]
\label{theorem-Synge}
Let $M^n$ be compact and $K>0$. Then
\begin{enumerate}
\item If $n$ is even,
$$
\pi_1(M)=\begin{cases}
	1\qquad & \text{if $M$ is orientable}\\
	\mathbb{Z}_2\qquad & \text{if $M$ is not orientable}
\end{cases}
$$
\item If $n$ is odd, then $M^n$ is orientable.
\end{enumerate}
\end{theorem}

\begin{proof}
First suppose $n$ is even and $M$ is orientable. Since $M$ is compact we must
have that $K\geq \delta>0$. Now consider the universal cover $\tilde{M}$. Then
it also satisfies the curvature bound (with the pullback metric), 
making it compact as well by Bonnet-Myers \ref{theorem-Bonnet-Myers}. 
Now pick a deck transformation, which must be
orientation-preserving if we choose the orientation on $\tilde{M}$ (simply
connected is always orientable) making the projection orientation-preserving.
Then $f$ must have a fixed point by Weinstein's theorem \ref{theorem-Weinstein},
which applies since we have shown that $\tilde{M}$ is compact. 

However, deck transformations cannot have fixed points unless they are the 
identity: this is a consequence of the Unique Lifting Property
 \ref{proposition-unique-lifting-property}, which is a 
slightly more general statement than the uniqueness of curve lifts that we 
used for Klinenberg's lemma exercise \ref{exercise-l7-1}. 
More exactly: given a covering space and two maps from any space into the base, 
these coincide if they agree at one point only.

If $M$ is not orientable we can show that the two-sheeted orientable cover of
$M$ is its universal covering by the same arguments as above. Then the group of
deck transformations is the group of two elements $\mathbb{Z}_2$ since the
covering is two-sheeted.

Now suppose $n$ is odd and consider the two-sheeted orientable cover of $M$.
Then by Weinstein's theorem we can say that no deck transformation can be
orientation reversing. But since $M$ is non-orientable, the single deck
transformation generating the group of deck transformations, which is
$\mathbb{Z}_2$, is not orientation preserving: if it was, then the quotient of
the two-sheeted orientable covering by the action of the deck transformations
would induce an orientation on $M$.
\end{proof}

\section{Index lemma}
\label{section-index-lemma}

\begin{lemma}[Index]
\label{lemma-index}
\cite{doc} Chapter X, Section 2, Lemma 2.2. Let $\gamma:[0,a]\to M$ be a
geodesic without conjugate points (this means $\gamma(t)$ is not conjugate to
$\gamma(0)$ on $(0,a]$). Let $J\in\mathfrak{X}_\gamma^J$ with
$\left<J,\gamma'\right>=0$ and let $V$ be a piecewise differentiable vector
field along $\gamma$ with $\left<V,\gamma'\right>=0$. Suppose $J(0)=0=V(0)$ and
that there is  $t_0\in(0,a]$ such that $J(t_0)=V(t_0)$. Then
$$
I_{t_0}(J,J)\leq I_{t_0}(V,V)
$$
and equality holds if and only if $V=J$ on $[0,t_0]$.
\end{lemma}

\section{Rauch's comparison theorem}
\label{section-Rauch}

We motivate Rauch's comparison theorem with a result from ordinary
differential equations.

\begin{theorem}[Sturm]
\label{theorem-Sturm}
Suppose $f,\tilde{f},K,\tilde{K}:[0,a]\to \mathbb{R}$ are smooth functions
satisfying the following conditions. $\tilde{f} > 0$ in $(0,a]$, $f(0)=\tilde{f}(0)=0$,
$f'(0)=\tilde{f}'(0)$ and
$$
f''+Kf=0,\qquad \tilde{f}''+\tilde{K}\tilde{f}=0.
$$
If $K\leq \tilde{K}$, then $f/\tilde{f}$ is non decreasing. Moreover, if there
is any point $t \in [0,a]$ where $f(t)=\tilde{f}(t)$, then $f \equiv \tilde{f}$
and $K \equiv \tilde{K}$.
\end{theorem}

\begin{proof}
Since we want to show $f/\tilde{f}$ is non decreasing we are interested in
computing the sign of the derivative of this quotient. We thus calculate 
$f'\tilde{f}-f \tilde{f}'$. We only have information about second derivatives,
so we differentiate to obtain
$$
(f'\tilde{f}-f \tilde{f}')'=(\tilde{K}-K)f\tilde{f}
$$
We may integrate to find that 
\begin{equation}
\label{equation-Sturm}
f'\tilde{f}-f \tilde{f}'=\int_0^t (f'\tilde{f}-f \tilde{f}')'
=\int_0^t (\tilde{K}-K)f\tilde{f}
\end{equation}
If we show that $f\geq 0$ we get our result. So suppose that $t_0$ is the
smallest number $t_0 \in (0,a]$ where $f$ is zero. Then $f'(t_0)<0$ since before
that $f$ is positive, which in turn is because $f'(0)=\tilde{f}'(0)$ and
$\tilde{f}$ is strictly positive. But this contradicts Equation
\ref{equation-Sturm} since the integrand was positive up to $t_0$.

Now suppose that $f(t_0)=\tilde{f}(t_0)$ for some $t_0 \in (0,a]$. Then Equation
\ref{equation-Sturm} vanishes at $t_0$, and we conclude that $K \equiv
\tilde{K}$ in $[0,t_0]$. Somehow this implies that $f$ also equals $\tilde{f}$…

Here's ChatGPT in action: define $h(t):=f(t)-\tilde{f}(t)$. Notice that on
$(0,t_0]$ it satisfies $h''+Kh=0$ with $h(0)=h'(0)=0$. But so does constant zero
function, hence  $h\equiv0$. To extend to all of $[0,a]$ use uniqueness of
ODEs again.
\end{proof}

\begin{theorem}[Rauch]
\label{theorem-Rauch}
Let $\gamma$ be a geodesic of $M$ and $\tilde{\gamma}$ a geodesic of
$\tilde{M}$. Suppose that $J \in \mathfrak{X}^J_\gamma$ and $\tilde{J}\in
\mathfrak{X}^J_{\tilde{\gamma}}$ satisfy the following conditions. $J(0)=0$,
$\tilde{J}(0)=0$, $|J'(0)|=|\tilde{J}'(0)|$ and 
$\left<J,\gamma'\right>=\left<\tilde{J},\tilde{\gamma}'\right>$. Also,
$$
J''+K J=0,\qquad \tilde{J}''+\tilde{K}\tilde{J}=0
$$
If $\tilde{\gamma}$ has no conjugate points and $\tilde{K}\geq K$, then 
$|J|/|\tilde{J}|$ is nondecreasing. Moreover, if $|J|$ and $|\tilde{J}|$
coincide in one point, then $|J|\equiv |\tilde{J}|$ and $K \equiv \tilde{K}$.
\end{theorem}

\begin{proof}
Let $f:=|J|^2$ and $\tilde{f}:=|\tilde{J}|^2$. I think the main difference with
Sturm is that the condition on Jacobi fields is not a condition on the
derivatives of the functions $f$ and $\tilde{f}$ we just defined. Note that
$$
f'=2\left<J',J\right>,\qquad J''=2(\left<J',J'\right>+\left<J'',J\right>).
$$
While we may substitute $-KJ$ on the second bracket, we still have the first
one. Perhaps this is the reason to define $U(t):=J(t)/|J(r)|$ and
$\tilde{U}(t):=\tilde{J}(t)/|\tilde{J}(r)|$. But wait, what's that $r$? There's
a trick in this proof.

Notice that $U$ and $\tilde{U}$ are Jacobi fields and $|U(r)|=|\tilde{U}(r)|$.
\end{proof}

\begin{proposition}
\label{proposition-contraction}
Sejam $p \in M$, $\tilde{p} \in \tilde{M}$ e $i:T_pM \to T_{\tilde{p}}\tilde{M}$
uma isometria. Então $f:=\text{exp}^{-1}_p \circ i \circ
\text{exp}_{\tilde{p}}$ é uma contração métrica, i.e. $|f_*w|\leq |w|$
para todo $w \in T_pM$.

Mas ainda, se $\text{exp}_p^{-1}$ está definida numa bola totalmente
convexa, $f$ é uma contração métrica.
\end{proposition}

\begin{proof}
Write an abitrary $w\in T_p M$ as a Jacobi variational field of the variation 
$f(s,t)=\text{exp}_p(t(v+sw)$. The resulting field on $\tilde{M}$ is a
Jacobi field with respect to $iw$ using that $i$ is an isometry. The conditions
of Rauch theorem are satisfied and the desired inequality is obtained.

For the metric result we just integrate along a curve realising the distance and
compute.
\end{proof}

\section{Moore's theorem}
\label{section-Moore}

\begin{theorem}[Moore]
\label{theorem-Moore}
Let $M^n \subset \tilde{M}^{n+p}$ be a compact submanifold of a Hadamard
manifold $\tilde{M}$. If $K\leq \tilde{K}$, then $p\geq n$.
\end{theorem}

\section{Focal points}
\label{section-focal points}

\begin{definition}
\label{definition-focal-point}
Let $M$ be a submanifold of $\tilde{M}$ and $p$ a point not in $M$. We say $p$
is a {\it focal point} of $M$ if there is a geodesic $\gamma$ orthogonal to $M$
and a Jacobi field $J\in\mathfrak{X}^J_\gamma$ such that
$$
J'(0)\in T_{\gamma(0)}M,\qquad J'(0)+A_{\gamma'(0)}J(0)\in T_{\gamma(0)}^\perp M
$$
\end{definition}

\begin{proposition}
\label{proposition-focal-points-are-singularities-of-normal-exponential}
The focal points of $M$ are the singularities of $\text{exp}|_{T^\perp M}.$
\end{proposition}

\section{Morse index theorem}
\label{section-morse-index}

\begin{definition}[Index of index form]
\label{definition-index-index-form}
$$
i(I_a):=\text{sup}\{\dim L \subset \mathfrak{X}_\gamma:I_a |_{L \times L}<0\}
$$
\end{definition}

For the proof of Morse Index Theorem \ref{theorem-Morse-index} we will use the
following objects
\begin{equation}
\label{equation-index-theorem-spaces}
\begin{aligned}
\mathcal{V}_a&=\{V \in \mathfrak{X}_\gamma:\text{d.p.p., }V(0)=0, V(a)=0\}\\
\mathcal{V}_t^+&:=\{V \in \mathcal{V}_t:V(t_i)=0\}\\
\mathcal{V}_t^-& :=\{V \in \mathcal{V}_t:V|_{[t_j,t_{j+1}]}\in
\mathfrak{X}_{\gamma|_{[t_j,t_{j+1}]}}^J\}
\end{aligned}
\end{equation}

\begin{proposition}
\label{proposition-kernel-of-index-form}
\cite{doc}, Chapter X, Proposition 2.3. The kernel of the index form i
$$
\Ker I_t:=\{V \in \mathcal{V}_t:I_t(V,W)=0\forall W\in\mathcal{V}_t\}=
V_t \cap \mathfrak{X}_\gamma^J 
$$
that is, it is composed of smooth Jacobi fields along $\gamma$.
\end{proposition}

\begin{proof}[Sketch of proof]
The point here is to show that if $V \in \Ker$ then it is (1) a Jacobi
 field in each interval where $V$ is smooth, and (2) smooth in the whole
 interval.

We use the fact that $V$ is in the kernel to show that (1) the norm of 
$V-R_{\gamma'}V$ is zero, and (2) the left and right derivatives of $V$
coincide. The first part involves multiplying by a positive function $f$ that
vanishes at the singular points; this will make the ``singular part" of the
index form, i.e. the sum, vanish, so that we get only with the integral part,
which is the norm of the Jacobi equation, which will vanish since we are in the
kernel. The second part I'm not sure---why do we need to show that $V$ is
differentiable, or $C^2$ (since it's the solution of an ODE).
\end{proof}

\begin{lemma}
\label{lemma-index-form-is-degenerate-iff-conjugate-points}
\cite{doc}, Chapter X, Corollary 2.4. The index form is degenerate if and only 
if the initial and final points of $\gamma$ are conjugate. In this case, the 
nullity, i.e. dimension of $\Ker I_a$ coincides with the nullity of $\gamma(a)$ 
as a conjugate point of $\gamma(p)$, that is, the dimension of the space of 
Jacobi fields vanishing at the endpoints.
\end{lemma}

\begin{proof}
Just by Proposition \ref{proposition-kernel-of-index-form} and by the fact that
$\mathcal{V}_a$ is defined as the smooth vector fields vanishing in the
endpoints.
\end{proof}

\begin{proposition}
\label{proposition-V-is-direct-sum}
\cite{doc}, Chapter XI, Proposition 2.5. 
$\mathcal{V}_a=\mathcal{V}^+ \oplus \mathcal{V}^-$.
\end{proposition}

\begin{proof}
Assume that the partition $0<t_1<\ldots<t_k=a$ of $[0,a]$ is such that every
segment $\gamma|_{[t_{i-1},t_i]}$ is contained in a totally geodesic
neighbourhood, so that no such segment can have conjugate points.

Let $V \in \mathcal{V}_a$ and pick a field $J \in \mathcal{V}^-$ defined as the
piecewise Jacobi field with pairwise boundary conditions $J(t_j)=V(t_j)$. The
assumtion that $\gamma|_{[t_{i-1},t_i]}$ has no conjugate points ensures the
uniqueness of such $J$. Then $V-J\in\mathcal{V}^+$ and we obtain the result.
\end{proof}

\begin{theorem}[Morse Index]
\label{theorem-morse-index}
O índice $i(I_t)$ é finito e igual ao número de pontos conjugados em $[0,t)$ ao
longo de $\gamma$.
\end{theorem}

\begin{proof}
\begin{enumerate}
\item Define
\begin{align*}
\mathcal{V}_a&=\{V \in \mathfrak{X}_\gamma:\text{d.p.p. }V(0)=0, V(a)=0\}\\
\mathcal{V}_t^+&:=\{V \in \mathcal{V}_t:V(t_i)=0\}\\
\mathcal{V}_t^-& :=\{V \in \mathcal{V}_t:V|_{[t_j,t_{j+1}]}\in
\mathfrak{X}_{\gamma|_{[t_j,t_{j+1}]}}^J\}
\end{align*}
\item Note que
$$
\mathcal{V}_t=\mathcal{V}_t^+ \oplus  \mathcal{V}_t^-
$$
\item Note que 
$$
\mathcal{V}_t^-=\bigoplus_{j=1}^{i-1}T_{\gamma(t_j)}M
$$
porque para qualquer escolha de vetores
 $v_1 \in T_{\gamma(t_1)}M,\ldots,v_{i-1}\in T_{\gamma(t_{i-1})}M$ existe
 um único campo $J \in \mathcal{V}^-$ tal que $J(t_j)=v_j$, por ser a solução
 da EDO com condições de contorno.
\item Usamos Proposition \ref{proposition-kernel-of-index-form}.
\item …
\end{enumerate}
\end{proof}



\begin{theorem}[Jacobi's theorem]
\label{theorem-Jacobi-theorem}
Se $\gamma$ é minimizante, então não pode ter pontos conjugados. More generally,
if $\gamma:I \to M$ is a geodesic and $ \gamma(a)$ is conjugate to $\gamma(0)$
through $\gamma$ then for every $\delta>0$, $I_{a+\delta}\not \geq 0$.
\end{theorem}

\begin{proof}
Se $\gamma$ é minimizante, a segunda fórmula da variação é positiva para todo
campo em $\mathcal{V}=\{V\in \mathfrak{X}_\gamma:V \text{ d.p.p. },
V(a)=0,V(b)=0\}$. Ou seja, a forma do índice é uma forma bilinear positiva, e
portanto tem signatura zero, e pelo Teorema do Índice de Morse 
\ref{theorem-Morse-index} o número de pontos conjugados é zero.
\end{proof}

It is possible to prove this theorem without using Morse Index Theorem
\ref{theorem-Morse-index} by constructing a variation where the index form is
negative, see Exercise \ref{exercise-l7-4}.

\section{Cut locus}
\label{section-cut-locus}

\begin{definition}
\label{definition-cut-point}
O {\it cut point} de  $p$ ao longo de $\gamma$ é $\gamma(\rho(\gamma))$ 
onde
$$
\rho(\gamma)=\text{sup}\{t:\gamma|_{[0,t]}\text{ é minimizante}\}
$$

\end{definition}

\begin{proposition}
\label{proposition-cut-point-characterization}
\cite{doc} Chapter XIII, Proposition 2.2. Let $\gamma$ be a minimizing geodesic joining $p$ and $q$. Then $q$ is the cut
point of $p$ if and only if either of the following conditions hold:
\begin{enumerate}
\item $q$ is the first conjugate point of $p$ along $\gamma$.
\item There is another, distinct, minimizing geodesic $\sigma$ joining $p$ and
 $q$.
\end{enumerate}
\end{proposition}

\begin{proof}[Sketch of proof]
($\implies$) Since $q:=\gamma(r)$ is the cut point of $p$, we know that for every point
$\gamma(r+\varepsilon)$ along $\gamma$ after $q$ there must be some other geodesic
$\gamma_\varepsilon$ which realizes the distance between $p$ and
$\gamma(r+\varepsilon)$

Taking the limit as $\varepsilon \to 0$ we obtain another geodesic
(because we are taking limit inside $S^n \subset T_pM$, so we get convergence;
and because ``things will behave well under the limit")
which puts us in the second condition of the theorem,
unless the limit geodesic is the same as  $\gamma$ setwise.

Now there's a critical observation:
the two geodesics $\gamma$ and $\gamma_\varepsilon$ meet at the point 
 $\gamma(r+\varepsilon)$, so you can write
 $\gamma_\varepsilon(r+\delta(\varepsilon))=\gamma(r+\varepsilon)$
 for some function $\delta(\varepsilon)$ (that could be negative, doesn't
 matter).
 But since $\gamma_\varepsilon$ is the minimizing
 geodesic from $\gamma(0)$ to this point, then
 $|\delta(\varepsilon)|<\varepsilon$.

Right, the point is that defining
$$
u_\varepsilon:=(r+\varepsilon)v,\qquad
u'_\varepsilon:=r+\delta(\varepsilon))v_\varepsilon
$$
we see that $\text{exp}_p$ is not injective, since these two vectors
hit that point.

This being true for every $\varepsilon>0$, there is no neighbourhood of $vr$ 
where $\text{exp}_p$ is injective---much less a diffeomorphism.
So it cannot be a local diffeomorphism, and we know that critical points of
$\text{exp}_p$ are conjugate points of $p$. (Remember: if
$\text{exp}_p$ has a critical point, its differential has kernel,
and the map $d_{tv}\text{exp}_pw$, for $w$ in the kernel, gives 
a Jacobi field. See Proposition \ref{proposition-critical-points-exp})
\end{proof}

\begin{exercise}
\label{exercise-diametros}
Calcule o diâmetro de $S^2$, $\mathbb{T}^2$, $\mathbb{R}P^{2}$.
\end{exercise}

\begin{proof}[Solution]
O diâmetro de $S^2$ pode ser calculado via o teorema de Bonnet Myers
\ref{theorem-bonnet-myers}: nenhuma geodésica é minimizante depois de atingir
comprimento $\pi r$, e temos uma geodésica que atinge esse comprimento: qualquer
uma!

O diâmetro de $\mathbb{T}^2$ é $1$. Isso é por simples geometria
euclidiana: é o diâmetro do cubo! Por definição, a métrica de  $\mathbb{T}^2$ é
a induzida pela projeção quociente.

O diâmetro de $\mathbb{R}P^{2}$ é $\pi/2$. Qualquer geodésica que liga dois
pontos a distância $\pi/2$ é minimizante, pois estamos na métrica esférica e
podemos pegar cartas esféricas onde dois pontos a essa distância estão contidos. 
Por outro lado, se tivéssemos dois pontos a distância maior, a geodésica 
esférica que percorre o ponto antípoda ao inicial, chega no ponto final mais 
rapidamente que inicial; portanto geodésicas de comprimento maior que $\pi/2$ 
não são minimizantes.
\end{proof}

\begin{lemma}
\label{lemma-cut-point-reflexive}
If $q$ is the cut point of $p$ through $\gamma$, then $p$ is the cut point of
$p$ through $\gamma$.
\end{lemma}

\begin{lemma}
\label{lemma-not-cut-locus-minimizing}

\end{lemma}

\begin{proposition}
The function
\begin{align*}
	\rho: T^1_p &\longrightarrow [0,+\infty] \\
	v &\longmapsto \text{cut point along }\gamma_v 
\end{align*}
is continuous.
\end{proposition}

\begin{lemma}
\label{lemma-cut-locus-closed}
Because it's the image of the unit sphere in $T_pM$, which is closed.
\end{lemma}

\begin{lemma}
\label{lemma-cut-locus-topology}

\end{lemma}

\begin{lemma}
\label{lemma-outside-cut-locus-exists-minimizing-geodesic}
\cite{doc} Chapter XIII, Corollary 2.8. If $q \in M\setminus C_m(p)$, there exists a
 unique minimizing geodesic joining
$p$ and $q$.
\end{lemma}

\begin{proof}
By Hopf-Rinow \ref{theorem-Hopf-Rinow}, we know that
there exists a minimizing geodesic joining any two points. If there was more
than one such geodesic, by 
Proposition \ref{proposition-cut-point-characterization} 
we get that $q$ is the cut point of  $q$ along either of these geodesics, 
a contradiction.
\end{proof}

The former Lemma \ref{lemma-outside-cut-locus-exists-minimizing-geodesic} 
shows that the exponential map $\text{exp}_p$
 is injective outside the cut locus of $p$. 
This motivates the following definition.

\begin{definition}
\label{definition-injectivity-radius}
The {\it injectivity radius} of a manifold $M$ is
$$
i(M)=\text{inf}\{d(p,C_m(p)):p \in M\}
$$
\end{definition}

\section{Bishop-Gromov Theorem}
\label{section-bishop-gromov}

\begin{theorem}[Bishop-Gromov]
\label{theorem-Bishop-Gromov}
Let $p \in M$ and $0\leq t \leq i(p)=d(p,C_m(p)$. Denote $B_t(p)$ the ball of
raduis $t$ centered in $p$ and $B_{t,k}$ the ball of radius $t$ in a space of
constant curvature $k$.

If $\text{Ric}\geq k$, then $\text{Vol}(B_t(p))/\text{Vol}(B_{t,k})$ is a non
increasing function.

Moreover, if there are numbers  $0<s<r\leq i(p)$ such that
$$
\frac{\text{Vol}(B_s(p))}{\text{Vol}(B_{s,k}}=
\frac{\text{Vol}(B_r(p))}{\text{Vol}(B_{r,k})}
$$
then $B_r(p)=B_{r,k}$ isometrically.
\end{theorem}

\begin{proof}
Use the exponential map a parametrization of the geodesic sphere with radius
$r$ and centre in $p\in M$. (This parametrization works at least locally, but why
have we said in lecture that ``it's a global chart''?) Then
$$
\text{Vol}(S^n_r(p))=\int_{S^n_r(p)}\text{Vol}_{S^n_r(p)}=
\int_{S^n_r(0)}\text{exp}_p^*\text{Vol}_{S^n_r}=
\int_{S^n_r(0)}|\det d_{rv} \text{exp}_p|\text{Vol}_{S^n_r(0)}
$$
This determinant can be given by a basis of tangent vectors to $S_r(0)$, each of
which yields a Jacobi field via Proposition 
\ref{proposition-everyday-jacobi-field}. These Jacobi fields are the columns 
of the matrix $\mathbb{J}$, which is the Jacobian matrix of the exponential we 
are interested in computing.

Now we want to differentiate this with respect to $r$ because we aim to apply
Sturm's theorem \ref{theorem-Sturm}. By Exercise
\ref{exercise-derivative-of-determinant}, we know that the derivative of the
determinant of a one-parameter family of invertible matrices $\mathbb{J}(r)$ is
given by $\det \mathbb{J}(r)\text{tr}(\mathbb{J}^{-1}(r)\mathbb{J}'(r))$.

By the discussion in Section \ref{section-Riccati-equation}, we know that
$AJ=J'$ where $A$ is the shape operator with respect to the unit normal
$\gamma'(r)$ and $J$ is a Jacobi field defined by
\ref{proposition-everyday-jacobi-field}.  This gives $A=J'J^{-1}$. 

Thediagonal entries of the matrix $\mathbb{J}$ are vectors of this kind, so that
 its trace, which depends only on the diagonal by Exercise 
\ref{exercise-trace-is-independent-of-coordinates}, is precisely the trace of
the shape operator $A$, which we have defined as $H/(n-1)$ where
$H$ is called the mean curvature.

This data translates to the following equation
\begin{equation}
\label{equation-Bishop-Gromov-proof1}
\det\mathbb{J}'=\det\mathbb{J}H
\end{equation}
Now recall that any self-adjoint operator can be expressed uniquely as a
multiple of the identity plus a symmetric traceless matrix (ref?). This allows 
to write
\begin{equation}
\label{equation-Bishop-Gromov-proof2}
A=H\text{Id}+A_0
\end{equation}
with $A_0$ symmetric and traceless. Differentiating Eq.
\ref{equation-Bishop-Gromov-proof2} and using that the shape operator satisfies
Riccati equation \ref{equation-Riccati} we shall obtain that
$$
H'+H^2+\mathcal{R}=0
$$
where $\mathcal{R}:=\text{Ric}(\gamma')+|A_0|^2$. Then
\begin{equation}
\label{equation-Sturm-type1}
\det\mathbb{J}''+\mathcal{R}\det\mathbb{J}=0,
\det\mathbb{J}(0)=,\det\mathbb{J}'(0)=1
\end{equation}
\bigskip
Notice that in the case of constant curvature $k$, Eq. 
\ref{equation-Bishop-Gromov-proof1} becomes
\begin{equation}
\label{equation-Bishop-Gromov-proof3}
\det\overline{\mathbb{J}}'=\det\overline{\mathbb{J}}k
\end{equation}
which in turn yields
\begin{equation}
\label{equation-Sturm-type2}
\det\overline{\mathbb{J}}''+k\det\overline{\mathbb{J}}=0
\end{equation}
Now we want to compare the volume of the sphere in $M$ with the volume of a
sphere of the same raduis in the space of constant curvature 
$\mathbb{Q}_k^{n+1}$:
\begin{align*}
\frac{\text{Vol}(S_r^{n}(p))}{\text{Vol}(S^{n}_{r,k})}&=
\frac{\int_{S^n(0)}\det \mathbb{J}}{\int_{S^n(0)}\det\overline{\mathbb{J}}}
=\frac{1}{\text{Vol}(S^n(0))}
\int_{S^n(0)}\frac{\det\mathbb{J}}{\det\overline{\mathbb{J}}}
\end{align*}
By Sturm Theorem \ref{theorem-Sturm}, which we may apply since both 
$\det\mathbb{J}$ and $\det\overline{\mathbb{J}}$ satisfy Eqs.
 \ref{equation-Sturm-type1} and \ref{equation-Sturm-type2}, and moreover 
they both vanish at $r=0$ and their derivatives are $1$ at $r=0$ by Exercise
\ref{exercise-Jacobi-tensor-derivative}, and of course, since we are supposing
that $\text{Ric}M\geq k$, we conclude that the integrand is a non {\bf
decreasing} function.
\begin{remark}[Pregunta]
\label{remark-pregunta2}
Según Sturm, el cociente de las funciones en cuestión, en este caso,  
$\frac{\det\mathbb{J}}{\det\overline{\mathbb{J}}}$ debería ser una función no
decreciente, pero el resultado que buscamos es que sea no {\bf creciente}.
\end{remark}
\bigskip
Now we turn to computing the ratios of the volumes of balls of radius $r$. 
\begin{align*}
\frac{\text{Vol}(B_r(p))}{\text{Vol}(B_{r,k})}&=
\frac{\int_{S^n(0)}\int_0^r\det\mathbb{J}(t)dt\text{Vol}S^n(0)}
{\text{Vol}(S^n(0))\int_0^r \det\overline{\mathbb{J}}(t)dt}\\
&=\frac{1}{\text{Vol}(S^n(0))} \frac{\int_0^r}{}
\end{align*}
\begin{remark}[Preguntas]
\label{remark-pregunta3}
I have two questions:
\begin{enumerate}
\item We have said in lecture that we may apply Fubini's theorem by Gauss'
lemma. Why? By Gauss' Lemma the normal vectors are orthogonal to the spheres,
the constructions related to Riccati equation are valid (cf. Section
\ref{section-Riccati-equation}). By why does this allow to use Fubini? 
\item We can pull out the volume in the denominator because the volumes of
spheres in the space of constant curvature somehow does not depend on the radius
 $r$. But how exactly? I think  $\det \overline{\mathbb{J}}(r)$ does depend 
on $r$ (in the space of constant curvature), see Eq. 
\ref{equation-Bishop-Gromov-proof3}.
\end{enumerate}
\end{remark}
Then the equation continues to
\begin{align*}
&=\frac{1}{\text{Vol}(S^n(0))}
\int_{S^n(0)}\frac{\int_0^r \det \mathbb{J}(t)dt \text{Vol}S^n(0)}
{\int_0^r\det\overline{J}dt}\\
&=\frac{1}{\text{Vol}(S^n(0))}
\int_{S^n(0)}\frac{\int_0^r \frac{\det \mathbb{J}(t)}
{\det\overline{\mathbb{J}}(t)}
\det\overline{\mathbb{J}}(t)dt \text{Vol}S^n(0)}
{\int_0^r\det\overline{\mathbb{J}}dt}\\
&=\frac{1}{\text{Vol}(S^n(0))}
\int_{S^n(0)}\frac{\int_0^r \frac{\det \mathbb{J}(t)}
{\det\overline{\mathbb{J}}(t)}d\mu}{\mu[0,r]}\text{Vol}S^n(0)
\end{align*}
where we have introduced a measure 
$\mu:=\det \overline{\mathbb{J}}dt$.

By our discussion before, the integrand is a non decreasing function, almost as
required.

Finally, notice that by the rigidity part on Sturm's Theorem
\ref{theorem-Sturm}, the condition
$$
\frac{\text{Vol}(B_s(p))}{\text{Vol}(B_{s,k}}=
\frac{\text{Vol}(B_r(p))}{\text{Vol}(B_{r,k})}
$$
implies that $\det\mathbb{J}=\det\overline{\mathbb{J}}$ and $k=\mathcal{R}$.
This makes $A_0=0$ from Eq. \ref{equation-Bishop-Gromov-proof2} so that $A$ is 
proportional to the identity. By some mixture
of Eqs. \ref{equation-Jacobi-fields-in-constant-curvature-condition} and 
\ref{equation-Jacobi-field-derivative-is-shape-operator}, this means that the
Jacobi fields along $\gamma$ are of the form Eq.
\ref{equation-Jacobi-fields-in-constant-curvature}. In turn, this makes the map
of Proposition \ref{proposition-contraction} an isometry. {\bf Who is $i$ then?}
\end{proof}

\section{Cheng's Theorem}
\label{section-Cheng-theorem}

Cheng's theorem says what happens in case of equality in the conditions of 
Bonnet-Myers Theorem \ref{theorem-Bonnet-Myers}.
\begin{theorem}[Cheng]
\label{theorem-Cheng}
Let $M$ be a complete Riemannian manifold with $\text{Ric}\geq 1$. If 
$\text{diam}M=\pi$ then $M=S^n$ isometrically.
\end{theorem}

\begin{proof}
By Bonnet-Myers Theorem \ref{theorem-Bonnet-Myers}, $M$ is a compact manifold
with diameter $\pi$. This means that $M$ is the closure of any ball of radius
$\pi$. Then, by Bishop-Gromov Theorem \ref{theorem-Bishop-Gromov}, it's enough 
to show the rigidity condition holds for radius $\pi$. That is, we must show
that there is $s<\pi$ such that
$$
\frac{\text{Vol}(B_s(p))}{\text{Vol}(B_{s,1}}= 
\frac{\text{Vol}(B_\pi(p)}{\text{Vol}B_{\pi,1}}
$$
Consider two points $p_1$ and $p_2$ at distance $\pi$. Then the balls of radius
$\pi/2$ with center at these points cannot intersect. This says that
$$
\text{Vol}M\geq B_{\pi/2}(p_1)+B_{\pi/2}(p_2)
$$
But since the volume of $M$ is exactly the volume of $B_\pi(p)$ for any $p$, we
see that
$$
\frac{\text{Vol}(B_\pi(p))}{2}\leq B_{\pi/2}(p_i),\qquad i=1,2
$$
\end{proof}

\section{Toponogov's theorem}
\label{section-Toponogov}

\begin{definition}
\label{definition-geodesic-triangle}
\cite{doc}, p. 285. A {\it geodesic triangle} is the set formed by three
minimizing geodesics $\gamma_i$ so that
$\gamma_{i+1}(0)=\gamma_i(\ell(\gamma_i))$ cyclically. (Just to note that for
some authors geodesic triangles are minimizing by definition. Looks like for
\cite{meyers} it's not the case.)
\end{definition}

First notice that the following result can be proved using Rauch's theorem
\ref{theorem-Rauch}:

\begin{theorem}[Toponogov, local version]
\label{theorem-Toponogov-local}
Let $o,p_1,p_2 \in B$ where $B$ is a totally convex ball of $M$. Let $\gamma_1$
and $\gamma_2$ be the normalized geodesics joining $o$ to $p_1$ and to $p_2$.

Suppose $\tilde{o}, \tilde{p}_1,\tilde{p}_2 \in \tilde{B}$ is a triple on 
another manifold $\tilde{M}$ such that the distances from $\tilde{o}$ to
$\tilde{p}_1$ and from $\tilde{o}$ to $\tilde{p}_2$ coincide with those in $M$.

Then for any $t \in [0,\ell(\gamma_1)]$ and $s \in [0,\ell(\sigma)]$,
$$
\tilde{d}(\tilde{\gamma}_1(t),\tilde{\gamma}_2(s))\leq d(\gamma_1(t),\gamma_2(s))
$$
\end{theorem}

\begin{proof}
This is an application of Proposition \ref{proposition-contraction} for $i$ as
given by the condition of mapping $\gamma'_1(0)$ to $\gamma_2'(0)$ and the angle
between them to the corresponding vectors and angle on $\tilde{M}$.
\end{proof}

The global version of that Theorem \ref{theorem-Toponogov-local} is the
following. Notice it coincides with our intuition from comparing plane triangles
with spherical ones; spherical are fatter.

\begin{theorem}[Toponogov, hinge version]
\label{theorem-Toponogov-hinge}
$M$ complete, $K \geq k$. $\gamma_1,\gamma_2$ normalized geodesics with
$\gamma_1(0)=\gamma_2(0)$. Suppose $\gamma_1$ is minimizing.

If $k>0$ suppose additionally that $\ell(\gamma_2) \leq \pi/\sqrt{k}$ (because
that's where conjugate points appear).

Suppose that $\tilde{\gamma}_1,\tilde{\gamma}_2$ is a corresponding hinge in
$\mathbb{Q}_k^2$, that is, $\ell(\gamma_i)=\ell(\tilde{\gamma}_i)$ and
$\angle(\gamma_1'(0),\gamma_2'(0)=
\angle\tilde{\gamma}_1'(0),\tilde{\gamma}_2'(0)$. Then
\begin{equation}
\label{equation-Toponogov-hinge1}
d(\gamma_1(\ell_1),\gamma_2(\ell_2)) \leq 
\tilde{d}(\tilde{\gamma}_1(\ell_1),\tilde{\gamma}_2(\ell_2))
\end{equation}
\end{theorem}

This is not intuitive for me: the distance between the remaining side should be
fatter in the manifold that is more curved.

The following version is equivalent to the hinge version and is intuitive for
me:

\begin{theorem}[Toponogov]
\label{theorem-Toponogov-hinge2}
Let $M$ be complete with $K\geq k$. If $\gamma_i$ is a minimizing geodesic
triangle in $M$, then there is a unique minimizing geodesic triangle
$\tilde{\gamma}_i$ in $\mathbb{Q}_k^2$ with
$\ell(\tilde{\gamma}_i)=\ell(\gamma_i)$ for $i=0,1,2$, and such that
\begin{equation}
\label{equation-Toponogov-hinge2}
\tilde{d}(\tilde{\gamma}_1(t),\tilde{\gamma}(s))\leq
d(\gamma_1(t),\gamma_2(s)
\end{equation}
for all $t\in[0,\ell(\gamma_1)]$ and $s\in[0,\ell(\gamma_2)]$.
\end{theorem}

Another equivalent version:
\begin{theorem}[Toponogov]
\label{theorem-Toponogov-hinge3}
Let $M$ be complete with $K\geq k$. If $\gamma_i$ is a minimizing geodesic
triangle in $M$, then there is a unique minimizing geodesic triangle
$\tilde{\gamma}_i$ in $\mathbb{Q}_k^2$ with
$\ell(\tilde{\gamma}_i)=\ell(\gamma_i)$ for $i=0,1,2$ and such that
\begin{equation}
\label{equation-Toponogov-hinge3}
\tilde{d}(\tilde{o},\tilde{\gamma}(t))\leq d(o,\gamma_0(t))
\qquad \forall t\in[0,\ell(\gamma_0)]
\end{equation}
\end{theorem}
All these versions are equivalent and we will only prove the following one:
\begin{theorem}[Toponogov, metric version]
\label{theorem-Toponogov-metric}
Let $M$ be a complete manifold and $K \geq k$. Let $o,p_1,p_2 \in M$, distinct
points. Let $\gamma_1$ and $\gamma_2$ be normalized geodesics joining 
$o$ to $p_1$ and to $p_2$. Suppose $\gamma_1$ is minimizing (in the prove we
show that $\gamma_2$ is minimizing too).
Let $\gamma_0$ be a nonconstant geodesic joining $p_1$ to $p_2$ and suppose
$$
\ell(\gamma_0) \leq \ell(\gamma_1) +\ell(\gamma_2)
$$
(which is a weaker condition than asking that $\gamma_0$ is minimizing as well).

If $k>0$ suppose additionally that $\ell(\gamma_0) \leq \pi/\sqrt{k}$.

Then there exists a geodesic triangle $\{\tilde{\gamma}_i:i=1,2,0\}$ in
$\mathbb{Q}_k^2$ such that $\ell(\tilde{\gamma}_i) = \ell(\gamma_i)$ and
\begin{equation}
\label{equation-Toponogov-metric}
\tilde{d}(\tilde{o},\tilde{\gamma}_0(t)) 
\leq  d(o,\gamma_0(t))
\qquad \forall t \in[0,\ell(\gamma_0)]
\end{equation}
\end{theorem}

\begin{proof}[Outline of proof]
This is the one we proved in class. Define distance functions
$\rho:=d(\sigma,\cdot)$ and $\tilde{\rho}:=\tilde{d}(\tilde{\sigma},\cdot)$.
\end{proof}

\begin{lemma}
\label{lemma-equality-Toponogov}
If equality holds in Eq. \ref{equation-Toponogov-hinge1}, then $\gamma_1$ and
$\gamma_2$ are the boundary of a totally geodesic surface $\Delta \subset M$ 
with $K_\Delta \equiv k$.
\end{lemma}

\begin{proof}
Using the map from Cartan's lemma. Use Rauch's theorem \ref{theorem-Rauch} to
compare $M$ with $\mathbb{Q}_k$, and again to compare $\Delta$ with $M$. As you
might expect, use Gauss' equation \ref{equation-Gauss} to show that the second
fundamental form of $\Delta$ vanishes. The essence of the proof is that
$\alpha(\gamma',\gamma')=0$ for the geodesics emanating from $p$, which is more
or less straightforward, and then showing that also $\alpha(\sigma',\sigma')=0$
for geodesics emanating from another vertex of the triangle, which requires to
``look at things from another point of view''.
\end{proof}

\begin{theorem}[Toponogov, angle version]
\label{theorem-Toponogov-angle}
\cite{Cheeger-Ebin} Theorem 2.2.(A). Let $M$ be a complete manifold with 
$K_M\geq H$.

Let $(\gamma_1,\gamma_2,\gamma_3)$ determine a geodesic triangle in $M$. Suppose
$\gamma_1,$ $\gamma_3$ are minimal and if $H>0$, suppose $\ell(\gamma_2)\leq
\frac{\pi}{\sqrt{H}}$. Then $M^H$, the simply connected 2-dimensional space of
constant curvature $H$, there exists a geodesic triangle
$(\tilde{\gamma}_1,\tilde{\gamma}_2,\tilde{\gamma}_3)$ such that
$\ell(\gamma_i)=\ell(\tilde{\gamma}_i)$ and $\tilde{\alpha}_1 \leq\alpha_1$,
$\tilde{\alpha}_3 \leq \tilde{\alpha}_3$.

Except in case $H>0$ and $\ell(\gamma_i)=\frac{\pi}{\sqrt{H}}$ for some $i$, the
triangle in $M^H$ is uniquely determined.
\end{theorem}

\section{Gromov's theorem}
\label{section-Gromov-theorem}

\begin{theorem}[Gromov]
\label{theorem-Gromov}
$M^n$ complete, $K \geq 0$, then $\pi$ admits a set of $3^n$ generators. In
particular, it is finitely generated.
\end{theorem}

\begin{proof}
Consider the universal cover $\tilde{M}$ of $M$ with the pullback metric. Fix a
point $x \in \tilde{M}$ and consider the set
$$
\{f \in \Gamma:d(x,f(x))<r\},\qquad r>0
$$
By \ref{proposition-deck-transformations-act-properly-discontinuous}
every point must have a disjoint neighbourhood … 
\end{proof}

\section{Cartan's Theorem}
\label{section-Cartan-theorem}

\begin{definition}
\label{definition-free-homotopy-set}
The {\it free homotopy set} is the set of homotopy classes of loops based on any
point of $M$.
\end{definition}

\begin{definition}
\label{definition-geodesic-loop}
A {\it geodesic loop} is a geodesic whose starting and ending points are the
same. It may not be differentiable at such point.
\end{definition}

\begin{definition}
\label{definition-closed-geodesic}
A {\it closed geodesic} a smooth geodesic loop.
\end{definition}

\begin{theorem}[Cartan]
\label{theorem-Cartan}
Let $M^n$ be compact, and $\omega \in \hat{\pi}_1M$ nontrivial. Then there is a
closed geodesic $\gamma$ such that $[\gamma]=\omega$.
\end{theorem}

\begin{proof}
Consider a sequence of loops whose lengths converge to the number
$$
\ell:=\text{inf}\{\ell(c):c \in \omega\}>0
$$
Consider a sequence $c_n$ of curves in $\omega$ such that their lengths converge
to $\ell$. Then apply Arzelà-Ascoli Theorem \ref{theorem-Arzela-Ascoli}
 to ensure they converge to some curve $c$ and show this is a geodesic 
in $\omega$.

First suppose that each of the $c_n$ is a piecewise geodesic parametrized by
arclength (why can we do this?). We may then pick the supremum $L$ of all the
lengths since we are assuming that their lengths decrease. Then
$$
d(c_n(t),c_n(s)) \leq \ell \left(c_n|_{[t,s]}\right) \leq  N |t-s|
$$
This says that $\{c_n\}$ is equicontinuous (the same $N$ works for all $n$) as a
family of maps from 
\end{proof}

\section{Preissman's Theorem}
\label{section-Preissman-theorem}

\begin{definition}
\label{definition-translation}
An isometry $f \in \text{Iso}(M)$ is called a {\it translation} if there exists
a geodesic of $M$ such that $f(\gamma)=\gamma$. That is, $f \circ \gamma$ is a
reparametrization of $\gamma$.
\end{definition}

\begin{theorem}[Preissman]
\label{theorem-Preissman}
Let $M^n$ be compact with $K<0$. If $1 \neq  H \subset \pi_1(M)$ is abelian,
then $H=\mathbb{Z}$.
\end{theorem}

\begin{theorem}[Preissman]
\label{theorem-M-compact-K-negative-then-pi1-not-abelian}
If $M$ is compact and $K<0$, then $\pi_{1}(M)$ is not abelian.
\end{theorem}

\section{Byers' Theorem}
\label{section-Byers-theorem}

\begin{lemma}
\label{lemma-deck-fixes-a-geodesic-then-not-compact}
Let $M^n$ be a complete manifold with $K<0$. Suppose that every element of
$\text{Deck}(\pi)$, where $\pi$ is the universal covering, fixes the same
 geodesic $\tilde{\gamma}$. Then $M$ is not compact.
\end{lemma}

\begin{theorem}[Byers]
\label{theorem-Byers}
Let $M$ be compact, $K<0$ and $H$ soluble subgroup of $\pi_1(M)$, $H\neq \{e\}$.
Then $H$ is cyclic infinite. Moreover, $\pi_1(M)$ does not have any cyclic
subgroup of finite index.
\end{theorem}

\section{Cheeger-Gromoll Siplitting Theorem}
\label{section-Chegger-Gromoll-splitting-theorem}

\begin{theorem}[The Strong Maximum Principle]
\label{theorem-strong-maximum-principle}
\cite{pet} Theorem 7.1.7. If $f:(M,g) \to \mathbb{R}$ is continuous and
subharmonic, then $f$ is constant in a neighbourhood of every local maximum. In
particular, if $f$ has a global maximum, then $f$ is constant.
\end{theorem}

\begin{proof}
If $\Delta f>0$ then we can find a support function. Notice that Prof. Florit
shows the theorem for functions satisfying $\Delta f \leq 0$.
\end{proof}

The following lemma follows from the lemma above and gives a bound on the
Laplacian of the distance function.

\begin{lemma}[Calabi]
\label{lemma-Calabi}
If $\text{Ric} \geq 0$, for $\rho:=d(p,\cdot)$, it holds that 
$\Delta\rho \leq (n-1)/\rho$ on $M\setminus C_m(p)\cup\{p\}$.
\end{lemma}


\begin{theorem}[Cheeger-Gromoll]
\label{theorem-splitting}
Let $M$ be complete with  $\text{Ric}\geq0$. If $M$ has a line, then $M$ is
isometric to $N\times\mathbb{R}$ for some Riemannian manifold $N$.
\end{theorem}

\input{exercises-dg.tex}

\clearpage
\bibliography{my}
\bibliographystyle{amsalpha}

\end{document}

